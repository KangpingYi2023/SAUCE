Input arguments = Namespace(data_update='tupleskew', update_size=20000, dataset='bjaq', debug=False, drift_test='ddup', model_update='update', model='transformer', end2end=False, query_seed=0, random_seed=42, num_workload=15)
JSON-passed parameters = {'data_updater': {'skew_ratio': '1e-3'}, 'random_seed': 0, 'transformer': {'epochs': 40}}
MODEL-PATH=/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
DATASET-PATH=/home/kangping/code_copy/SAUCE/data/bjaq/end2end/bjaq.npy
Workloads: ['QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload']

WORKLOAD-START | Type: QueryWorkload | Progress: 1/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--query_seed=0', '--end2end', '--eval_type=first_estimate', '--num_workload=15', '--data_update=tupleskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
load_npy_dataset_from_path - df.shape = (382168, 5)
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 3.0000	99th: 2.0000	95th: 1.6708	median: 1.0729	mean: 1.1461
ReportEsts: [1.0396039603960396, 1.0125, 1.0380481171245461, 1.1016949152542372, 1.5, 1.0, 1.071349922924466, 1.0473534343065352, 1.0, 1.013003901170351, 1.172596889158226, 1.0432917615750659, 1.0715571557155716, 1.1255813953488372, 1.0752384316495938, 1.0, 1.139240506329114, 1.012190749372535, 3.0, 2.0, 1.0384615384615385, 1.1089587219591523, 1.070401750502506, 1.1403405754550793, 1.1415885545140603, 1.0, 1.138192026153081, 1.5, 1.2, 1.0145985401459854, 1.0, 1.049837322952777, 1.0097928251562422, 1.0209631728045325, 1.0751945953884565, 1.2248942698399536, 1.1737967914438503, 1.000471068159192, 1.1148495075418416, 1.037037037037037, 1.1800302571860817, 1.0182926829268293, 1.0, 1.013379625709205, 1.1687398593834506, 1.8059701492537314, 1.0098039215686274, 1.11660777385159, 1.0285911770685099, 1.1111111111111112, 1.1415253887720167, 1.29553264604811, 1.0365258235306236, 2.0, 1.12987012987013, 1.2939127617350452, 1.1904761904761905, 1.3526570048309179, 1.0807453416149069, 1.0, 1.0279898218829517, 1.0909090909090908, 1.0727272727272728, 1.0235294117647058, 1.1818181818181819, 1.056034797865341, 1.2347773401999393, 1.75, 1.0, 1.05472173021348, 1.0084235860409145, 1.0560046189376444, 1.009090909090909, 1.1183745583038869, 1.1058823529411765, 1.0384615384615385, 1.0, 1.113152400835073, 2.0, 1.0226405348790497, 1.03125, 1.0377979703897848, 1.1533742331288344, 1.0778739184177997, 1.1172718351324828, 1.0, 1.0788312726185914, 1.0373252839703726, 1.1225490196078431, 1.75, 1.0903790087463556, 1.0839004535000676, 1.0031152647975077, 1.0056100981767182, 1.0359508041627248, 1.0233766233766233, 1.0465116279069768, 1.1626984126984128, 1.0, 1.246191482263983, 1.0505399568034557, 1.055746140651801, 1.222509814071869, 1.2592592592592593, 1.0173929165108584, 1.0074329705335812, 1.1280733435199333, 1.1270383010997345, 1.0585530349478847, 1.3333333333333333, 1.6666666666666667, 1.0492990654205607, 1.057129119914428, 1.0486418193303852, 1.0909090909090908, 1.0577790339802777, 2.0, 1.0700094607379376, 1.2094907407407407, 1.0, 1.0340909090909092, 1.0, 1.268170426065163, 1.0352131358615104, 1.0392948668168052, 1.087378640776699, 1.8, 1.0951986754966887, 1.0, 1.0, 1.0912269581130956, 1.1818181818181819, 1.03857421875, 1.0252344137614853, 1.0164391195319031, 1.0080106809078773, 1.0488505747126438, 1.0222135619641466, 1.039972432804962, 1.0731261425959782, 1.0060217305930095, 1.2755905511811023, 1.0032722513089005, 1.1153691691716054, 2.0, 1.020510483135825, 1.023391812865497, 1.0973451327433628, 1.1258161284630317, 1.5, 1.1728021312666506, 1.0180995475113122, 1.004, 1.1074561403508771, 1.0043795620437956, 1.022406066873492, 1.041690809259719, 1.1133534136546184, 1.0374753451676528, 1.0328947368421053, 1.2857142857142858, 1.4526315789473685, 1.0338733431516938, 1.4285714285714286, 1.05776098055374, 1.0177736772678403, 1.1872863978127135, 1.3750613647520864, 1.1667854597291518, 1.0587845538151652, 1.2821052631578946, 1.1069767441860465, 1.1279171104870727, 1.0374115267947421, 1.046973803071364, 1.0913508260447036, 1.0185070943861814, 1.1209936593416139, 1.1166941888810253, 1.0, 1.1587301587301588, 1.0759243578887947, 1.0285087719298245, 1.2042771218534194, 1.105263157894737, 1.1005414151471777, 1.2821449163943879, 1.1407484362487283, 1.1372549019607843, 1.194090909090909, 1.1206420190960844, 1.0, 1.3636363636363635, 1.0520156571566925, 1.0389150943396226, 1.0353221957040573, 1.25, 1.0842443729903537, 1.0491272602085122, 1.0807245492156692]
origin-bjaq_15.71 	max: 3.0000	99th: 2.0000	95th: 1.6708	median: 1.0729	mean: 1.1461

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 1/15 | Workload-time: 4.362309 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 2/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=tupleskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
TupleSkewSample - START
0.001
TupleSkewSample - END
load_npy_dataset_from_path - df.shape = (402168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (382168, 5), new data size: (20000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 23.9909
detection mean = 23.7451
detection threshold = 0.2538
test statistic = 0.2458
Offline time = 3.6293716430664062
Online time = 0.07115292549133301
Test result: False
DDUp Drift detection: False
Detection latency: 4.3176s

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 2/15 | Workload-time: 6.627704 | Model-update-time: 0.000000


WORKLOAD-START | Type: QueryWorkload | Progress: 3/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=tupleskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 402168, total size: 402168, split index: [335140 402168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 60.0000	99th: 19.6700	95th: 1.8100	median: 1.0889	mean: 1.6652
ReportEsts: [1.2233009708737863, 1.036681001770807, 1.0438028527588366, 1.0, 1.3636363636363635, 1.0, 1.0856808136748495, 1.0565538875196057, 1.0, 1.092707045735476, 1.0768117920021838, 1.0405881596433317, 1.0464527027027026, 1.1534883720930234, 1.0974251913709117, 1.0, 1.3777777777777778, 1.0879274249825541, 3.0, 2.0, 1.1851851851851851, 1.120945852693564, 1.1302486750917244, 1.190252495596007, 1.0454545454545454, 1.0, 1.1684283486397504, 2.0, 1.4, 1.0503597122302157, 1.0, 1.0417365692841274, 1.0072829395521905, 1.0351311232063336, 1.04603470529184, 1.2454097448533503, 1.2754010695187166, 60.0, 1.0531400966183575, 1.0940525587828493, 1.069362767272837, 1.0605291418529728, 1.1282735897290235, 1.0610526315789475, 1.100470082065174, 1.2222222222222223, 1.48, 1.1620111731843576, 1.0326848249027238, 1.4245283018867925, 1.1428460200877215, 1.0313253012048194, 1.0851370851370852, 1.188230572417599, 1.1526717557251909, 1.0565176667530243, 1.077097659753744, 1.064662166929282, 1.3656716417910448, 1.057455655119258, 1.4444444444444444, 1.128988663542497, 1.0737564322469983, 1.1772727272727272, 1.0804597701149425, 1.2727272727272727, 1.00068575906998, 1.279486413854882, 1.75, 1.0, 1.1165406925645984, 1.034330011074197, 1.0358917725013805, 1.0711206896551724, 1.104631447438872, 1.0169133192389006, 1.0487364620938628, 1.0, 1.1799582463465552, 4.545454545454546, 1.0120811188486356, 1.1428571428571428, 1.048789339969928, 1.2638036809815951, 1.1078546307151231, 1.169774288518155, 1.08, 1.0745068584234245, 1.0349552121951782, 1.1715686274509804, 1.75, 1.1053897978825793, 1.0512744400696727, 1.1246105919003115, 1.0052219321148825, 1.0149122807017543, 1.0325581395348837, 19.666666666666668, 1.6, 1.0, 1.2546525076227526, 1.0084394023242944, 1.0689655172413792, 1.2296475807114104, 1.3076923076923077, 1.0315896272865626, 1.0876249039200614, 1.101299923030873, 1.1244088759548927, 1.0455997676444961, 1.3333333333333333, 2.0, 1.0602836879432624, 1.0766990342029168, 1.0115074798619101, 1.0389610389610389, 1.0561138129976637, 2.0, 1.101150103214391, 1.1954397394136809, 1.0, 1.0164835164835164, 1.0, 1.1575492341356675, 1.0240529851172575, 1.0153636298370305, 1.0666666666666667, 1.8, 1.1884935654806965, 1.0, 1.1071428571428572, 1.0974655092233763, 1.1818181818181819, 1.020035885167464, 1.0365623844566632, 1.1316170688299325, 20.0, 1.4166666666666667, 1.061124694376528, 1.075519513431323, 1.0288088642659279, 1.037178448531712, 1.2, 1.0018785222291797, 1.1092838747675855, 3.0, 1.0, 1.146448087431694, 1.1003937007874016, 1.1131859131859132, 1.5, 1.2939088619189374, 1.0074074074074073, 1.0752895752895753, 1.1644736842105263, 1.1742021276595744, 1.0364443151232996, 1.1021197800071858, 1.1314590030225975, 1.0857142857142856, 1.0343839541547277, 1.3265306122448979, 1.3529411764705883, 1.081043956043956, 1.4285714285714286, 1.0723726045445603, 1.1774891774891776, 1.0, 1.3556042351223074, 1.0671447196870925, 1.0418057542521062, 1.2863157894736843, 1.0461538461538462, 1.089325792261424, 1.1516683518705764, 1.039872408293461, 1.002664298401421, 1.072666463970812, 1.106322070800742, 1.054390742888417, 1.165644171779141, 1.2345323741007195, 1.0601200888846862, 1.154305837157187, 1.3948497854077253, 1.0452330984859841, 1.1627118644067798, 1.0, 1.0885423442175102, 1.0808933043093996, 1.25, 1.168141592920354, 1.0060240963855422, 1.1170088907705333, 1.252481239409344, 1.027940082864124, 1.2164674634794157, 1.0577890458368546, 1.2713987473903967, 1.0]
origin-bjaq_15.71 	max: 60.0000	99th: 19.6700	95th: 1.8100	median: 1.0889	mean: 1.6652

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 3/15 | Workload-time: 4.407798 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 4/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=tupleskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
TupleSkewSample - START
0.001
TupleSkewSample - END
load_npy_dataset_from_path - df.shape = (422168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (382168, 5), new data size: (40000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 23.8778
detection mean = 23.7472
detection threshold = 0.2455
test statistic = 0.1307
Offline time = 3.581840991973877
Online time = 0.07882881164550781
Test result: False
DDUp Drift detection: False
Detection latency: 4.2990s

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 4/15 | Workload-time: 6.542609 | Model-update-time: 0.000000


WORKLOAD-START | Type: QueryWorkload | Progress: 5/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=tupleskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 422168, total size: 422168, split index: [351806 422168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 60.0000	99th: 19.6700	95th: 1.8100	median: 1.0894	mean: 1.7323
ReportEsts: [1.1653333333333333, 1.0231158198892367, 1.052390079953787, 1.0326923076923078, 1.3636363636363635, 1.0, 1.0546511627906976, 1.0711357628807905, 1.2, 1.0536352800953517, 1.0316170989383853, 1.0397500724398137, 1.0189753320683113, 1.255813953488372, 1.134923339011925, 1.5617283950617284, 1.273076923076923, 3.5625, 1.0909090909090908, 1.1472945891783568, 1.1396833503575077, 1.2625607779578607, 1.0472531887114593, 2.0625, 1.3131743327654741, 1.0230395515415758, 2.0, 1.1131263254518406, 1.2, 1.4, 1.143884892086331, 1.0, 1.0481868853509306, 1.001972254535209, 1.0822550831792976, 1.1156061437191442, 1.241315927676495, 1.2058823529411764, 60.0, 1.0359327217125383, 1.1894882434301521, 1.023063822417227, 1.0706724079575796, 1.1086395873629915, 1.0932539682539681, 1.085295083762181, 1.2777777777777777, 1.4230769230769231, 1.2455089820359282, 1.070817120622568, 1.4245283018867925, 1.1772753711149888, 1.083916083916084, 1.025974025974026, 1.199667541978848, 1.2442748091603053, 1.0894569299098378, 1.0656764103422955, 1.0766139288802972, 1.4253731343283582, 1.089571862930397, 1.5185185185185186, 1.1099530812454796, 1.0415973377703827, 1.0223880597014925, 1.0574712643678161, 15.25, 1.0663416562355887, 1.3068905616676316, 1.75, 1.0, 1.044328771723617, 1.1002132196162047, 1.0420388859695218, 1.0642398286937902, 1.1411042944785277, 1.0, 1.1164874551971327, 1.3333333333333333, 1.1955010224948874, 3.8461538461538463, 1.0174496595366198, 1.5714285714285714, 1.0211868379113154, 1.3006134969325154, 1.0702151755379388, 1.1483516483516483, 1.12, 1.0616595700247125, 1.0412291452736648, 1.1012658227848102, 1.75, 1.0411433521004765, 1.0677841282038967, 1.0619718309859154, 1.0098522167487685, 1.011063829787234, 1.0325581395348837, 19.666666666666668, 1.52901023890785, 1.0, 1.249702852614897, 1.0177333333333334, 1.1052249637155298, 1.2321470381643642, 1.096774193548387, 1.0185857850318154, 1.075798860540005, 1.2890680918070334, 1.1194225721784776, 1.02652950730915, 1.3333333333333333, 2.0, 1.0151545363908274, 1.074122939720551, 1.0494880546075085, 1.12987012987013, 1.0593321712977204, 1.0, 1.1078182331357607, 1.103846153846154, 1.0, 1.1428571428571428, 1.0, 1.1991247264770242, 1.0267969330974178, 1.0321982699437044, 1.018181818181818, 1.8, 1.1166180758017492, 1.0, 1.1071428571428572, 1.095320703878344, 1.0833333333333333, 1.038692554826093, 1.0215058044626961, 1.120464159583964, 20.0, 1.3076923076923077, 1.0415647921760391, 1.0043394406943105, 1.0035952747817154, 1.0797431137104292, 1.148936170212766, 1.0609970674486804, 1.0832773229613142, 3.0, 1.0572937830150346, 1.1065400843881856, 1.0764411027568923, 1.040859564164649, 1.5, 1.1051546391752578, 1.0733056708160442, 1.0090579710144927, 1.1027667984189724, 1.155759162303665, 1.0309567837819327, 1.0292389608005141, 1.3003098060344827, 1.095822074412804, 1.04, 1.0557768924302788, 1.0574162679425838, 1.3195739014647137, 1.4285714285714286, 1.0625061984451065, 1.0162907268170427, 1.0646551724137931, 1.3069911356414117, 1.1013698630136985, 1.071726363921639, 1.368421052631579, 1.0084033613445378, 1.078600017031423, 1.0435185185185185, 1.0482315112540193, 1.0428449014567267, 1.0620790629575403, 1.1364685629328222, 1.029436203988491, 1.043956043956044, 1.183448275862069, 1.0619563750843266, 1.0656828297025065, 1.170731707317073, 1.1491611123879568, 1.0574412532637076, 1.1428571428571428, 1.0803954428744946, 1.1063066155874757, 1.3157894736842106, 1.1666666666666667, 1.0778443113772456, 1.0222473072762335, 1.1333705357142858, 1.1066666666666667, 1.0958638758047883, 1.0893763368703602, 1.0386134269416412]
origin-bjaq_15.71 	max: 60.0000	99th: 19.6700	95th: 1.8100	median: 1.0894	mean: 1.7323

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 5/15 | Workload-time: 4.399132 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 6/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=tupleskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
TupleSkewSample - START
0.001
TupleSkewSample - END
load_npy_dataset_from_path - df.shape = (442168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (382168, 5), new data size: (60000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 23.7007
detection mean = 23.7545
detection threshold = 0.2533
test statistic = 0.0538
Offline time = 3.5960283279418945
Online time = 0.08316493034362793
Test result: False
DDUp Drift detection: False
Detection latency: 4.3071s

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 6/15 | Workload-time: 6.570873 | Model-update-time: 0.000000


WORKLOAD-START | Type: QueryWorkload | Progress: 7/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=tupleskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 442168, total size: 442168, split index: [368473 442168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 106.0000	99th: 42.0550	95th: 3.3720	median: 1.0965	mean: 2.4408
ReportEsts: [1.135064935064935, 1.0618027666220438, 1.0536219660762816, 1.031858407079646, 1.3043478260869565, 1.0, 1.1028902282758293, 1.041276347780658, 1.2, 1.002267573696145, 1.067733595962083, 1.0401161657505944, 1.0422904191616766, 1.330232558139535, 1.1819397993311036, 1.488235294117647, 1.3269230769230769, 3.3529411764705883, 1.0909090909090908, 1.1968864468864469, 1.0511402122375253, 1.046200583522995, 4.916666666666667, 1.1118942731277532, 1.021975799036375, 1.0324698117452937, 2.0, 1.156607667771593, 1.5, 1.4, 1.1798561151079137, 1.0, 1.0497891620484028, 1.001273644857825, 1.171911695631752, 1.0518000518000519, 1.2482553067752253, 1.1590361445783133, 106.0, 1.0277169948942377, 1.0386007237635706, 1.0007837837837839, 1.0677146906674893, 1.0238531150285086, 1.220952380952381, 1.1225193193774263, 1.6666666666666667, 1.3703703703703705, 1.0673076923076923, 1.090566037735849, 1.5, 1.1840332415420929, 1.0768115942028986, 1.0875816993464051, 1.198059598059598, 1.0076923076923077, 1.0984218286400786, 1.1101295641931683, 1.3686534216335542, 1.2435897435897436, 1.0623980872683803, 1.4814814814814814, 1.1788607741601975, 1.0178861788617886, 1.0474452554744527, 1.2524271844660195, 15.25, 1.0539007092198582, 1.3610792192881744, 1.75, 1.0, 1.0988905738686248, 1.124607329842932, 1.0516455696202531, 1.0, 1.05027511871561, 1.0485564304461943, 1.1980538065254722, 1.1870967741935483, 1.303030303030303, 1.093005645710123, 1.0726020137784844, 1.849056603773585, 1.0, 15.666666666666666, 1.0787949015063731, 1.3529411764705883, 1.1158129175946547, 1.2, 47.5, 1.0840173829068083, 1.1298145506419401, 1.2643804668945142, 1.0745521601685986, 1.1001884733657374, 1.0450928381962865, 1.041112454655381, 1.020401854714065, 1.0951086956521738, 11.0, 1.0674279362352526, 1.1161866931479643, 3.7333333333333334, 1.1961509992598076, 1.0157303370786517, 1.0996699669966996, 1.2376830140389175, 1.096774193548387, 1.0167932924512944, 1.079459203036053, 1.272371263953907, 1.0275286111970305, 1.0423907319641916, 1.5, 4.7, 1.0343280670957675, 1.0480433223021917, 1.031512605042017, 1.2857142857142858, 1.053688914859542, 2.0, 1.0641539695268645, 1.1329534662867997, 1.0, 1.164835164835165, 1.1428571428571428, 1.2516411378555798, 1.0229658651946294, 1.0221972649798508, 1.407079646017699, 1.8, 1.0299116247450715, 1.0, 42.0, 1.165216531540439, 1.0833333333333333, 1.0831305758313057, 1.0400986744015832, 1.128015664831714, 15.0, 1.2142857142857142, 1.0880195599022005, 1.0797665369649805, 1.008959681433549, 1.0381522129603156, 1.0728476821192052, 1.0528109028960817, 1.118129614438064, 3.0, 1.0801083591331269, 1.0901960784313725, 1.0680473372781065, 1.0318591795170207, 1.5, 1.0769780500255233, 1.0500676589986468, 1.0873440285204992, 1.2054794520547945, 1.2033678756476685, 1.0170342004489634, 1.0264640590313605, 1.1054037842848574, 1.1169637492489486, 1.1097560975609757, 1.1842751842751842, 1.1496786042240588, 1.3197452229299362, 1.5714285714285714, 1.0511170520584567, 1.0162907268170427, 1.0114942528735633, 1.3658598296365017, 1.0142642642642643, 1.0195518827738967, 1.4884210526315789, 1.0861344537815125, 1.0501908551936978, 1.0961995249406176, 1.0250569476082005, 1.1044407894736843, 1.0406390134529149, 1.1182562708876564, 1.04107970067704, 1.0210526315789474, 1.1201044386422976, 1.0136761393917513, 1.1232876712328768, 1.067448680351906, 1.1379540895921552, 1.0227272727272727, 1.1428571428571428, 1.086316069135511, 1.1086268641159083, 1.1904761904761905, 1.1112812659520164, 1.2994011976047903, 1.0644125754562266, 1.1716135995682677, 1.0085632730732637, 1.0507235355466713]
origin-bjaq_15.71 	max: 106.0000	99th: 42.0550	95th: 3.3720	median: 1.0965	mean: 2.4408

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 7/15 | Workload-time: 4.432651 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 8/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=tupleskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
TupleSkewSample - START
0.001
TupleSkewSample - END
load_npy_dataset_from_path - df.shape = (462168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (382168, 5), new data size: (80000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 23.5919
detection mean = 23.7479
detection threshold = 0.2483
test statistic = 0.1560
Offline time = 4.626587152481079
Online time = 0.08666682243347168
Test result: False
DDUp Drift detection: False
Detection latency: 5.3524s

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 8/15 | Workload-time: 7.596958 | Model-update-time: 0.000000


WORKLOAD-START | Type: QueryWorkload | Progress: 9/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=tupleskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 462168, total size: 462168, split index: [385140 462168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 106.0000	99th: 47.8950	95th: 3.0083	median: 1.0990	mean: 2.9357
ReportEsts: [1.1591511936339522, 1.0613656006914434, 1.0709433555374515, 1.0139130434782608, 1.25, 1.0, 1.12934792690845, 1.0677980152057034, 1.2, 1.0466377440347072, 1.0977065075517434, 1.0384598169326142, 1.0881801125703565, 1.3325581395348838, 1.1679116596297499, 1.4213483146067416, 1.1294498381877023, 3.1666666666666665, 1.0909090909090908, 1.0775646371976648, 1.117406608379698, 1.1587720332488356, 1.0701078582434516, 1.1336134453781512, 1.006067454798331, 1.0413439463859193, 2.0, 1.1654409548495992, 1.5, 1.4, 1.6511627906976745, 1.0, 1.0470689762351402, 1.0155965515927934, 1.1330608537693005, 1.091998547391357, 1.2231556749770416, 1.0911062906724511, 106.0, 1.0733616548546037, 1.0432525951557095, 1.088161838161838, 1.015169194865811, 1.0438258349934029, 1.1675774134790529, 1.0112763008693462, 1.5555555555555556, 1.1686340640809443, 1.27, 1.0475852272727273, 12.75, 1.449579831932773, 1.275, 2.3714285714285714, 1.0381744874324441, 1.0273622459668972, 1.126779359430605, 1.2303664921465969, 1.294871794871795, 1.0543279803668915, 1.6851851851851851, 1.1213376258507468, 1.0215384615384615, 1.1094890510948905, 1.1944444444444444, 20.333333333333332, 1.0303587310999112, 1.3454009117725931, 1.4057142857142857, 1.5454545454545454, 1.2917839054586382, 1.2771084337349397, 1.0929224843524314, 1.0543259557344065, 1.0661813368630046, 1.0460858585858586, 1.1174792531120332, 1.251700680272109, 1.2524271844660195, 1.1058466266647153, 1.07426508509541, 1.8148148148148149, 1.0, 15.666666666666666, 1.097334878331402, 1.411764705882353, 1.1636636636636637, 18.333333333333332, 47.5, 1.0809810493542802, 1.150262264733107, 1.1684955389190852, 1.0450102815363915, 1.1943546854210225, 1.0334128878281623, 1.0153301886792452, 1.206896551724138, 1.0264993026499303, 1.124031007751938, 1.2944422546314545, 1.08, 45.0, 1.068788605850222, 1.072804314329738, 1.0960526315789474, 1.2455880760763651, 1.096774193548387, 1.022406761720939, 1.0951265229615745, 1.252564979480164, 1.1024881516587677, 1.0112634671890304, 1.5, 5.222222222222222, 1.0145944947348975, 1.054841500615445, 1.0347957639939485, 1.4155844155844155, 1.0560442243847188, 2.0, 1.084288260758849, 1.088183421516755, 1.0, 1.2527472527472527, 1.1428571428571428, 1.1292246520874751, 1.0130969596552755, 1.0782465684103992, 1.3361344537815125, 1.5, 1.105921052631579, 1.0, 87.0, 1.1441609238219408, 1.0, 1.0793042452830188, 1.0043959640032725, 1.0786198522715775, 1.588235294117647, 1.1226551226551227, 1.1062090447789046, 1.1058201058201058, 1.152542372881356, 1.3333333333333333, 1.5289855072463767, 1.300313122687162, 3.0, 1.0667160859896219, 1.1750972762645915, 1.028364849833148, 1.0675844806007508, 1.5, 1.1832274215289813, 1.038659793814433, 1.0499139414802066, 1.1341681574239715, 1.0, 1.0912526997840173, 1.0887759464209377, 1.0816226783968719, 1.050877192982456, 1.1232091690544412, 1.530612244897959, 1.0866141732283465, 1.383777239709443, 1.5714285714285714, 1.0795926307725014, 1.0635294117647058, 1.0804597701149425, 1.0211532367877911, 1.0063965884861408, 1.04208508687862, 1.4326923076923077, 1.0115163147792707, 1.1003020680040276, 1.0294117647058822, 1.0513176144244105, 1.0350597609561754, 1.0487476434150282, 1.0517543859649123, 1.2434184624268354, 1.0368421052631578, 1.71875, 1.0145206976178343, 1.07040608917528, 1.0263929618768328, 1.1421352054711613, 1.0345679012345679, 2.6666666666666665, 1.4803370786516854, 1.050485726883525, 1.3888888888888888, 1.0817490494296578, 1.3952095808383234, 1.0712120206244882, 1.178454089572886, 1.0390104662226451, 1.0004201658877172, 1.0758886965783518, 1.0838870431893688]
origin-bjaq_15.71 	max: 106.0000	99th: 47.8950	95th: 3.0083	median: 1.0990	mean: 2.9357

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 9/15 | Workload-time: 4.412693 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 10/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=tupleskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
TupleSkewSample - START
0.001
TupleSkewSample - END
load_npy_dataset_from_path - df.shape = (482168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (382168, 5), new data size: (100000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 23.7315
detection mean = 23.7397
detection threshold = 0.2499
test statistic = 0.0081
Offline time = 3.644684314727783
Online time = 0.09604787826538086
Test result: False
DDUp Drift detection: False
Detection latency: 4.4184s

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 10/15 | Workload-time: 6.661582 | Model-update-time: 0.000000


WORKLOAD-START | Type: QueryWorkload | Progress: 11/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=tupleskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 482168, total size: 482168, split index: [401806 482168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 126.0000	99th: 48.0850	95th: 3.0850	median: 1.0992	mean: 3.1121
ReportEsts: [1.1601941747572815, 1.0256778964667215, 1.0306481316802543, 1.0514579759862779, 1.1538461538461537, 1.0, 1.0508833922261485, 1.0462029800477015, 1.2, 1.0672975814931651, 1.0389882678324487, 1.0397606211837382, 1.0794283815221004, 1.4488372093023256, 1.1751269035532994, 1.3675675675675676, 1.220064724919094, 3.0, 1.0, 1.0182215743440233, 1.1327045404694012, 1.1266763498935315, 1.066914498141264, 1.1122291021671826, 1.0309753319392734, 1.0331535690283913, 2.0, 1.1675998506905563, 1.2, 1.6, 1.5434782608695652, 1.0, 1.0490295682009132, 1.0152576658361496, 1.0510245078344718, 1.0019466391847016, 1.2236945942391162, 1.1453362255965294, 106.0, 1.076838930936613, 1.0221134674642016, 1.051820652173913, 1.0741626794258374, 1.0487482064222453, 1.2577854671280277, 1.000476204648948, 1.6111111111111112, 1.199672667757774, 1.094488188976378, 1.1115056818181819, 12.75, 1.4680851063829787, 1.0780669144981412, 2.1842105263157894, 1.0146033129904097, 1.0104021916067814, 1.136888635391416, 1.146341463414634, 1.3461538461538463, 1.0580832695880231, 1.7222222222222223, 1.1181139084118115, 1.019578313253012, 1.1240875912408759, 1.205607476635514, 15.25, 1.097891474752385, 1.3278392995106876, 1.3743016759776536, 1.5454545454545454, 1.3782354578346785, 1.2523191094619666, 1.0667587476979743, 1.009242144177449, 1.0912579185520361, 1.0109258194364577, 1.2230275996654587, 1.125, 1.5092592592592593, 1.0972359371859517, 1.1171310629514963, 1.719298245614035, 1.0, 15.666666666666666, 1.023908523908524, 1.5686274509803921, 1.0358072916666667, 18.333333333333332, 47.5, 1.112900019876764, 1.1030225627926777, 1.1235960449265623, 1.1121742079255885, 1.1813919279213019, 1.0646651270207852, 1.0313588850174216, 1.0307692307692307, 1.0543478260869565, 1.0740740740740742, 1.3945605045329128, 1.08, 45.0, 1.0596413360964705, 1.085444234404537, 1.1670967741935483, 1.2055056330472103, 1.0, 1.0105887262231805, 1.0768893756845563, 1.194220061171673, 1.0600954787980905, 1.0419089147286822, 1.5, 4.7, 1.009403832505323, 1.0678423353119961, 1.0235183443085607, 1.3506493506493507, 1.0571481155397708, 2.0, 1.1004204798417017, 1.1588447653429603, 1.0, 1.2472527472527473, 6.333333333333333, 1.2067594433399602, 1.010966161478692, 1.0790229007633587, 1.2230769230769232, 1.5, 1.2065009560229445, 1.0, 126.0, 1.0881003822502908, 1.0, 1.048567530695771, 1.1192660550458715, 1.2647275405007363, 1.0813428018076179, 1.0865006553079948, 1.085235007885266, 1.1082390953150243, 1.152542372881356, 1.1666666666666667, 1.7191780821917808, 1.2297181895815543, 3.0, 1.0320874471086037, 1.1889908256880735, 1.0621348911311737, 1.05281875658588, 1.5, 1.1986166931488924, 1.108009708737864, 1.0262295081967212, 1.0479338842975208, 1.0, 1.011988011988012, 1.1341011540912416, 1.1357740929239861, 1.0859649122807018, 1.0151133501259446, 1.6122448979591837, 1.0866141732283465, 1.2944507361268403, 1.7142857142857142, 1.0261811440291373, 1.0082352941176471, 1.0072358900144718, 1.0204257043063143, 1.0449515905947442, 1.0195742412125366, 1.3838028169014085, 1.0872865275142316, 1.0904718966035467, 1.0814070351758793, 1.0761194029850747, 1.26230975828111, 1.0374277819643305, 1.0007745933384973, 1.2046039567551665, 1.0105263157894737, 1.0978041058114596, 1.1128608923884515, 1.1014077785731329, 1.0820433436532508, 1.2153982300884956, 1.2254901960784315, 1.0724891502035239, 1.2754500075631523, 1.045122547779296, 1.103448275862069, 1.2092849120179707, 1.0556755001050842, 1.0, 1.2727272727272727, 1.0209776993826383, 1.028052805280528, 1.016260162601626, 1.6940639269406392]
origin-bjaq_15.71 	max: 126.0000	99th: 48.0850	95th: 3.0850	median: 1.0992	mean: 3.1121

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 11/15 | Workload-time: 4.434450 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 12/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=tupleskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
TupleSkewSample - START
0.001
TupleSkewSample - END
load_npy_dataset_from_path - df.shape = (502168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (382168, 5), new data size: (120000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 23.8213
detection mean = 23.7359
detection threshold = 0.2566
test statistic = 0.0854
Offline time = 3.609339952468872
Online time = 0.0835869312286377
Test result: False
DDUp Drift detection: False
Detection latency: 4.3370s

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 12/15 | Workload-time: 6.582135 | Model-update-time: 0.000000


WORKLOAD-START | Type: QueryWorkload | Progress: 13/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=tupleskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 502168, total size: 502168, split index: [418473 502168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 111.0000	99th: 45.6100	95th: 2.8536	median: 1.1124	mean: 2.6706
ReportEsts: [1.3624678663239074, 1.0216407633287428, 1.047781889468931, 1.0909090909090908, 1.1111111111111112, 1.0, 1.10119845792826, 1.062260086314709, 1.2, 1.110667996011964, 1.068484383000512, 1.0389370631290342, 1.1143144485417364, 1.5023255813953489, 1.2135465663217309, 1.7564766839378239, 1.2621359223300972, 2.85, 1.0, 1.0495626822157433, 1.0881663438997045, 1.0865442095538287, 1.0505576208178438, 1.1191588785046729, 1.0019116803670427, 1.028726822587442, 2.0, 1.1437970433746683, 1.2, 1.4, 1.6511627906976745, 1.0, 1.037637513980936, 1.0072313495331113, 1.1582388840453357, 1.0544644896095, 1.2232688391038697, 1.1919191919191918, 106.0, 1.088546597493089, 1.0053745094693738, 1.0970037960954446, 1.151764705882353, 1.0430121568999906, 1.2116666666666667, 1.0934364877189673, 1.5555555555555556, 1.1822580645161291, 1.2553191489361701, 1.0025990903183886, 10.2, 1.6115702479338843, 1.0320284697508897, 2.3055555555555554, 1.0540410243460094, 1.0352567736084344, 1.0157143853774242, 1.33419689119171, 1.4102564102564104, 1.0224110341242314, 1.7222222222222223, 1.0896369107952448, 1.0368852459016393, 1.1642335766423357, 1.1944444444444444, 15.25, 1.0418291188593072, 1.2713807931199235, 1.3442622950819672, 1.6363636363636365, 1.3324258099646067, 1.286939942802669, 1.0943562610229276, 1.1218637992831542, 1.1940015904873709, 1.0896592946802153, 1.1486349848331647, 1.1333333333333333, 1.0573877932291744, 1.1937608318890816, 3.3333333333333335, 1.0261658790343262, 1.5714285714285714, 1.014941345955958, 1.5460122699386503, 1.1832706766917294, 1.3864468864468864, 1.32, 1.0633646305524824, 1.077503850624132, 1.0033112582781456, 1.4, 1.0874255952380953, 1.0599889134755354, 1.0277136258660509, 1.097452934662237, 1.0460277427490543, 1.0694444444444444, 1.0357142857142858, 1.3589164785553047, 1.32, 45.0, 1.040699897762481, 1.0476018752253877, 1.146400483968542, 1.2303456008442157, 1.0, 1.0070591822974864, 1.1220806794055203, 1.121153570917418, 1.0030911901081916, 1.0447448147285014, 1.6666666666666667, 4.2727272727272725, 1.003031834259727, 1.0805754489131576, 1.0240362811791384, 1.5584415584415585, 1.0558611691272408, 2.0, 1.1723076923076923, 1.1922099915325994, 1.0, 1.2637362637362637, 6.333333333333333, 1.2544731610337971, 1.014872683469736, 1.0680792972459638, 1.1865671641791045, 1.5, 1.053841919634666, 1.4, 1.1484290357529794, 1.0048192891924557, 1.0678045725023488, 1.0, 1.1136363636363635, 1.0820077909430288, 1.3670212765957446, 1.0, 1.2974504249291785, 1.0347259902333152, 1.010989010989011, 1.0042288572729483, 1.1428571428571428, 1.093387178192832, 1.1611094144756935, 3.0, 1.0480866915001694, 2.9210526315789473, 1.0531475748194015, 1.0732443996979613, 1.5, 1.1526752604626522, 1.0434285714285714, 1.0093457943925233, 1.1065573770491803, 111.0, 1.0196629213483146, 1.1106283941039565, 1.1000308380232826, 1.041795665634675, 1.0327455919395465, 1.7142857142857142, 1.037593984962406, 1.3652365236523651, 1.017381585539754, 1.375, 1.6666666666666667, 1.142882721575649, 1.0899246704331451, 1.28, 1.2787598204264872, 1.1712328767123288, 1.0045713640724645, 1.147239263803681, 1.040069329931031, 1.3046192259675407, 1.0208333333333333, 1.588235294117647, 1.1001709291450317, 1.2336900596830624, 1.2341544422917243, 1.0113402807931684, 1.0772532188841202, 1.0560716655607167, 1.1061285500747384, 1.0842824601366743, 1.587719298245614, 1.0707091222984388, 1.3153611393692777, 1.087424821425692, 1.1551724137931034, 1.175268817204301, 1.0764991500941377, 1.5930807248764416, 1.25, 1.131382419649278, 1.2857142857142858, 1.0945024777237513]
origin-bjaq_15.71 	max: 111.0000	99th: 45.6100	95th: 2.8536	median: 1.1124	mean: 2.6706

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 13/15 | Workload-time: 4.405807 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 14/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=tupleskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
TupleSkewSample - START
0.001
TupleSkewSample - END
load_npy_dataset_from_path - df.shape = (522168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (382168, 5), new data size: (140000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 23.4281
detection mean = 23.7417
detection threshold = 0.2552
test statistic = 0.3136
Offline time = 3.601471185684204
Online time = 0.09586763381958008
Test result: True
DDUp Drift detection: True
Detection latency: 4.3415s

DRIFT-DETECTED after 14-th workload
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/incremental_train.py', '--dataset=bjaq', '--end2end', '--model=transformer', '--model_update=update', '--update_size=20000', '--epochs=40']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
update_size: 140000
UpdateTask - START
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
load_npy_dataset_from_path - df.shape = (522168, 5)
Parsing... done, took 0.0s
done, took 0.0s
dataset size: 522168
train data shape: torch.Size([140000, 5]), transfer data shape:torch.Size([28000, 5])
Epoch 0 Iter 0, train entropy gap 1.4228 bits (loss 18.820, data 17.397) 0.00300 lr
epoch 9 train loss 12.1185 nats / 17.4833 bits
time since start: 32.1 secs
Epoch 10 Iter 0, train entropy gap 0.0883 bits (loss 17.485, data 17.397) 0.00245 lr
epoch 19 train loss 11.7719 nats / 16.9832 bits
time since start: 64.3 secs
Epoch 20 Iter 0, train entropy gap -0.2854 bits (loss 17.112, data 17.397) 0.00200 lr
epoch 29 train loss 11.5876 nats / 16.7174 bits
time since start: 96.8 secs
Epoch 30 Iter 0, train entropy gap -0.8312 bits (loss 16.566, data 17.397) 0.00164 lr
epoch 39 train loss 11.4635 nats / 16.5384 bits
time since start: 129.2 secs
Training done; evaluating likelihood on full data:
Epoch None Iter 0, test loss 17.5246 nats / 25.2826 bits
Saved to: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
UpdateTask - END

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 14/15 | Workload-time: 6.604990 | Model-update-time: 132.631923


WORKLOAD-START | Type: QueryWorkload | Progress: 15/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=tupleskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 522168, total size: 522168, split index: [435140 522168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 90.0000	99th: 44.0100	95th: 3.2033	median: 1.0777	mean: 2.5683
ReportEsts: [1.1804008908685968, 1.0273050308584253, 1.012070171662272, 1.0320121951219512, 2.0, 1.0, 1.0438450998774067, 1.0245737379694915, 1.0, 1.1508264462809918, 1.043444387493593, 1.0140084851026763, 1.078511195114859, 1.25, 1.0443364713027634, 1.4306784660766962, 1.0032362459546926, 1.8387096774193548, 1.0, 1.041407867494824, 1.0293681675004631, 1.0768301867192978, 1.1764705882352942, 1.2748655913978495, 1.00058506543495, 1.0045167297291944, 2.0, 1.0010063123227517, 6.0, 1.2, 2.21875, 1.0, 1.0080580428950237, 1.0409988264828651, 13.4, 1.1468721668177697, 1.7142857142857142, 1.6363636363636365, 90.0, 2.111111111111111, 1.0257771038665655, 1.1785714285714286, 1.0604239164821259, 1.1310782241014798, 16.333333333333332, 1.0356220960247806, 1.2021334053470158, 1.21, 1.3689320388349515, 1.4211764705882353, 1.0113761720904577, 1.118279569892473, 1.0330954808019028, 1.0500625782227784, 1.0078745087824317, 2.0, 1.3025830258302582, 1.1378566732412887, 1.1518737672583828, 1.0843672456575681, 1.2014925373134329, 1.8, 1.4606741573033708, 1.0327635327635327, 1.1780735107731306, 1.0177857651907167, 1.0, 1.3333333333333333, 1.0039603473298404, 1.0481927710843373, 1.6666666666666667, 1.0, 1.0006798096532972, 1.0639100639100638, 1.0753592709428672, 1.071884984025559, 1.0397827847949357, 1.1419239904988123, 1.2959518599562363, 1.3076923076923077, 1.0110430468967664, 1.0498866213151927, 1.1363636363636365, 1.0073166037456511, 44.0, 1.0379167391604323, 1.1538461538461537, 1.0027300927541345, 1.1137283768862716, 1.6341463414634145, 2.8333333333333335, 43.333333333333336, 1.0010212361153856, 1.0264599759454764, 1.0390009842519685, 1.0410208161825238, 1.1052680051574875, 1.0334128878281623, 1.081437125748503, 1.103658536585366, 1.225037257824143, 3.1, 1.1132347637937252, 2.272727272727273, 45.0, 1.014482144474296, 1.058723693143245, 1.193698347107438, 1.0181390927813276, 1.619047619047619, 1.017222289718662, 1.0700650759219088, 1.1222794370065226, 1.184703824043989, 1.084937712344281, 5.166666666666667, 2.238095238095238, 1.0521497466078142, 1.026336439797619, 1.0876068376068375, 1.7922077922077921, 1.0103355078396676, 2.0, 1.0742724097788126, 1.0613409415121255, 1.5, 1.5824175824175823, 6.333333333333333, 1.1952983725135624, 1.0036044405461935, 1.0012686696268958, 1.5436893203883495, 1.0, 1.0798742405574202, 1.0476190476190477, 1.179089026915114, 1.0147119217296774, 1.0065169797871798, 1.3333333333333333, 1.051622418879056, 1.005229455709712, 1.0824468085106382, 2.869565217391304, 1.3013100436681222, 1.1759023894255212, 1.076858813700919, 1.039456774257328, 1.4388489208633093, 1.1202107279693487, 1.0347675194660735, 3.0, 1.0821052631578947, 1.5205479452054795, 2.6082474226804124, 1.0845224150782664, 1.2757062146892655, 1.0163804289748875, 9.857142857142858, 1.0168189014736329, 1.032865620599477, 1.054093567251462, 1.0086051338750222, 1.069857197993053, 1.1485013623978202, 1.0160412489258093, 1.1309090909090909, 1.0282345802996067, 1.0268863833477884, 1.0507246376811594, 1.5625473843821076, 1.109233678671271, 1.5416666666666667, 1.0487012987012987, 1.0367381252627155, 1.314540059347181, 1.5, 1.0238044406490179, 1.4455445544554455, 1.0647876717854934, 1.016304347826087, 1.0434155571451647, 1.063868613138686, 1.0104011887072808, 1.6176470588235294, 1.0549010226661084, 1.039293510617186, 1.0210393435724805, 1.0342366706758344, 1.1620947630922693, 1.063911786746601, 1.1623711340206186, 1.0688671556642217, 1.691588785046729, 1.0019561523477973, 1.0337922403003754, 1.0160116674165671, 1.5675675675675675, 1.0640266469282014, 1.0238733002532239, 1.0095541401273886]
origin-bjaq_15.71 	max: 90.0000	99th: 44.0100	95th: 3.2033	median: 1.0777	mean: 2.5683

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 15/15 | Workload-time: 4.256165 | Model-update-time: 0.000000


Experiment Summary: #data-update-times=7, #drift=1 | total-time=214.963713