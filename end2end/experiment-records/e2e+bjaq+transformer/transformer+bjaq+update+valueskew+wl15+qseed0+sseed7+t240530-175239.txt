Input arguments = Namespace(data_update='valueskew', update_size=20000, dataset='bjaq', debug=False, drift_test='ddup', model_update='update', model='transformer', end2end=False, query_seed=0, random_seed=42, num_workload=15)
JSON-passed parameters = {'data_updater': {'skew_ratio': '1e-3'}, 'random_seed': 7, 'transformer': {'epochs': 40}}
MODEL-PATH=/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
DATASET-PATH=/home/kangping/code_copy/SAUCE/data/bjaq/end2end/bjaq.npy
Workloads: ['QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload', 'DataUpdateWorkload', 'QueryWorkload']

WORKLOAD-START | Type: QueryWorkload | Progress: 1/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--query_seed=0', '--end2end', '--eval_type=first_estimate', '--num_workload=15', '--data_update=valueskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
load_npy_dataset_from_path - df.shape = (382168, 5)
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 5.0000	99th: 2.5000	95th: 1.7500	median: 1.0829	mean: 1.1761
ReportEsts: [1.0126984126984127, 1.0080729166666667, 1.0369630947730857, 1.0216110019646365, 1.5, 1.0, 1.038863976083707, 1.0511094712797109, 1.0, 1.0183006535947712, 1.1431333506478516, 1.043004788831471, 1.039284155390659, 1.1418604651162791, 1.0773578240904274, 1.0, 1.011111111111111, 1.0499468650371944, 3.0, 2.0, 1.0, 1.0079996521890353, 1.1288504883546207, 1.1438637698179683, 1.0444005920078934, 1.0, 1.1541039129494848, 1.5, 1.0, 1.014388489208633, 1.0, 1.0549883359426921, 1.0006001089428542, 1.1148723640399556, 1.0133646644147452, 1.2335894437948889, 1.232620320855615, 1.0079149086138877, 1.1390247262208142, 1.0833333333333333, 1.06703146374829, 1.0579268292682926, 1.0, 1.039072675175827, 1.1202695697252463, 1.8615384615384616, 1.0198019801980198, 1.0954063604240283, 1.0264240699329132, 1.1666666666666667, 1.0913608160689874, 1.0446735395189004, 1.0402408960123057, 2.0, 1.438961038961039, 1.291454442558008, 1.247731397459165, 1.3592233009708738, 1.0125786163522013, 1.0, 1.1184569247546348, 1.095890410958904, 1.059090909090909, 1.0481927710843373, 1.1818181818181819, 1.0383108715184186, 1.3350802489354734, 1.75, 1.0, 1.046052018271651, 1.0219512195121951, 1.0609048723897911, 1.0113895216400912, 1.0906677842972898, 1.068235294117647, 1.0588235294117647, 1.0, 1.1056367432150314, 2.0, 1.0069872880140032, 1.5238095238095237, 1.040852903478091, 1.2085889570552146, 1.0968553459119497, 1.1270853778213936, 1.0, 1.055742416246495, 1.024447820497838, 1.107843137254902, 1.75, 1.185419968304279, 1.061301915758392, 1.2429906542056075, 1.0171184022824535, 1.0054794520547945, 1.077922077922078, 1.0714285714285714, 1.142300194931774, 1.0, 1.2603463787674314, 1.0123830093592512, 1.048885077186964, 1.2216665948182954, 1.2592592592592593, 1.0179239739436199, 1.0769843376692327, 1.193562610229277, 1.1463784603716345, 1.051808706315144, 1.1666666666666667, 2.0, 1.0385514018691588, 1.0446234578775697, 1.0499052432090967, 1.2077922077922079, 1.0608908739282992, 1.0, 1.1037527593818985, 1.1689038031319912, 1.0, 1.064327485380117, 1.1666666666666667, 1.2406015037593985, 1.0241380652053185, 1.1130698143977635, 1.108910891089109, 1.8, 1.1788079470198676, 1.0, 1.037037037037037, 1.109261739477155, 1.1818181818181819, 1.0611979166666667, 1.0299321095040415, 1.0639113407216065, 1.0467289719626167, 1.1162079510703364, 1.0389711613406079, 1.039972432804962, 1.089579524680073, 1.0416278399945784, 1.3388429752066116, 1.011881188118812, 1.1233038419880492, 2.0, 1.0159525979945305, 1.0057142857142858, 1.1025991792065664, 1.1071113463913886, 1.5, 1.2069508355534027, 1.0266666666666666, 1.0245901639344261, 1.1074561403508771, 1.1474036850921272, 1.00944032366824, 1.140363065212795, 1.157576073907824, 1.0712830957230142, 1.0888157894736843, 1.2857142857142858, 1.3018867924528301, 1.0225903614457832, 1.7142857142857142, 1.044190939267848, 1.0247199749902782, 1.20625, 1.3112068158412133, 1.106081081081081, 1.1187882642919615, 1.2652631578947369, 1.1044083526682134, 1.0568412898227946, 1.0010111223458038, 1.0034632034632034, 1.0495626822157433, 1.040983606557377, 1.1091916978213228, 1.1012031139419673, 1.0, 1.0793650793650793, 1.0114187838995148, 1.0285087719298245, 1.1630808950086058, 1.1578947368421053, 1.1055777141499643, 1.2344801076302134, 1.09997186329892, 1.1372549019607843, 1.1190909090909091, 1.010838066535296, 1.0, 2.0, 1.0081514063193575, 1.098503740648379, 1.0101429230059935, 1.5909090909090908, 1.0463022508038584, 1.058206631486458, 1.070025229995875, 1.0626410835214446, 1.0850637714767577, 1.112994350282486, 1.0491803278688525, 1.2173913043478262, 1.0, 1.3559322033898304, 1.1644062450717552, 1.3205574912891986, 1.2988505747126438, 1.013840830449827, 1.0031277926720286, 1.0206154922189195, 1.0422261680168683, 1.1069810913796823, 1.1891891891891893, 1.0597243491577335, 1.0113415424497731, 1.034981905910736, 1.022981497549422, 1.0, 1.0443064182194617, 1.1381639847950682, 1.0161109064397187, 1.1589363017934446, 1.03054151248241, 1.2805459272097053, 1.0357142857142858, 1.0064966293462028, 1.0970861268695205, 1.0355329949238579, 1.1294117647058823, 1.1605681271064034, 1.0027152831652444, 1.168503937007874, 2.0, 1.1917769642354266, 1.1184122376060741, 1.0447726207219878, 1.191111111111111, 1.0, 1.6666666666666667, 1.089270325882415, 1.1454545454545455, 1.1572929427924417, 1.5, 1.0, 1.1111111111111112, 1.0554254488680719, 1.1428571428571428, 1.019718309859155, 1.1276371308016877, 1.0400667779632722, 1.001682085786375, 1.0981397959776233, 1.0555555555555556, 2.0, 1.0831842576028623, 1.0784371762616545, 1.1103327495621715, 1.008453495235686, 1.1246822245708246, 1.025377125271177, 1.109697933227345, 1.071809587521786, 1.0113636363636365, 1.014094432699084, 1.045046201232033, 1.3636363636363635, 1.0746530691279932, 1.178391959798995, 1.2045454545454546, 1.3157894736842106, 1.0548523206751055, 1.0555555555555556, 1.1794871794871795, 1.1070183702308054, 1.256267409470752, 1.3383458646616542, 1.0196300737240749, 1.0275862068965518, 1.010962261504865, 1.0552989198904772, 1.1111111111111112, 1.0517460894870863, 2.5, 1.0501940480257912, 1.0021645021645023, 1.0396886805334304, 1.0526315789473684, 1.25, 1.434782608695652, 1.1833333333333333, 1.0635315557508627, 1.0, 1.0229357798165137, 1.0203619909502262, 1.0080128205128205, 1.0167888341619813, 1.1454545454545455, 1.1446540880503144, 1.0002373083954437, 1.1575569019158343, 1.0458385612714345, 1.1025641025641026, 1.0, 1.1420047732696896, 1.2767295597484276, 1.130281690140845, 1.0230834035383318, 1.0054507337526206, 1.2, 1.4047619047619047, 1.0096952908587258, 1.0536635706914346, 1.2857142857142858, 1.0080879575016, 1.0419847328244274, 1.1875, 1.0696010288966724, 1.1428571428571428, 1.1666666666666667, 1.003528967649716, 2.0, 1.1838134430727023, 1.0203488372093024, 1.1287940935192782, 1.134763948497854, 1.2044025157232705, 1.0963855421686748, 1.112379767042303, 1.066299911556843, 1.0530846484935437, 1.0262030780622848, 1.0421983758700697, 2.0, 1.0, 1.0504010603532987, 1.25, 1.0697544642857142, 1.3529411764705883, 1.0, 1.4666666666666666, 1.359437751004016, 1.0679245283018868, 1.131578947368421, 1.0649350649350648, 1.0, 1.189081225033289, 1.0817852288173992, 2.0, 1.197736748064324, 1.0, 1.0939193805511274, 1.0348837209302326, 1.0104172133298346, 1.140552995391705, 1.1363636363636365, 1.3747072599531616, 1.2037037037037037, 1.024896388614981, 1.0230332946503, 1.0774748923959827, 1.0, 1.0769230769230769, 1.5714285714285714, 1.5, 1.2307692307692308, 1.0691953723451677, 1.3333333333333333, 1.0698835274542429, 1.0978260869565217, 1.0784260144828528, 1.1027753799471605, 1.259526261585994, 1.0195993450833092, 1.00754060324826, 1.0357142857142858, 1.5, 1.103448275862069, 1.1148936170212767, 1.0508388802958017, 1.1904761904761905, 1.5714285714285714, 1.018140589569161, 1.0011627906976743, 1.041956060536298, 1.013664596273292, 1.1464387464387464, 1.026812585499316, 1.0810810810810811, 1.0907770515613653, 1.0847457627118644, 1.1923076923076923, 1.0269121813031161, 1.1388888888888888, 1.0367260795218216, 1.0797115514695934, 1.0027275541536633, 1.011764705882353, 1.247191011235955, 1.1015384615384616, 1.0, 1.0098196795419156, 1.0476310592074192, 1.0232778111013703, 1.0573063348900218, 1.0453818472610956, 1.1471242453129966, 1.5714285714285714, 1.1542316258351892, 1.0, 1.2186165670367208, 1.25, 1.0366294590058684, 1.0176991150442478, 1.0509458297506449, 1.1304347826086956, 1.15263644773358, 3.0, 1.2029598308668077, 1.0179485992127808, 1.1104009564097848, 2.0, 1.1904761904761905, 1.3099808061420346, 1.2841328413284132, 1.0968613168555879, 1.0395010395010396, 1.1666666666666667, 1.10267471958585, 1.0346520288242975, 1.0781954282034771, 1.0860094812096188, 1.130701754385965, 1.2056384742951907, 1.035294117647059, 2.142857142857143, 1.0287206266318538, 1.5, 1.2186201163757273, 1.064516129032258, 1.1697987075688925, 1.6666666666666667, 1.0778203134346214, 1.1066180893295985, 1.0777297964219616, 1.0, 1.1515151515151516, 1.12, 1.2876540735544644, 1.474835886214442, 1.0, 1.0134416129935593, 1.0903315872385662, 1.112722751761293, 1.5, 2.0, 1.010485436893204, 1.013623978201635, 1.062295081967213, 1.1111111111111112, 1.0905166987392767, 1.0009442870632672, 1.4705882352941178, 1.0839924670433145, 1.0454545454545454, 1.0813648293963254, 1.043548387096774, 1.3209928481278923, 1.003271913208197, 1.0, 1.0571428571428572, 1.0760009886307464, 1.061524319177925, 1.025064017373829, 1.0, 1.1136916611369165, 1.0133139834584837, 1.0220010476689365, 2.0, 1.0322966507177034, 1.029654495437304, 1.0252331653134528, 1.0930059848848892, 1.0198082585405654, 1.0057806207059938, 1.0197086546700942, 1.220347155255545, 2.0, 1.007493927334746, 2.3870967741935485, 1.0, 1.1761658031088082, 1.1346153846153846, 1.0090146034074619, 1.0225890529973936, 1.0303725366515664, 1.2124827902707664, 1.078563806567396, 1.0493710266468281, 1.0730145520533536, 1.10752688172043, 4.0, 1.0033705437522507, 1.16417004048583, 1.04669745054919, 1.0548431340577973, 1.1035007610350076, 1.3468507333908541, 2.247311827956989, 2.2857142857142856, 1.0099454642839754, 1.0589506757434293, 1.0346331108603775, 1.1288411699370604, 1.0393607790204396, 1.0497835497835497, 1.0754378087112708, 1.1801400381922342, 1.2208398133748055, 3.0, 1.0, 1.0168711656441718, 1.0761904761904761, 1.075812274368231, 1.1273458445040214, 1.1411764705882352, 1.4525547445255473, 1.148905109489051, 1.1304347826086956, 1.0481201077890414, 1.2555555555555555, 1.001079031338153, 2.0, 1.0537471612414837, 1.0357142857142858, 1.330188679245283, 1.0533519553072626, 1.0542099192618224, 1.030549898167006, 1.0791180285343709, 1.1015000719302146, 1.0, 1.2127659574468086, 1.2, 1.0, 1.125, 1.092511013215859, 1.0502431118314424, 1.0728155339805825, 1.06296058955463, 1.0730858468677493, 1.1287434990236451, 1.2030128699365399, 1.0386398763523956, 1.090302735613716, 1.054054054054054, 1.1221779548472774, 1.00927734375, 1.1432616081540203, 1.1748554913294798, 1.1360711002145265, 1.0383114579638169, 1.1948347334825196, 1.0780978908730392, 2.0, 1.1498771498771498, 1.0734126984126984, 1.4205607476635513, 1.0, 1.1333333333333333, 1.25, 1.103515625, 1.2962962962962963, 1.1666666666666667, 1.010496467612396, 1.1210056578213403, 1.0286608551695595, 1.0368602285177648, 1.1837837837837837, 1.1197278911564625, 1.0, 1.1407407407407408, 1.0549330616996508, 1.047799293436396, 1.084465445953928, 1.0913543683790865, 1.0244340244706571, 1.135064935064935, 1.1262451504666038, 1.1047957371225576, 1.00754535058412, 1.1325890924151434, 1.3333333333333333, 1.055672268907563, 1.0, 1.2422535211267605, 1.2090589468922837, 3.0, 1.0897578315929792, 1.0947525314658844, 1.4285714285714286, 1.0177072258679474, 1.4, 1.0555555555555556, 1.0687415794971162, 1.6923076923076923, 1.0131128917249796, 1.0213583938487825, 1.3571428571428572, 1.2083333333333333, 1.1278350515463917, 1.0148254423720708, 1.0015452538631346, 1.0808452446846613, 1.1557182067703569, 1.0, 1.0464914186400174, 1.146341463414634, 2.0, 1.000392093548908, 1.0898607145946881, 1.1655629139072847, 1.0176923811646343, 1.0342757257941937, 1.0761904761904761, 2.142857142857143, 1.0516, 1.0, 1.1334905740417083, 1.1929964186231596, 1.000674771615761, 1.0428537594561083, 1.1923076923076923, 1.0829975825946818, 1.1973244147157192, 1.0549210634426902, 1.1028391167192428, 1.03954802259887, 1.0, 1.0682554546305834, 3.0, 1.1318022669277787, 1.0266979639740776, 1.0131563541145538, 1.5833333333333333, 1.2526038050270796, 1.5139664804469273, 1.1428571428571428, 1.0681738026380758, 1.0420575865415722, 1.1517467248908297, 1.0588235294117647, 1.3333333333333333, 1.038642783132017, 1.5, 1.0957943925233644, 1.0833333333333333, 1.0254343730374713, 1.44, 1.1856540084388185, 1.020964360587002, 1.0, 1.812169312169312, 1.2461287693561531, 1.25, 2.0, 1.1271186440677967, 1.1241379310344828, 1.0659062103929025, 1.1972361809045227, 1.1169284467713787, 1.2713864306784661, 1.1014466214978942, 1.0493506493506493, 1.09375, 1.1387755102040817, 1.0384615384615385, 1.0, 1.1585081585081585, 1.126984126984127, 1.015495867768595, 1.0425818483215914, 1.0689670230950628, 1.044402211472011, 1.065366258559867, 1.1554728166570272, 1.1414835164835164, 1.0163735597331716, 1.5714285714285714, 1.0, 1.2592592592592593, 1.0247628443500039, 1.0697263901147396, 1.107843137254902, 1.0541871921182266, 1.0408552882779687, 1.0315751704341587, 1.0198417509987718, 1.1142857142857143, 1.2222222222222223, 1.0180859080633007, 1.0361214209968186, 1.0895821169405289, 1.01484869621204, 1.019736842105263, 1.0908151210868282, 1.0238736142915636, 1.2108527131782947, 1.374236252545825, 1.125, 1.075242718446602, 1.4095238095238096, 1.1555555555555554, 1.207236842105263, 1.0701001430615165, 1.0, 1.0503597122302157, 1.0217118307997357, 1.1111111111111112, 1.091252119504215, 1.0316939890710382, 1.131578947368421, 1.0020111704769867, 1.0209084354722422, 1.0818896051571314, 1.0276717557251909, 1.0576230492196879, 1.2009881891096146, 1.1789473684210525, 1.2142857142857142, 1.0, 1.4285714285714286, 1.0677243550926487, 1.3333333333333333, 1.1915452207458208, 1.12699908459426, 1.01395657953035, 1.0556107249255213, 1.0484025709982254, 1.0729903536977492, 1.017921146953405, 1.0208044382801664, 1.0138539930025594, 1.1485283089613798, 1.0443909325750445, 1.2069432735155967, 1.6666666666666667, 1.1428571428571428, 1.0039525691699605, 1.1410100870047488, 1.0098684210526316, 1.322643614054657, 1.029143897996357, 2.220779220779221, 1.0436695205348907, 1.0563758389261746, 1.066614832535885, 1.1875, 1.0558915586096533, 1.0342634325068163, 1.23876953125, 1.0581052631578947, 1.391304347826087, 1.0139186295503213, 1.1166666666666667, 1.6875, 1.077278179637236, 1.6923076923076923, 1.0464135021097047, 1.0483870967741935, 1.0480565371024735, 1.0431048998147836, 1.0047281323877069, 2.2, 1.041860465116279, 1.0992683554542446, 1.0476859825545863, 1.0042336211780674, 1.008796409628723, 1.0751050697240931, 1.0, 1.0875536480686696, 1.0296932994725532, 1.0168311085316308, 1.0160320641282565, 1.0069444444444444, 1.10595130748422, 1.0340861033578619, 1.3330106485963213, 1.009788013609003, 1.0, 1.3333333333333333, 1.0626467897846672, 1.0305974477958237, 1.2371584699453553, 1.059679362431656, 1.0670391061452513, 1.0817307692307692, 1.1096292791593971, 1.0618493962397104, 1.0919117647058822, 1.0511363636363635, 1.0469208211143695, 1.1094217837333726, 1.1071428571428572, 1.75, 1.0285419568893095, 1.1750561285914163, 1.032979976442874, 1.0232558139534884, 1.159304851556843, 1.0021277335465701, 1.17430418892325, 1.4981273408239701, 1.3461538461538463, 1.0020256583389602, 1.1046511627906976, 1.14375, 1.34375, 1.0828472455022908, 1.193260654112983, 1.1625207296849087, 1.0, 1.0145317149831143, 1.0605071071840184, 1.0670013386880857, 1.2098435333729451, 1.3333333333333333, 1.12, 2.0, 1.1480320445837686, 1.3461538461538463, 1.0, 1.25, 1.0688741721854305, 1.076086956521739, 1.0230911492734478, 1.0324230117886914, 1.3345454545454545, 1.3076923076923077, 1.1428571428571428, 1.1935483870967742, 1.0405405405405406, 1.09375, 1.1567567567567567, 1.0249488393454138, 1.0317093985380876, 1.3473684210526315, 1.0750565916442694, 1.0463840648616185, 2.5, 1.066942261236433, 1.2773722627737227, 3.0, 2.0, 1.1831360946745562, 1.1394965215520332, 1.0633983865452565, 1.170807453416149, 1.0, 1.2227488151658767, 1.2423312883435582, 3.0, 2.0, 1.0118110236220472, 1.1384594703589193, 1.078345620392353, 1.6666666666666667, 1.0316031633882523, 1.0441518202943454, 1.035031847133758, 1.0, 1.0328638497652582, 1.023602920431321, 1.1973684210526316, 1.179257362355954, 1.051880297123795, 1.2177650429799427, 1.078125, 1.1078049897001603, 1.0752984389348026, 1.103305785123967, 1.1694915254237288, 1.0216547866101235, 1.7061769616026712, 1.0716295970835163, 1.2748091603053435, 1.1666666666666667, 1.2537313432835822, 1.0986301369863014, 1.0659962287869265, 1.0153744805918719, 1.041663153860893, 1.0578602620087336, 1.5, 1.6666666666666667, 1.088154446078118, 1.2660510114335972, 1.1989885236335343, 1.00905118984794, 1.0205720020070246, 1.1248930710008553, 1.169761273209549, 1.0208333333333333, 1.060136781699552, 1.0872182613876846, 1.3053846153846154, 1.2918552036199096, 2.5, 1.0273972602739727, 1.1328180193658313, 1.1984536082474226, 1.0018251306450354, 1.0900919463260101, 1.0163352272727273, 2.0, 1.1016731016731016, 1.0216776519632698, 1.1884852638793695, 1.0836501901140685, 1.0606792065989605, 1.0064102564102564, 1.2075055187637969, 1.0064177362893816, 1.032229032620963, 1.065998821449617, 1.008130081300813, 1.0358090185676392, 1.0, 1.1435271128480704, 1.0665737270317213, 1.0892086330935251, 1.0356021420660204, 1.141677255400254, 1.0158850226928895, 1.2, 1.2593582887700534, 1.6666666666666667, 2.0, 1.1176470588235294, 1.0025575447570332, 1.0236966824644549, 1.0429648334509265, 1.0055301313031948, 1.0662143826322932, 1.0071129707112971, 1.190217391304348, 1.1395348837209303, 1.0450837208976058, 1.6, 1.5, 1.3029661016949152, 1.1428571428571428, 1.0592383638928067, 1.1409227683049148, 1.0703019378098242, 1.0894401973673533, 2.0, 1.0092879256965945, 1.2151162790697674, 1.132448460886755, 1.040276337880859, 1.1224747474747474, 1.111986301369863, 1.141862895515087, 1.1355776868088225, 1.0294599018003274, 1.0142857142857142, 1.0907821229050279, 1.0, 1.0, 1.0417143521333285, 5.0, 1.5714285714285714, 2.16, 1.066344993968637, 1.0804597701149425, 1.0886917960088691, 1.1353471949784228, 1.1666666666666667, 1.084419615145872, 1.018107476635514, 1.0825242718446602, 1.2788461538461537, 1.4285714285714286, 1.0892018779342723, 1.0870288248337028, 1.1495535714285714, 1.0773521755299367, 1.0321996236537614, 1.0435799120920228, 1.1821946169772257, 1.0, 1.2449549435207514, 1.0360869612526251, 1.0299946197991392, 1.1774193548387097, 1.106626249734099]
origin-bjaq_15.71 	max: 5.0000	99th: 2.5000	95th: 1.7500	median: 1.0829	mean: 1.1761

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 1/15 | Workload-time: 12.056397 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 2/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=valueskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
ValueSample - START
ValueSample - END
load_npy_dataset_from_path - df.shape = (402168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (382168, 5), new data size: (20000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 25.2574
detection mean = 23.7451
detection threshold = 0.2538
test statistic = 1.5122
Offline time = 3.6360113620758057
Online time = 0.09117436408996582
Test result: True
DDUp Drift detection: True
Detection latency: 4.3602s

DRIFT-DETECTED after 2-th workload
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/incremental_train.py', '--dataset=bjaq', '--end2end', '--model=transformer', '--model_update=update', '--update_size=20000', '--epochs=40']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
update_size: 20000
UpdateTask - START
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
load_npy_dataset_from_path - df.shape = (402168, 5)
Parsing... done, took 0.0s
done, took 0.0s
dataset size: 402168
train data shape: torch.Size([20000, 5]), transfer data shape:torch.Size([4000, 5])
Epoch 0 Iter 0, train entropy gap 0.5302 bits (loss 19.144, data 18.614) 0.00300 lr
epoch 9 train loss 12.4365 nats / 17.9421 bits
time since start: 4.3 secs
Epoch 10 Iter 0, train entropy gap -0.7334 bits (loss 17.880, data 18.614) 0.00245 lr
epoch 19 train loss 12.1329 nats / 17.5041 bits
time since start: 8.5 secs
Epoch 20 Iter 0, train entropy gap -1.1831 bits (loss 17.431, data 18.614) 0.00200 lr
epoch 29 train loss 11.9368 nats / 17.2212 bits
time since start: 12.6 secs
Epoch 30 Iter 0, train entropy gap -1.3516 bits (loss 17.262, data 18.614) 0.00164 lr
epoch 39 train loss 11.7823 nats / 16.9983 bits
time since start: 16.8 secs
Training done; evaluating likelihood on full data:
Epoch None Iter 0, test loss 20.7940 nats / 29.9994 bits
Saved to: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
UpdateTask - END

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 2/15 | Workload-time: 6.762238 | Model-update-time: 19.446069


WORKLOAD-START | Type: QueryWorkload | Progress: 3/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=valueskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 402168, total size: 402168, split index: [335140 402168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 22.0000	99th: 4.9024	95th: 3.0000	median: 1.1538	mean: 1.4189
ReportEsts: [1.4253393665158371, 1.003955500618047, 1.0383742159762317, 1.0420841683366733, 2.142857142857143, 1.0, 1.072482172511478, 1.009420927553237, 1.25, 1.0109223300970873, 1.0774881451635008, 1.0229739166153213, 1.033932135728543, 1.031890660592255, 1.0026169447170428, 1.5, 1.2837837837837838, 1.345578231292517, 3.0, 1.0, 1.2727272727272727, 1.2110211543483937, 1.0325830903790088, 1.4062758051197357, 1.1356107660455486, 1.0, 1.0974813847933786, 3.0, 1.0, 1.2410714285714286, 1.0, 1.034600393779885, 1.028192883349834, 1.0954407294832826, 1.3915798078888209, 1.0662522545735635, 1.297157622739018, 2.0, 1.075642965204236, 1.2622377622377623, 1.0608995876090919, 1.0971568892493466, 1.0000239626730019, 1.1940298507462686, 1.2530310262529833, 1.0555555555555556, 1.5384615384615385, 1.6917293233082706, 1.243833017077799, 1.12, 1.0238504364561138, 1.1824686940966012, 1.524008350730689, 1.0766723116003387, 1.3740458015267176, 1.0125773446030655, 1.1855681530276159, 1.0508647955234114, 1.3098591549295775, 1.0385016328486663, 1.0847457627118644, 1.0524348415453182, 1.2505353319057815, 1.0227272727272727, 1.7037037037037037, 1.0, 1.087784619790921, 1.2674129353233832, 3.5, 1.0, 1.078276321634829, 1.0096385542168675, 1.1063218390804597, 1.3118279569892473, 1.1399393649273974, 2.442528735632184, 1.0757042253521127, 1.0, 1.0011976047904192, 1.097536450477627, 1.0102548166563083, 1.7777777777777777, 1.4627906976744185, 1.0277777777777777, 1.0263157894736843, 1.0064575645756457, 1.1666666666666667, 1.0437462795915564, 1.0298830662624512, 1.2647058823529411, 1.1666666666666667, 1.6057494866529773, 1.0224929762874906, 1.1402985074626866, 1.2597173144876326, 1.3653366583541147, 1.1168831168831168, 3.0, 1.7676348547717842, 1.0, 1.110374713229671, 1.485041007277348, 1.0064987814784727, 1.0044495381918694, 1.25, 1.0256542443187575, 1.0066023362112748, 1.156453220676888, 1.0648854961832062, 1.0533255200703193, 1.6666666666666667, 1.3333333333333333, 1.1209117938553024, 1.0580971296210866, 1.067106051527861, 1.1911764705882353, 1.0577334805733345, 1.0, 1.2281959378733571, 1.7318840579710144, 1.0, 1.2133333333333334, 1.1428571428571428, 1.5525291828793775, 1.0120891755277535, 1.1735852326891412, 1.5774647887323943, 2.25, 1.0225261464199518, 1.0, 4.666666666666667, 1.005277199566097, 1.1538461538461537, 1.076385421867199, 1.0227074647256966, 1.2620341998616191, 3.619718309859155, 1.263157894736842, 1.2319277108433735, 1.2335858585858586, 1.0866290018832392, 1.1786696829976706, 2.4923076923076923, 1.0031289111389237, 1.0298144639473779, 1.0, 1.148019801980198, 1.203576341127923, 1.1438217420661716, 1.3375029502006137, 1.5, 1.051402999516207, 1.3644444444444443, 1.182844243792325, 5.043010752688172, 1.2366148531951642, 1.0080346699379374, 1.0469750889679714, 1.3365877177122882, 1.2214285714285715, 1.3564668769716088, 1.1111111111111112, 1.108695652173913, 1.0252808988764044, 1.8571428571428572, 1.0363327688471717, 4.019847328244275, 1.3080054274084125, 1.0596324029952349, 1.367630700778643, 1.2369982727070614, 3.2758620689655173, 1.384453781512605, 1.0089864739670187, 1.015209125475285, 1.2615859938208034, 1.0230627306273063, 1.0602684947157954, 1.212741965795903, 1.0059233097880929, 1.5, 1.1708967851099832, 1.2306494466243203, 1.0333097094259391, 1.2789699570815452, 1.0176195307716032, 1.023121387283237, 1.4, 1.0084177017869156, 1.0253814135720511, 1.3181818181818181, 1.4047039740470397, 1.0930704682847605, 1.2921030649617682, 1.0169610316792823, 1.0570900391474554, 1.0419580419580419, 1.121846720589413, 1.0650263620386644, 1.3333333333333333, 2.64, 2.0, 1.3443389542298427, 1.3208955223880596, 1.7837837837837838, 1.9090909090909092, 1.0, 1.0818713450292399, 1.0651912978244562, 1.5016077170418007, 3.625, 1.0458195559754369, 3.6926829268292685, 1.020921636177225, 1.1794871794871795, 1.0114314571664678, 1.0, 1.064610866372981, 1.3771043771043772, 1.024694389871207, 1.229457604667221, 1.0, 1.0952380952380953, 1.011115845637957, 1.0231014858264138, 1.3303076147251638, 1.0213664407808234, 1.0784084966005552, 1.0740740740740742, 1.0032740655769048, 1.0215161371028272, 1.194874532835024, 1.381294964028777, 1.370380898237635, 1.052011095700416, 2.0684039087947883, 1.0, 1.2108726752503576, 1.1340715325431483, 1.213310580204778, 1.1858407079646018, 1.0, 4.0, 1.3469063862042827, 1.0740740740740742, 1.131836622639783, 2.0, 1.5, 1.1452991452991452, 1.037942024586432, 1.0091823594184506, 1.0924369747899159, 1.5119617224880382, 1.7162534435261707, 1.0617234468937875, 1.250932248535038, 2.590909090909091, 2.0, 1.3001390151312624, 1.0564722126337591, 1.935593220338983, 1.267641836923974, 1.1892234739798846, 1.0772475214249706, 1.0816491511721908, 1.068720922613197, 1.1096491228070176, 1.1494722955145118, 1.5297764418560962, 1.5714285714285714, 1.2078581584980121, 1.0613382899628252, 1.0222222222222221, 1.48, 1.3406724189229395, 1.6111111111111112, 1.1181102362204725, 1.0083761076636277, 1.0953608247422681, 1.3018292682926829, 1.0490242688926972, 1.004009623095429, 1.021006401294052, 1.0272807955301855, 2.0, 1.0345845634753268, 1.0739460953697304, 1.0196985144188757, 1.1126616310331583, 1.0706468308457306, 1.4322033898305084, 1.1551976573938507, 1.1942829457364341, 1.4195771792644079, 1.0774355213299107, 1.1012953949831523, 1.077922077922078, 2.0, 1.5454545454545454, 1.0840601224717017, 4.9033613445378155, 1.0144329896907216, 1.0303014856667856, 1.5426008968609866, 1.1612903225806452, 1.041237113402062, 1.1307262569832401, 1.2556135770234986, 1.022047935470909, 1.263157894736842, 1.0142377434519811, 1.0038655638624143, 1.0463917525773196, 1.2258064516129032, 1.5118110236220472, 1.185276073619632, 1.8571428571428572, 1.0335152995259302, 1.0921739130434782, 2.2222222222222223, 1.2031738715306357, 1.5238095238095237, 1.6, 1.0942570661490172, 2.0, 4.851548269581056, 1.3623762376237625, 1.0103626943005182, 1.2691605839416058, 1.6946902654867257, 1.0340909090909092, 1.0029916954660338, 1.010692480219301, 1.0548780487804879, 1.0119589267350182, 1.2803471952325431, 5.0, 1.125, 1.368794769933373, 2.0, 1.094810379241517, 1.6470588235294117, 4.846153846153846, 1.0454545454545454, 1.8757062146892656, 1.0430743243243243, 1.7462686567164178, 2.351145038167939, 1.0, 1.8272506082725062, 1.0589743439653003, 4.5, 1.0375223347230493, 1.0, 1.0157210107202042, 1.7450980392156863, 1.058946686274021, 1.1132478632478633, 1.1012216404886561, 1.1308116627265563, 1.565217391304348, 1.0196086881572142, 1.004845629474121, 1.0931586608442503, 1.0, 1.2727272727272727, 1.0, 1.5, 1.0666666666666667, 1.522595596755504, 1.3333333333333333, 1.3498349834983498, 1.0, 1.0997395582135623, 1.030199897318693, 1.185614849187935, 1.2286489387938664, 1.0407811602527284, 1.316614420062696, 1.3846153846153846, 1.6435643564356435, 1.1928934010152283, 1.0081386636351222, 1.9090909090909092, 22.0, 4.41534170153417, 1.4077669902912622, 1.109977717547872, 1.1808972503617945, 1.3142448103078024, 1.0366013071895426, 1.2698412698412698, 1.03781058696435, 1.0614406779661016, 1.7115384615384615, 4.404040404040404, 1.0188916876574308, 1.2476492783134694, 1.0529922338967566, 1.2929873772791023, 2.0930232558139537, 1.054054054054054, 1.510548523206751, 1.0, 1.0734484068569259, 1.0863702554080206, 1.0760409088964011, 1.0160381818078266, 1.4978516184474362, 1.096774193548387, 1.2727272727272727, 1.1767142199723883, 1.1666666666666667, 1.0986666666666667, 1.8333333333333333, 1.0198408192338264, 1.5610859728506787, 1.133557280203869, 1.0703703703703704, 1.0996649916247907, 3.0, 1.258849557522124, 1.0080438303734574, 1.0541473647408444, 2.0, 1.434782608695652, 2.3442028985507246, 3.107142857142857, 1.1322146936748376, 1.1872509960159363, 1.4, 1.0350128095644748, 1.2456911610574124, 1.1133228058510638, 1.0403330992274507, 1.2956385850262822, 1.913105413105413, 1.1373239436619718, 5.0, 1.094240837696335, 1.9545454545454546, 1.1121251629726205, 3.7261904761904763, 1.0101891990438763, 1.5625, 4.443298969072165, 1.1648695341355892, 3.1555555555555554, 2.5, 1.7058823529411764, 1.2274678111587982, 1.2352394235239423, 1.0625, 1.213941535496306, 1.003866587029644, 1.0636324065509548, 1.4736842105263157, 1.1983240223463687, 2.0, 1.1296500920810313, 1.1200338123415046, 1.278688524590164, 1.4444444444444444, 1.097265522001458, 1.1579818031430935, 1.173913043478261, 1.00507395012415, 1.0869565217391304, 1.35678391959799, 1.1967840735068913, 1.1382592928377153, 1.1486121184149798, 1.0, 1.7619047619047619, 1.285529791605518, 1.0355196844642467, 1.2883033365348477, 1.0, 1.0116666666666667, 1.0003862242530142, 1.0060913705583756, 1.0, 1.06796875, 1.1675209212207824, 1.4027255833161263, 1.0465474209650583, 1.0477205514447152, 1.3198874296435272, 1.281150159744409, 1.0170145190562614, 1.5, 1.0716917570270554, 4.111111111111111, 1.6, 4.235444113897152, 1.8571428571428572, 1.0350715978321225, 1.2173913043478262, 1.1565530714130672, 1.0290437890974085, 1.0017412111565702, 1.1102373462968258, 1.0123537747645113, 1.128440366972477, 4.0, 1.0327485223118604, 1.0406293567018523, 1.0487065426779207, 1.008271204360269, 1.0952129066384555, 1.1843373493975904, 1.7165354330708662, 1.5714285714285714, 1.0567956773673015, 1.022428753813862, 1.056781336496639, 1.0829734731647132, 1.0117283243614705, 1.202061855670103, 1.0191768180140273, 1.076539101497504, 1.2926239419588876, 1.160934514504082, 1.388663967611336, 1.1432271432271432, 1.0233644859813085, 1.7405857740585775, 1.08, 1.3012895662368114, 1.2012934518997576, 1.1445523193096008, 1.494488188976378, 1.027177198913423, 1.4778761061946903, 1.1564543645152119, 2.0, 1.3064516129032258, 1.1944444444444444, 1.7738095238095237, 1.0151597184623715, 1.3336980306345734, 1.1843575418994414, 1.0379901960784315, 1.050077328607069, 1.0, 1.7407407407407407, 1.4444444444444444, 1.3333333333333333, 1.1136363636363635, 1.3975481611208407, 1.0200617283950617, 1.554054054054054, 1.0204607456805093, 1.156043956043956, 1.043342061719867, 1.1291942371767798, 1.0496135297615115, 1.0626598174382165, 1.0580696168101604, 1.3126326963906583, 1.1026317331926616, 1.0435287995620763, 1.4747729566094854, 1.3586572438162545, 1.3877038895859473, 1.096774193548387, 1.027434842249657, 1.037593984962406, 1.0068080357142857, 1.552, 1.5093437635810518, 1.0331491712707181, 2.0, 1.249560632688928, 1.3529411764705883, 1.0282392026578073, 2.8518518518518516, 1.5, 1.0827618645871053, 1.0755898335977319, 1.0498292986724664, 1.217906288103118, 1.4054054054054055, 1.5333333333333334, 3.0, 1.4807692307692308, 1.0386334823513712, 1.349088889287058, 1.0443478393275878, 1.0880028642441664, 1.1251721499617444, 1.2208955223880598, 1.0483050532803624, 1.0723809523809524, 1.033751789450501, 1.0201499146344803, 1.2333333333333334, 1.0232558139534884, 5.287878787878788, 1.1317584325396826, 1.0, 1.1614583333333333, 1.2083333333333333, 1.071733561058924, 1.8571428571428572, 1.1803222839232788, 1.1111111111111112, 1.5714285714285714, 1.0877892254719383, 1.054419410745234, 1.0587920408522626, 1.0000174064836664, 1.2874617737003058, 2.0526315789473686, 1.2307692307692308, 1.3172588832487309, 1.3977272727272727, 1.0336444540915997, 1.0789067665858496, 1.060147828378531, 1.0, 1.082013867328987, 3.3469387755102042, 2.0, 1.193815738752134, 1.0064650177146452, 1.2890243902439025, 1.0277871999375636, 1.2933238298883345, 1.6, 1.0, 1.2744034707158352, 1.9871794871794872, 1.048641616543894, 1.038134257800189, 1.2047201247920565, 1.032949315106248, 1.2648556876061121, 1.2073684210526316, 1.2355371900826446, 1.0842934295759696, 1.152744630071599, 1.8532695374800638, 1.3262174783188792, 2.7857142857142856, 4.594513501928847, 1.1778957083525612, 1.3888888888888888, 1.6666666666666667, 1.0349162011173185, 1.0826242722794448, 1.0010567101091934, 1.0755058894593779, 1.625, 1.3809099018733273, 1.2642748863062152, 1.2428571428571429, 1.2344202493573004, 1.75, 1.4331550802139037, 2.0, 1.0845410628019323, 2.8, 1.0776779498060538, 1.1081081081081081, 1.8774703557312253, 1.1090100111234704, 1.0, 1.5775917578879588, 1.0, 2.0, 4.0, 2.1451612903225805, 4.084507042253521, 1.3928069682495083, 1.177362893815636, 1.015625, 1.3430851063829787, 1.0678807947019868, 1.0469973890339426, 1.057915057915058, 1.5506329113924051, 3.7142857142857144, 1.0, 2.0121457489878543, 1.0164158686730507, 1.2426187419768935, 1.638153428377461, 1.0268466429213408, 1.2836059338151389, 1.0036663804872556, 1.216106910497626, 1.1036662452591657, 1.0947040498442369, 2.2, 2.0, 1.7142857142857142, 1.213810001934432, 1.2575452716297786, 1.128526645768025, 1.092378752886836, 1.1468019629044333, 1.1235701724060185, 1.0058148794889392, 1.1923076923076923, 1.4666666666666666, 1.059116809116809, 1.1564344293707365, 1.1211027335448749, 1.0788064940763493, 1.019736842105263, 1.1173569247631723, 1.0070064987814784, 1.163855421686747, 1.0943595150237218, 1.125, 1.2832689122032026, 3.020408163265306, 2.0, 1.054945054945055, 1.1308698999230178, 1.0, 1.1425061425061425, 1.040897563974487, 3.375, 1.0155709874172287, 1.4819466248037676, 1.2093023255813953, 1.0570335633879089, 1.060431510954252, 1.4130253430371371, 1.0540284360189573, 1.6812977099236641, 1.0708757421543682, 1.4678571428571427, 4.666666666666667, 1.0, 1.8333333333333333, 1.0139355968120882, 1.8333333333333333, 1.1373702245179769, 1.0082284358233595, 1.0310989703719269, 1.1092008312866048, 1.036211146814005, 1.1935525137520788, 1.2634920634920634, 1.0154929577464789, 1.1207010624910811, 1.273486928494688, 1.0418085827190584, 1.0085545387369976, 1.4285714285714286, 4.374325134973005, 1.0160642570281124, 1.0060279658085873, 1.527363184079602, 1.0810213108162445, 1.103515625, 1.401639344262295, 1.2111279206589343, 1.8126520681265206, 1.0045449897169607, 1.3125, 1.0190245707940666, 1.027477927183103, 1.2303588748787584, 1.0592718035563082, 2.0, 1.3674963396778916, 4.902439024390244, 1.0666666666666667, 1.2587920489296636, 1.1111111111111112, 1.3129186602870813, 1.2037037037037037, 1.508646998982706, 1.1467464761536976, 1.0966666666666667, 5.5, 1.1789473684210525, 1.0060438884691745, 1.0331099466162093, 1.0133244816788376, 1.1331937010317275, 1.039095897651137, 1.5, 1.1414414414414416, 1.6240482233502538, 1.182566918325326, 1.0371782650142993, 1.1640625, 1.251908396946565, 1.4057532172596519, 1.548993288590604, 1.0666666666666667, 1.0, 4.0, 1.026225665535244, 1.1158473191742166, 1.052633602460592, 1.2130170863309353, 1.0280592361652376, 1.1194029850746268, 1.0080483657661061, 1.104306439589426, 1.5192982456140351, 1.1027027027027028, 1.3251689189189189, 1.0112603876488357, 1.1685393258426966, 2.3333333333333335, 1.0245229466819874, 1.0763112498189336, 1.2605820105820107, 1.1204819277108433, 1.981348637015782, 1.0223675086676574, 1.3125461254612547, 1.4172185430463575, 1.2380952380952381, 1.1571737563085798, 4.381361533377396, 1.4138972809667674, 1.1162790697674418, 1.1312110088062426, 1.1349831271091113, 1.0499219968798752, 1.0731707317073171, 1.2126526852261714, 1.0566794240933115, 1.009412063976597, 1.0474716202270382, 1.3333333333333333, 1.3928571428571428, 2.0, 1.1067848882035467, 1.25, 1.3333333333333333, 1.5, 1.1005830903790088, 1.119140625, 1.2476855332402534, 1.224870769530869, 1.0054545454545454, 1.8888888888888888, 1.4166666666666667, 1.8823529411764706, 1.3703703703703705, 1.3725490196078431, 1.1030927835051547, 1.035053689870832, 1.0110861978618966, 1.3894736842105264, 1.0078024768936715, 1.0409212858005563, 2.5, 1.0382939788971803, 1.236180904522613, 3.0, 5.5, 1.1384615384615384, 1.1239954075774972, 1.1762390384669263, 1.4627329192546583, 2.0, 1.1538461538461537, 1.2546012269938651, 5.0, 1.086894368713943, 1.0022467673260327, 1.017725530245289, 1.20042745191166, 2.5, 1.0221494806946712, 1.1591746499631541, 2.2941176470588234, 2.608695652173913, 1.305352798053528, 1.0, 1.0256410256410255, 1.156236268909673, 1.2573400312134217, 1.0942928039702233, 1.0229885057471264, 1.2000663733130117, 1.0789685737308623, 2.326923076923077, 1.7826086956521738, 1.288993444702897, 1.2269346967232164, 1.2051843641074267, 1.24822695035461, 1.4366197183098592, 4.715931863727455, 1.6, 1.0067654639175259, 1.2950191570881227, 1.000506518613152, 1.327536231884058, 3.0, 1.0, 1.0745032610344305, 1.4397590361445782, 1.2693827160493827, 1.0358521453899638, 1.1289393120835585, 1.171631000578369, 1.1185344827586208, 1.2972972972972974, 1.0491109892692096, 1.012735200767276, 1.0973986690865094, 1.0170357751277683, 1.25, 1.5098039215686274, 1.0433872767857142, 1.091693369484841, 1.326346933708516, 1.0260686031629607, 1.4010315925209542, 2.0, 1.8059071729957805, 1.258434295071957, 1.1083153606518092, 1.5272727272727273, 1.013098162634576, 1.7348066298342542, 1.3476482617586911, 1.1221052631578947, 1.0182254179803527, 1.0040898924273085, 1.279395900755124, 1.044848484848485, 1.2962962962962963, 1.2077185017026106, 1.5838027702299688, 1.0128837756357394, 1.1895371688012468, 1.0852424080980287, 1.7281045751633988, 2.6666666666666665, 1.1146496815286624, 1.0, 1.0, 1.7647058823529411, 1.0024449877750612, 1.1216216216216217, 1.140360766629087, 1.0690852799333161, 1.0565573770491803, 1.0696517412935322, 1.7864077669902914, 1.0706907682375726, 1.0210024650780607, 2.6666666666666665, 1.3076923076923077, 1.1234991423670668, 1.0, 1.1553846153846155, 1.1454619124797407, 1.5200712426359775, 1.0323656804356827, 2.5, 1.1635446685878963, 1.1407563025210083, 1.4528985507246377, 1.032019504997706, 1.4042553191489362, 1.2485852869846403, 1.0908331365675572, 1.0907917131287048, 1.1589825119236883, 1.278688524590164, 1.013175230566535, 1.0, 1.0, 1.0340813753783038, 2.5, 3.5, 2.3157894736842106, 1.0150462962962963, 1.709090909090909, 1.0729225551158847, 1.2128760918796506, 6.0, 1.1331360946745561, 1.0078081427774679, 1.2242152466367713, 1.6704980842911878, 1.25, 1.2841170323928945, 1.0042260961436873, 1.3701657458563536, 1.3506431634111482, 1.0081965702207667, 1.4302742886439375, 1.0794850265883011, 1.0, 1.0495987158908506]
origin-bjaq_15.71 	max: 22.0000	99th: 4.9024	95th: 3.0000	median: 1.1538	mean: 1.4189

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 3/15 | Workload-time: 12.100659 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 4/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=valueskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
ValueSample - START
ValueSample - END
load_npy_dataset_from_path - df.shape = (422168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (402168, 5), new data size: (20000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 20.1374
detection mean = 24.8815
detection threshold = 0.3652
test statistic = 4.7441
Offline time = 3.6383895874023438
Online time = 0.08634090423583984
Test result: True
DDUp Drift detection: True
Detection latency: 4.2392s

DRIFT-DETECTED after 4-th workload
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/incremental_train.py', '--dataset=bjaq', '--end2end', '--model=transformer', '--model_update=update', '--update_size=20000', '--epochs=40']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
update_size: 20000
UpdateTask - START
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
load_npy_dataset_from_path - df.shape = (422168, 5)
Parsing... done, took 0.0s
done, took 0.0s
dataset size: 422168
train data shape: torch.Size([20000, 5]), transfer data shape:torch.Size([4000, 5])
Epoch 0 Iter 0, train entropy gap 0.2819 bits (loss 18.867, data 18.585) 0.00300 lr
epoch 9 train loss 12.2979 nats / 17.7421 bits
time since start: 4.4 secs
Epoch 10 Iter 0, train entropy gap -0.7989 bits (loss 17.786, data 18.585) 0.00245 lr
epoch 19 train loss 12.0281 nats / 17.3529 bits
time since start: 8.7 secs
Epoch 20 Iter 0, train entropy gap -1.1257 bits (loss 17.459, data 18.585) 0.00200 lr
epoch 29 train loss 11.8244 nats / 17.0590 bits
time since start: 12.9 secs
Epoch 30 Iter 0, train entropy gap -1.4643 bits (loss 17.120, data 18.585) 0.00164 lr
epoch 39 train loss 11.6612 nats / 16.8236 bits
time since start: 17.0 secs
Training done; evaluating likelihood on full data:
Epoch None Iter 0, test loss 20.4519 nats / 29.5058 bits
Saved to: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
UpdateTask - END

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 4/15 | Workload-time: 6.535861 | Model-update-time: 19.507509


WORKLOAD-START | Type: QueryWorkload | Progress: 5/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=valueskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 422168, total size: 422168, split index: [351806 422168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 7.3333	99th: 4.0000	95th: 2.6971	median: 1.1520	mean: 1.3804
ReportEsts: [1.4383561643835616, 1.0749177423437104, 1.0783181517319633, 1.9548872180451127, 1.7647058823529411, 1.0, 1.1202346041055717, 1.0102157422115603, 1.4, 1.196551724137931, 1.0470250521920668, 1.0151450156097328, 1.0177880897138438, 1.1103286384976525, 1.0113916256157636, 7.333333333333333, 1.0035971223021583, 2.0, 2.4, 1.3912655971479502, 1.1843412211510371, 1.0686372745490982, 1.2911658857880084, 1.0625, 1.0464846019755956, 1.0029896142206696, 2.0, 1.015738019891501, 3.0, 1.0, 1.158273381294964, 1.0, 1.0021407772018738, 1.03157935481017, 1.4966777408637875, 1.010867968864738, 1.0279514875876445, 1.9900497512437811, 3.0, 1.3146551724137931, 1.0065274151436032, 1.0252342357877795, 1.062640056612357, 1.0135466896194212, 1.106430155210643, 1.5918379722272755, 1.45, 2.1951219512195124, 1.7338129496402879, 1.1246943765281174, 1.043859649122807, 1.0177006893484546, 1.1292857142857142, 1.1888544891640866, 1.0082980012113871, 1.4122137404580153, 1.061526967267734, 1.218325902300908, 1.0287418655097613, 1.0347222222222223, 1.0022510855129931, 1.0625, 1.0400249167890812, 2.1159420289855073, 1.3333333333333333, 1.1855670103092784, 2.6218487394957983, 1.0745574102175013, 1.1455874086565487, 3.5, 1.0, 1.0606933813597479, 1.092568448500652, 1.1517045454545454, 1.199588477366255, 1.2021348314606741, 1.2142857142857142, 1.2, 1.6666666666666667, 1.091047619047619, 1.024401913875598, 1.0216845044206608, 1.6363636363636365, 1.63623395149786, 1.036649214659686, 1.1843687374749499, 1.2128325508607198, 1.0, 1.0125979614207883, 1.0004655444224604, 1.0089285714285714, 3.5, 1.24, 1.0275081610446137, 1.0028901734104045, 1.0364656381486677, 1.0639269406392695, 2.5838926174496644, 1.032258064516129, 1.6223021582733812, 1.0, 1.0433265720081135, 1.4116398031078081, 1.0878951426368544, 1.001823416506718, 1.25, 1.0215597604030306, 1.0572528265576138, 1.4211631569736918, 1.3161114887831407, 1.004208754208754, 2.0, 1.0, 1.0182351708237267, 1.0036119016337124, 1.1417188389299944, 1.2173913043478262, 1.0087799230282695, 1.0, 1.130448717948718, 1.1599312123817713, 2.0, 1.120879120879121, 1.1428571428571428, 1.0075757575757576, 1.009223900078185, 1.0280915146249638, 1.696969696969697, 2.25, 1.071600965406275, 1.0, 3.5, 1.0260992828951025, 2.6, 1.1638979277273507, 1.0473376716960634, 1.2426882086719548, 2.4964285714285714, 1.1428571428571428, 1.0317848410757946, 1.0323054331864905, 1.1586169045005488, 1.2504830672226177, 1.3278688524590163, 1.1296296296296295, 1.081245312982487, 1.0, 1.0383141762452108, 1.168, 1.1598173515981736, 1.107701329163409, 3.0, 1.0901818978742055, 1.5496296296296297, 1.1485355648535565, 1.396265560165975, 1.526530612244898, 1.0048447146658235, 1.1288588912061972, 1.0905724864710908, 1.0724760892667375, 1.2857142857142858, 1.0392638036809816, 1.0182291666666667, 1.5583892617449664, 1.2857142857142858, 1.0259979537684765, 2.6957186544342506, 1.3780918727915195, 1.148491186136839, 1.5714285714285714, 1.0254252706267626, 1.246719160104987, 1.2864864864864864, 1.1603974449964514, 1.1713985278654049, 1.1968992248062016, 1.2964652223489168, 1.1644654088050315, 1.3238959839975382, 1.010487144790257, 2.5789473684210527, 1.2182080924855492, 1.2059518523217458, 1.1626132027111693, 1.0343347639484979, 1.1764623955431754, 1.3667953667953667, 1.75, 1.0668298805336474, 1.0357725144367074, 1.65, 1.207171314741036, 1.0366863905325443, 1.1687202138788795, 1.0183298396139033, 1.2008547008547008, 1.188702223853456, 1.082179646174483, 1.0520462633451957, 1.6937033084311632, 1.089390142021721, 1.040952690688078, 1.0238777459407833, 1.0586988059368374, 2.058139534883721, 1.5454545454545454, 1.8666666666666667, 1.0, 3.388888888888889, 1.006725334478071, 1.136094674556213, 1.2183908045977012, 1.0949554896142433, 2.644110275689223, 1.0068915624517232, 1.936842105263158, 1.0177308024158758, 2.36, 1.456578947368421, 1.0949066751028156, 1.0531242302323671, 1.3831008243500318, 1.0, 1.2532433834976648, 1.0826950652257545, 1.0127892623543935, 1.2672084130019121, 1.1059913264825116, 1.0123936638310356, 1.0344827586206897, 1.0082948603494453, 1.0337083775807365, 1.023728813559322, 1.0297219558964525, 1.3070175438596492, 1.2222222222222223, 1.3065843621399178, 1.0, 1.1459518007040346, 1.0358762471026908, 1.2115876171542175, 1.5952380952380953, 1.0, 2.6666666666666665, 1.2540193635180734, 1.180327868852459, 1.012507999301879, 6.0, 1.0, 1.4893617021276595, 1.1129532073132942, 1.0709617180205415, 1.236842105263158, 1.0274261603375527, 2.8709484120498994, 1.0478927203065134, 1.198658901598645, 1.9, 1.0, 1.2867575076068263, 1.0938842299038658, 1.0773584905660378, 1.3194957797760247, 1.180558887023267, 1.0424510066315757, 1.0396767083027185, 1.1272532353166398, 1.0325607064017661, 1.009761663286004, 1.5489823093018833, 1.8333333333333333, 1.130825760354266, 1.341543513957307, 1.2391304347826086, 1.0416666666666667, 1.0327272727272727, 2.859792406446326, 1.0786377992401703, 1.0230821969985526, 1.9665871121718377, 1.8273092369477912, 1.0104708422407283, 1.0265832681782643, 1.1368463827964548, 1.0048088993607447, 3.3333333333333335, 1.0920788098110172, 1.4610951008645534, 1.008426154238585, 1.0007372982537923, 1.0266041655404623, 1.1950231481481481, 1.4250214224507283, 1.1296037702914994, 1.2547483745456407, 1.0549222399507872, 1.0908831339405534, 1.1, 1.0, 1.1, 1.0006546644844516, 2.536273115220484, 1.0287907869481765, 1.2742514308850323, 1.26007326007326, 1.34375, 3.607142857142857, 1.5850622406639003, 1.0975254730713246, 1.0060172531308305, 1.2727272727272727, 1.076019443694302, 1.0204070741677607, 1.66903073286052, 1.1692307692307693, 2.0224438902743143, 1.1544582260706764, 2.0, 1.0267945110865082, 1.1263940520446096, 1.4, 1.2705432420686658, 2.1, 1.0588235294117647, 1.0712487200883276, 2.0, 2.9856746765249538, 1.38989898989899, 1.1929824561403508, 1.088911774802609, 1.1462140992167102, 1.058139534883721, 1.025795546409936, 1.0246657497801728, 1.2602739726027397, 1.0424618431333113, 1.1108955314375797, 2.0, 1.4444444444444444, 1.1867812974614884, 1.0, 1.0325925925925925, 1.411764705882353, 3.066666666666667, 2.5, 1.1606425702811245, 1.0356564019448946, 1.208695652173913, 1.0694789081885856, 1.2916666666666667, 1.3333333333333333, 1.1964430718440915, 1.3070596298834818, 1.1914893617021276, 1.2850025250812172, 1.4556962025316456, 2.487640449438202, 1.3485868102288021, 1.0, 2.0, 1.037699680511182, 1.1136363636363635, 1.3695014662756597, 1.0155306004027715, 1.054375531011045, 2.3819444444444446, 1.5, 1.0099356066473413, 1.16335433834222, 1.4, 1.2427873945849979, 1.2304633736045267, 1.4, 1.1129803435452452, 1.486842105263158, 1.0232820300457819, 1.06102273297536, 1.1368696791093649, 1.1675938803894297, 1.0346389944460683, 2.9157358738501973, 1.1065693430656933, 1.132745871015949, 1.1653543307086613, 2.727272727272727, 1.0295012951659448, 1.057952364334322, 3.076923076923077, 2.0622893353107727, 1.273972602739726, 1.1902439024390243, 1.007877399026067, 2.1555555555555554, 2.2058823529411766, 1.3934426229508197, 1.6538461538461537, 2.1666666666666665, 3.1989795918367347, 1.20316301703163, 1.138432450233361, 1.2920212765957446, 1.0390106853352985, 1.4029850746268657, 1.6818181818181819, 1.4206349206349207, 1.0, 1.001069458516267, 1.0354370023840582, 1.0473253541768441, 1.018747214972309, 1.3631386861313868, 1.0042265426880812, 1.375, 1.164612676056338, 3.0, 1.4697986577181208, 3.6666666666666665, 1.0189704747878532, 5.2272727272727275, 1.271983132828972, 1.653179190751445, 1.0614911606456572, 3.0, 1.1874782608695653, 1.0123383355615903, 1.0820514955352496, 2.0, 1.1333333333333333, 1.447594501718213, 1.5330396475770924, 1.070756950551309, 1.579654510556622, 1.4, 1.1310181531176007, 1.150095422412171, 1.1636371533433232, 1.181592039800995, 1.0918232970190351, 1.2758620689655173, 1.5, 1.0497301464919044, 1.0185185185185186, 1.6785714285714286, 1.1310861423220975, 2.6450304259634887, 1.0796396470515641, 1.3888888888888888, 1.8297872340425532, 1.1445169598173783, 2.406779661016949, 1.6666666666666667, 2.5853658536585367, 1.2088815789473684, 1.2176436891350009, 1.0, 1.112611230438785, 1.0956433151555103, 1.007164237695667, 1.464090909090909, 1.1139896373056994, 1.0265596046942558, 1.1878845243729295, 1.1367365542388332, 1.6950819672131148, 1.3333333333333333, 1.050940496230696, 1.0388848129126926, 1.9333333333333333, 1.041887423105643, 1.0434782608695652, 1.0221187427240979, 1.6405228758169934, 1.0022667170381565, 1.1502046745015186, 1.0, 1.3962264150943395, 1.2607263793904788, 1.0167328829701818, 1.2800049787882875, 1.0, 1.0342250196695515, 1.0017687769322998, 1.4573863636363635, 1.0, 1.0544677821288715, 1.203524278995977, 1.5059632010640656, 1.0047463305679643, 1.0495746160843278, 1.388943731490622, 1.0627514078841513, 1.4088164251207729, 2.0, 1.0877979221837442, 1.8048780487804879, 1.6666666666666667, 2.7239357080799307, 1.5294117647058822, 1.032603531773068, 1.4254278728606358, 1.135479970727672, 1.114720394736842, 1.0254690870609304, 1.3351254480286738, 1.2893803945745992, 1.357371203737858, 1.373134328358209, 2.7419354838709675, 1.0581020590868397, 1.0541871921182266, 1.0481055182288799, 1.0166893022640684, 1.0, 1.7977067977067978, 1.3726415094339623, 1.3548387096774193, 1.4666666666666666, 1.0260120357207736, 1.3079470198675496, 1.0486423357664234, 1.326086956521739, 1.0293567688855647, 1.1163134549038936, 1.192822710230316, 1.2234645795064292, 1.2547892720306513, 1.0556426332288402, 1.215349129796603, 1.6313725490196078, 1.5789473684210527, 1.358974358974359, 1.2222804718217561, 1.0948660714285714, 1.4713178294573643, 1.0262976452170245, 1.661764705882353, 1.0933201320132013, 2.0, 1.2509855453350853, 1.2413793103448276, 1.069182389937107, 1.0563919367185506, 1.3132183908045978, 1.08994708994709, 2.8229228366808465, 1.0215454154111063, 1.0, 1.0930232558139534, 1.0833333333333333, 2.3333333333333335, 1.375, 1.1538461538461537, 1.180327868852459, 1.4476987447698744, 1.2334339514158401, 1.0156412930135559, 1.1051779690501762, 1.0041662933428903, 1.0063227762996023, 1.004957901839411, 1.0328748182229956, 1.017578125, 1.1256118323047457, 1.0169993602047345, 1.282243816254417, 1.0785413744740533, 1.075835475578406, 1.4324324324324325, 1.056545007896122, 1.071256038647343, 1.1020874793580895, 1.0051546391752577, 1.8463583200425306, 1.1157672595719024, 1.5, 1.46900826446281, 1.1111111111111112, 1.034375, 1.5925925925925926, 1.0, 1.0759154199609726, 1.0241045171865208, 1.0070355703439873, 1.1133131618759455, 1.5546218487394958, 1.330804248861912, 2.0, 1.2222222222222223, 1.1955922865013775, 1.0091140288965754, 1.0179639087504255, 1.1356315891598214, 1.033700713543935, 1.0483091787439613, 1.033653342642695, 1.622478386167147, 1.0023908597938773, 1.1937774771728102, 1.0061575760328632, 1.396551724137931, 2.8515625, 1.2345620561379778, 1.0, 1.0388958594730238, 1.1372549019607843, 1.1206457094307563, 1.4285714285714286, 1.1053039852613207, 1.4, 1.3888888888888888, 1.0026509816916578, 1.1455026455026456, 1.0392104879439017, 1.0000236879257904, 1.3894389438943895, 1.5384615384615385, 1.619047619047619, 1.1588447653429603, 1.1590909090909092, 1.0176140912730185, 1.0657493907392364, 1.001221673932832, 1.0, 1.0221267996968932, 1.3172690763052208, 2.0, 1.1474355581432276, 1.002782371521056, 1.1615384615384616, 1.025455443745315, 1.4354728126153684, 1.1150442477876106, 1.7142857142857142, 1.3552722260509993, 1.546134663341646, 1.0541522889348975, 1.1951000896325068, 1.2134305662136142, 1.0312201254567122, 1.318541996830428, 1.0435650149650815, 1.0735785953177257, 1.0707997171885442, 1.0357771260997068, 1.1425891181988743, 1.5416047548291234, 5.066666666666666, 2.943827708703375, 1.1992013154803853, 1.3888888888888888, 1.25, 1.153030303030303, 1.1505474452554745, 1.0535901926444833, 1.004331504475888, 1.0769230769230769, 1.4638655462184873, 1.0781571369806664, 1.5555555555555556, 1.2813851444001434, 2.0, 1.5141242937853108, 1.6666666666666667, 1.3333333333333333, 1.4545454545454546, 1.050293600504263, 1.0, 1.654275092936803, 1.028735632183908, 1.0, 1.5244006443665308, 1.1342729970326408, 1.5, 2.0, 1.6024096385542168, 2.871287128712871, 1.0032154340836013, 1.0308699719363892, 1.6161616161616161, 1.2770330652368187, 1.3323262839879153, 1.1283497884344147, 2.4391143911439115, 1.7625899280575539, 2.1666666666666665, 2.0, 1.8897338403041826, 1.0508474576271187, 1.10250569476082, 1.9078869341767148, 1.026908556381595, 1.1594095680969492, 1.0354136328964705, 1.2415959786365065, 1.247816593886463, 1.1077015643802648, 2.75, 2.0, 1.1875, 1.3085921982998332, 1.0190197512801755, 1.445414847161572, 1.140043763676149, 1.0924794448216038, 1.395917757567835, 1.020089178962767, 1.0833333333333333, 1.8333333333333333, 1.0103734439834025, 1.2709965462050374, 1.0403530195381883, 1.0187941232589202, 1.3333333333333333, 1.0392985860826172, 1.0118356540838385, 1.0947630922693268, 1.2087244616234125, 1.5, 1.0592348827642946, 3.0783095090118087, 1.0067748502148044, 4.0, 1.0830401125967628, 1.0, 1.1794258373205742, 1.085353883118215, 4.5, 1.0340029686846997, 1.2688172043010753, 1.1162790697674418, 1.0599323344610923, 1.1854531960293162, 1.2916792433846462, 1.1534701857282503, 1.4348534201954397, 1.05534704498824, 1.509433962264151, 2.8, 1.0, 1.5, 1.1079229874206933, 2.0, 1.0286658931364066, 1.0001218561123026, 1.2613045218087235, 1.0468299711815563, 1.006791516440571, 1.3205944798301485, 1.4469914040114613, 1.4109589041095891, 1.1161134686975303, 1.1899277766933438, 1.0013711606420665, 1.0496474893708627, 1.6666666666666667, 2.888787045523984, 1.2134387351778657, 1.0701418618316125, 1.3584070796460177, 1.2085971982345038, 1.1232604373757455, 2.0602409638554215, 1.329800668324526, 1.0496644295302013, 1.049335906459303, 1.5625, 1.0521242653232579, 1.040713153139865, 1.0827998292787024, 1.0663430420711975, 3.3333333333333335, 1.5263157894736843, 1.4695589488170915, 1.0931167308658516, 3.0, 1.0016865873740048, 2.242424242424242, 1.224447772369899, 1.1704180064308682, 1.3279352226720649, 1.6286286286286287, 1.0452586206896552, 1.462171052631579, 1.0044378698224852, 1.0718409579342283, 1.200501253132832, 1.1085333149969057, 1.0145831327442805, 1.1176470588235294, 1.4430523917995444, 1.4505525644658543, 1.2135446295543817, 1.0701754385964912, 1.0476190476190477, 1.2131147540983607, 1.5682295311406578, 1.1057108140947751, 1.7777777777777777, 1.0, 2.5, 1.0757188299133038, 1.157071887784921, 1.037487811044097, 1.2178132930928047, 1.1305565278263914, 1.0187409899086977, 1.057347478211173, 1.089910362920857, 1.9848993288590604, 1.6517857142857142, 1.1020012911555843, 1.030344749118216, 1.0, 2.3333333333333335, 1.013562052788703, 1.0107356318921867, 1.2196785192401365, 1.0, 1.827928524156188, 1.0035841389232438, 1.1500161655350791, 1.5670103092783505, 1.2380952380952381, 1.11003861003861, 2.840496977837475, 1.0029239766081872, 1.0238095238095237, 1.1973216154007114, 1.0745473908413206, 1.0273972602739727, 1.2926829268292683, 1.2339296149600676, 1.0903572667360388, 1.0239091615435996, 1.0360898235608627, 1.0, 1.1785714285714286, 2.0, 1.0344827586206897, 1.1111111111111112, 2.0, 1.0714285714285714, 1.1205298013245033, 1.0224137931034483, 1.2614776527820006, 1.2706503703104133, 1.4705882352941178, 1.3529411764705883, 1.8, 1.0909090909090908, 1.088235294117647, 2.5925925925925926, 1.1088082901554404, 1.0145629562553107, 1.0061558611656845, 2.6153846153846154, 1.0178418588258986, 1.0024141788847671, 2.5, 1.0031283199341252, 1.0854542188154979, 1.5, 4.666666666666667, 1.0277030661646047, 1.09613196814562, 1.1962303933440657, 1.8089887640449438, 2.0, 1.2164502164502164, 1.187116564417178, 4.0, 1.1101279661483527, 1.03619307099291, 1.0206627876109369, 1.0261111755831496, 2.5, 1.0162889755604474, 1.1127642913077525, 1.406926406926407, 1.4959349593495934, 1.2654387865655472, 1.0, 3.0384615384615383, 1.1913847745941402, 1.3585487313255868, 1.1534090909090908, 1.224669603524229, 1.2384371254827111, 1.1333333333333333, 1.4491017964071857, 1.289855072463768, 1.2528182836472752, 1.0644135657089024, 1.1996570243539295, 6.607142857142857, 1.3246753246753247, 2.7662767039674465, 1.6, 1.152296819787986, 1.0242424242424242, 1.014460446111595, 1.748091603053435, 3.0, 1.3853311439518337, 1.0189142168889682, 1.5931341385886841, 1.528694617900684, 1.0002834215089138, 1.1831950955643706, 1.104544984666276, 1.2459016393442623, 1.0666666666666667, 1.0663065880179092, 1.0261963235841334, 1.1725609756097561, 1.1973180076628354, 2.5, 1.161764705882353, 1.1373666699285645, 1.0015673981191222, 1.2507072480733588, 1.0006707865328899, 1.2199881726788881, 4.0, 1.6029962546816479, 1.3210040207447118, 1.3030178608088687, 1.0141843971631206, 1.0246169137745382, 1.7444444444444445, 1.025440313111546, 1.1295938104448742, 1.0000032844281974, 1.0851905177133818, 1.3661257606490873, 1.021889400921659, 1.2258064516129032, 1.3029054881442725, 1.4461228786172, 1.034903547615412, 1.1129800446132514, 1.1611082606464853, 1.4463894967177242, 2.25, 1.267515923566879, 2.5, 1.5, 1.8823529411764706, 1.0047058823529411, 1.1150159744408945, 1.0296076980014803, 1.057137673244047, 1.0549765502866075, 1.0447987851176916, 1.7523809523809524, 1.024627720504009, 1.0053903831088895, 1.125, 1.2857142857142858, 1.2182026988228538, 2.125, 1.0805755395683454, 1.067618332081142, 1.3678954506226113, 1.0088954781319497, 3.0, 1.01671826625387, 1.1591836734693877, 1.0577683988393565, 1.0030972477673659, 1.3515358361774743, 1.1060698957694666, 1.0714468019941807, 1.1632972397821868, 1.5416666666666667, 1.035294117647059, 1.054726368159204, 1.5, 1.0, 1.0013613324852015, 5.0, 1.0, 1.0526315789473684, 1.2951002227171493, 1.010752688172043, 1.1041551246537396, 1.0376398779247202, 6.0, 1.0329792435219343, 1.0147368421052632, 1.2914798206278026, 1.0043859649122806, 1.0, 1.1104294478527608, 1.0776164246369555, 2.870386036778129, 1.0504708513987462, 1.1111111111111112, 1.0062149979510995]
origin-bjaq_15.71 	max: 7.3333	99th: 4.0000	95th: 2.6971	median: 1.1520	mean: 1.3804

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 5/15 | Workload-time: 11.953037 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 6/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=valueskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
ValueSample - START
ValueSample - END
load_npy_dataset_from_path - df.shape = (442168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (422168, 5), new data size: (20000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 19.7588
detection mean = 24.8772
detection threshold = 0.4150
test statistic = 5.1184
Offline time = 3.6523635387420654
Online time = 0.08089327812194824
Test result: True
DDUp Drift detection: True
Detection latency: 4.2446s

DRIFT-DETECTED after 6-th workload
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/incremental_train.py', '--dataset=bjaq', '--end2end', '--model=transformer', '--model_update=update', '--update_size=20000', '--epochs=40']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
update_size: 20000
UpdateTask - START
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
load_npy_dataset_from_path - df.shape = (442168, 5)
Parsing... done, took 0.0s
done, took 0.0s
dataset size: 442168
train data shape: torch.Size([20000, 5]), transfer data shape:torch.Size([4000, 5])
Epoch 0 Iter 0, train entropy gap 0.4311 bits (loss 18.956, data 18.525) 0.00300 lr
epoch 9 train loss 12.2492 nats / 17.6719 bits
time since start: 4.7 secs
Epoch 10 Iter 0, train entropy gap -0.8495 bits (loss 17.676, data 18.525) 0.00245 lr
epoch 19 train loss 11.9612 nats / 17.2563 bits
time since start: 9.4 secs
Epoch 20 Iter 0, train entropy gap -1.2529 bits (loss 17.272, data 18.525) 0.00200 lr
epoch 29 train loss 11.7595 nats / 16.9653 bits
time since start: 14.0 secs
Epoch 30 Iter 0, train entropy gap -1.6764 bits (loss 16.849, data 18.525) 0.00164 lr
epoch 39 train loss 11.6201 nats / 16.7642 bits
time since start: 18.4 secs
Training done; evaluating likelihood on full data:
Epoch None Iter 0, test loss 20.2007 nats / 29.1434 bits
Saved to: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
UpdateTask - END

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 6/15 | Workload-time: 6.509237 | Model-update-time: 20.951818


WORKLOAD-START | Type: QueryWorkload | Progress: 7/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=valueskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 442168, total size: 442168, split index: [368473 442168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 6.6207	99th: 3.8586	95th: 2.4802	median: 1.1772	mean: 1.3689
ReportEsts: [1.0641891891891893, 1.0414134593742967, 1.0444999822331718, 1.0115384615384615, 2.142857142857143, 1.0, 1.1006557056175377, 1.0228851072590928, 1.0, 1.0859630032644179, 1.0650809464508095, 1.0164146064557285, 1.4330218068535825, 1.508097165991903, 1.2089255258669698, 3.0, 1.0734265734265733, 3.0, 2.0, 1.2649789029535865, 1.2666770817059834, 1.254356486511526, 1.0334928229665072, 1.5545171339563864, 1.0133406232914162, 1.0034769013575082, 2.0, 1.0110992936813112, 2.0, 1.25, 1.287037037037037, 1.0, 1.0018641069682444, 1.0410225639891997, 1.2619047619047619, 1.203641506098639, 1.054475069681016, 1.6885245901639345, 4.0, 1.1669329073482428, 1.3181818181818181, 1.0413854250085803, 1.0384986514596664, 1.0197502738771038, 1.0117416829745598, 1.2508219373898128, 1.5714285714285714, 1.3953488372093024, 1.0493827160493827, 1.0455172413793103, 1.4881889763779528, 1.0050533525444256, 1.0675675675675675, 1.046077210460772, 1.0625435754419061, 1.297029702970297, 1.0282624126723203, 1.338176943699732, 2.12472131147541, 1.2352941176470589, 1.0053503632212069, 1.5333333333333334, 1.0436098903537976, 1.4563591022443891, 1.009090909090909, 1.118811881188119, 1.1756373937677054, 1.026633413387524, 1.5271637317347322, 2.3333333333333335, 1.0, 1.0031769305962854, 1.3408, 1.0803253685815963, 1.183794466403162, 1.008293629786483, 1.0989247311827957, 1.0627914991384262, 1.2602739726027397, 1.0354609929078014, 1.0151271564894466, 1.2277277277277276, 1.1666666666666667, 1.0, 2.0970149253731343, 1.1129251700680272, 3.642857142857143, 1.038387715930902, 1.5, 2.4586466165413534, 1.0114026236125127, 1.0371823031063696, 1.1644687865574816, 1.0796320252982607, 1.227166597994781, 1.2166666666666666, 1.662004662004662, 1.2058823529411764, 1.2512820512820513, 1.8766519823788546, 1.5, 1.0917748917748917, 2.353448275862069, 1.2868421052631578, 1.0368098159509203, 1.0175438596491229, 1.0659218968830408, 1.1290322580645162, 1.035504220970364, 1.1814724259712035, 1.5557471264367817, 1.0214592274678111, 1.0580700256191289, 1.8333333333333333, 1.6221374045801527, 1.2480697384806974, 1.0023627506834312, 1.226214238190286, 1.2608695652173914, 1.006332499974279, 1.0, 1.1504342431761787, 1.1094771241830066, 1.0, 1.5555555555555556, 1.1428571428571428, 1.2747603833865815, 1.0145714591323747, 1.0021586616297895, 1.2444444444444445, 1.5, 1.4597701149425288, 1.0, 2.68, 1.2411785462244178, 1.1818181818181819, 1.0270763187429854, 1.0633383244505408, 1.1824959481361426, 1.7222222222222223, 1.2105263157894737, 1.0488997555012225, 1.1322357939458312, 1.0680044593088072, 1.2384549529133304, 1.9285714285714286, 1.2973977695167287, 1.0171789092287924, 2.0, 1.0402029664324746, 1.0516826923076923, 1.1587795765877957, 1.4541955350269438, 3.0, 1.0140006268937416, 1.171875, 1.0724907063197027, 1.9615384615384615, 1.368421052631579, 1.007080789878386, 1.1145771038017942, 1.0527090230700509, 1.008938759984785, 1.027027027027027, 1.170414201183432, 1.1812080536912752, 1.3307593307593308, 1.8571428571428572, 1.0201243707432632, 2.425521098118963, 1.1634146341463414, 1.1143788582922938, 1.1289808917197452, 1.0355293375962535, 1.507936507936508, 1.184873949579832, 1.0552282121185472, 1.235106866757617, 1.0503485670023238, 1.0620284995808884, 1.063063063063063, 1.2349648342184585, 1.030771105341594, 1.275, 2.32996632996633, 1.2609828258045894, 1.2713004484304933, 2.478723404255319, 1.3500760392024334, 1.1721854304635762, 1.4, 1.003338823843654, 1.0039152173428527, 2.4722222222222223, 1.0257925846319182, 1.0604851579955314, 1.2227377270203823, 1.07104275382221, 1.1881067961165048, 1.1976211813350133, 1.0432331713760084, 1.0208423795049935, 1.348169946661762, 1.0226086956521738, 1.0142226832152694, 1.1042330450614475, 1.1585053120039077, 1.2642857142857142, 1.0985915492957747, 1.2173913043478262, 1.0, 1.0483870967741935, 1.1954054423629155, 1.209366391184573, 3.3461538461538463, 1.1027753686036428, 1.6632478632478633, 1.0019472283259196, 1.111413043478261, 1.0049558106880316, 1.0526315789473684, 1.0806045340050379, 1.0554183813443072, 1.011560185766286, 1.3668066173705977, 1.4375, 1.1809290953545233, 1.0784096178048619, 1.067742356937549, 1.8196202531645569, 1.9803149606299213, 1.2788248337028825, 1.0041513499809862, 1.2285714285714286, 1.000712544896367, 1.0294020667301245, 1.591503267973856, 1.3157894736842106, 1.5750528541226216, 1.0909090909090908, 1.2487708947885938, 2.0, 1.4699548454324418, 1.06883478737496, 1.3453169347209082, 1.2276119402985075, 1.0909090909090908, 2.0, 1.0954610257003043, 1.641025641025641, 1.0422992235484994, 3.0, 1.0, 2.322834645669291, 1.276797829036635, 1.0491256550969632, 1.2991071428571428, 1.1232227488151658, 2.2913362809222786, 1.23818248442653, 1.224078286418349, 1.2105263157894737, 2.0, 1.2661052028689326, 1.071182328907048, 1.5686813186813187, 1.2019648734892836, 1.258035657230494, 1.00265564644399, 1.0304709141274238, 1.1303535230099055, 1.0030472320975115, 1.0402341803687096, 1.4878494427188014, 2.2, 1.2473479172909798, 1.59882005899705, 1.2553191489361701, 1.04, 1.2118644067796611, 2.21509454705365, 1.0029149966165218, 1.0517300707321735, 1.336283185840708, 1.3767705382436262, 1.0206214036814252, 1.4, 1.0719034468650916, 1.0011609818326994, 1.4285714285714286, 1.1721091048789858, 1.0865203761755486, 1.019422518921332, 1.0061197898932668, 1.042236777518714, 1.3318559556786704, 1.1550131926121372, 1.0041297935103244, 1.3398753553465996, 1.0397771750013654, 1.0231967396158999, 1.1861360718870346, 1.1428571428571428, 1.4545454545454546, 1.046549745943288, 2.262655205348615, 1.283062645011601, 1.3133746385790996, 1.0147492625368733, 1.0204081632653061, 3.0606060606060606, 1.1686046511627908, 1.2628676470588236, 1.0532574130061445, 1.09375, 1.105680317040951, 1.00188180367309, 1.6455142231947484, 2.3058823529411763, 1.2608695652173914, 1.070917225950783, 3.857142857142857, 1.0394515213813156, 1.0830721003134796, 1.5909090909090908, 1.3089294029155771, 2.625, 1.6666666666666667, 1.0736966978125182, 2.0, 2.57240099009901, 1.560090702947846, 1.109391124871001, 1.2032421969513671, 1.556910569105691, 1.2297297297297298, 1.0338709488777909, 1.0111771334187192, 2.4375, 1.0031414580060982, 1.0574732285258601, 3.0, 1.5, 1.230377753722006, 1.5, 1.1760660247592847, 1.1176470588235294, 2.65, 1.2272727272727273, 1.0090361445783131, 1.027972027972028, 1.3333333333333333, 1.5804953560371517, 1.5866666666666667, 4.0, 1.1744813694645433, 1.3816993464052287, 2.5454545454545454, 1.2674904462387175, 1.2130434782608697, 1.055103884372177, 1.1314655172413792, 1.75, 2.0, 1.0844155844155845, 1.9411764705882353, 1.0124610591900312, 1.027789257352202, 1.0944508522363194, 1.0362537764350452, 1.5, 1.0233064783802541, 1.530358785648574, 1.5555555555555556, 1.0859122401847574, 1.2746391017643914, 1.1666666666666667, 1.1086195995785038, 2.4791666666666665, 1.1495156925722667, 1.007144643033026, 1.0598837209302325, 1.1606694007143803, 1.0344538987306457, 2.2292704527842355, 1.167479674796748, 1.1695708850993642, 1.200354609929078, 1.2, 1.020310750074582, 1.0465130656994477, 1.3793103448275863, 1.9180910214168039, 1.123076923076923, 1.144, 1.060991421648877, 1.2272727272727273, 1.89, 1.118421052631579, 1.4747474747474747, 1.7333333333333334, 2.0273972602739727, 1.2796992481203007, 1.1475295353111052, 1.1052403637938502, 1.022880841879558, 1.6896551724137931, 1.7076923076923076, 1.2517482517482517, 1.0, 1.0150020039234713, 2.7916666666666665, 1.0257649268330855, 1.1000231672296843, 1.2770790084259371, 1.0610992529348986, 1.5714285714285714, 1.236828377673448, 1.2, 1.0647948164146868, 1.8333333333333333, 1.060774241798036, 1.377245508982036, 1.0908535965001527, 1.1263940520446096, 1.2927046263345197, 3.0, 1.0841536995871706, 1.012881177707676, 1.054658928287486, 2.0, 1.25, 1.4906275468622656, 1.5398230088495575, 1.0171555957611786, 1.088724584103512, 1.2380952380952381, 1.2543527630582891, 1.2497663278420377, 1.2848168041434875, 1.0257680872150645, 1.0142348754448398, 1.064516129032258, 1.2, 1.0760709010339735, 2.5369127516778525, 1.7586206896551724, 1.0401437986818454, 1.7307692307692308, 1.1818259824952806, 1.3888888888888888, 2.5964285714285715, 1.1468664770227865, 1.4689655172413794, 1.5, 2.037037037037037, 1.0839813374805598, 1.2860081474609768, 1.7894736842105263, 1.0785804816223068, 1.0148873428955882, 1.0131492129324158, 1.2244569589702332, 1.0174418604651163, 1.1137626675384114, 1.041033434650456, 1.11082910321489, 1.1867704280155642, 1.2222222222222223, 1.0292817449869043, 1.3613666228646517, 1.7222222222222223, 1.1071918550075819, 1.2254901960784315, 1.2442244224422443, 1.0103662750518314, 1.0758719884933476, 1.2446238479674216, 1.0, 2.0, 1.2306426725660427, 1.000622761949245, 1.0406504065040652, 2.5, 1.0478048780487805, 1.0009998983154256, 1.0108490566037736, 1.0, 1.0021916092673764, 1.2788079470198674, 1.3660017694844366, 1.0834876352713656, 1.0589842285846092, 1.3429844097995545, 1.0937007874015747, 1.1336713528462778, 1.2, 1.022928012447943, 2.2312569936590823, 1.0, 2.0581597222222223, 2.3636363636363638, 1.0536282323460828, 1.6446370530877572, 1.1306042455738572, 1.121235823230348, 1.000544207109677, 1.3846153846153846, 1.3394980184940555, 1.3609373343229774, 2.5, 2.3513513513513513, 1.0229166255679838, 1.29082774049217, 1.057325169857139, 1.0203024806985204, 1.5, 1.864910790144435, 1.4696969696969697, 1.4411764705882353, 1.7272727272727273, 1.0238464701850583, 1.1323076923076922, 1.1183823529411765, 1.0, 1.0, 1.0072236937153864, 1.0011469913534499, 1.058009362914716, 1.0030324699401452, 1.081832419733751, 1.2430555555555556, 1.035838725734196, 1.0209578043315908, 1.6777777777777778, 1.1952191235059761, 1.0003169572107766, 1.1813186813186813, 1.0252243376232248, 1.65, 1.0318115253700626, 2.0, 1.6548117154811715, 1.1775700934579438, 1.015073359541285, 3.591304347826087, 1.051783659378596, 1.2735042735042734, 2.207885563602868, 1.069263926458622, 1.0, 1.2702702702702702, 2.142857142857143, 1.3333333333333333, 3.3846153846153846, 1.2142857142857142, 2.0636942675159236, 1.2325581395348837, 1.1210171568627452, 1.146067415730337, 1.0268543661569245, 1.0339020607134943, 1.0124356917630137, 1.018308039738669, 1.0695693205491588, 1.0589874593590338, 1.072747648979194, 1.0095190654671147, 1.0320097244732578, 1.11611030478955, 1.1202046035805626, 1.1768292682926829, 1.0864973598189591, 2.5090909090909093, 1.0224257674886763, 1.8653846153846154, 1.0997466751108296, 1.1369942196531793, 1.5, 1.4023668639053255, 1.7142857142857142, 2.1176470588235294, 1.0243161094224924, 1.0495363853356998, 1.0770137524557957, 1.1514084507042253, 1.103896103896104, 1.3855524079320114, 1.1483810291549106, 1.178826895565093, 1.25, 1.2727272727272727, 1.3857295183934601, 1.608695652173913, 1.0877114870881568, 1.0749639596347909, 1.0, 1.5963442498095963, 1.139650872817955, 1.1242696955401532, 1.928082191780822, 1.0145854027951258, 1.1623449830890642, 1.000366024271476, 1.2424242424242424, 2.0806451612903225, 1.4159491117834149, 1.0, 1.20906432748538, 1.1897435897435897, 1.2536231884057971, 1.8571428571428572, 1.0150639449090015, 1.25, 1.6111111111111112, 1.001277533573098, 1.08515731874145, 1.0364989546689367, 1.0000090465808447, 1.3407643312101911, 1.2058823529411764, 1.0277777777777777, 1.0068027210884354, 1.0505050505050506, 1.0071222329162657, 1.1016442803039213, 1.0589246166692887, 1.0, 1.0747368956225531, 1.1247530770399636, 2.0, 1.1747445135483163, 1.0636358192868478, 1.069838056680162, 1.0320314415091494, 1.3985201931969993, 1.6923076923076923, 1.7142857142857142, 1.1788537549407114, 1.2144955925563172, 1.0248031841727883, 1.0751133786848073, 1.1817495676326106, 1.0475988460885797, 1.2106824925816024, 1.0085227272727273, 1.4816053511705685, 1.0472216410918782, 1.1726929303831624, 1.018370607028754, 1.1760628465804066, 4.1, 2.1252809830660873, 1.2125890736342042, 1.2222222222222223, 1.2, 1.0458488228004956, 1.2862389813907933, 1.0150207734100352, 1.0027374760470846, 1.5, 1.3034154090548054, 1.0332116788321168, 1.5285714285714285, 1.297756649930563, 1.2857142857142858, 2.6534653465346536, 3.0, 1.4532163742690059, 1.6363636363636365, 1.0539956116640696, 1.0, 1.2464788732394365, 1.303030303030303, 1.0, 1.5644033813807305, 1.3824593128390597, 2.0, 4.0, 1.9850746268656716, 2.5217391304347827, 1.1938438056474179, 1.3585131894484412, 1.0125, 1.01797603195739, 1.3455284552845528, 1.0833333333333333, 1.5759717314487633, 1.2564102564102564, 2.0, 1.0, 1.5222052067381318, 1.1706102117061021, 1.2804232804232805, 1.24702842377261, 1.0053430565515569, 1.0691227609736893, 1.0076473895377067, 1.300550044661746, 1.139121338912134, 1.0569550930996714, 2.2, 2.0, 1.2058823529411764, 1.2647815403516856, 1.158355795148248, 1.2285714285714286, 1.4011627906976745, 1.0871434714060484, 1.354289337802337, 1.0084629903450766, 1.1025641025641026, 3.142857142857143, 1.1981981981981982, 1.2801629051416936, 1.0302484027464807, 1.060079784990298, 1.0482758620689656, 1.0754944985053743, 1.0021862287227252, 1.0097297297297296, 1.0508474576271187, 3.0, 1.2447278077488966, 2.469974979149291, 1.0014668122297377, 2.0, 1.2809523809523808, 1.0, 1.2060185185185186, 1.0426636442504127, 1.0, 1.0111104154057007, 1.2256355932203389, 1.7916666666666667, 1.0570626546394613, 1.0373224800831313, 1.2821877375788202, 1.0455635491606714, 2.4677871148459385, 1.0322399158533304, 2.5688073394495414, 1.75, 1.0, 1.0, 1.0360424949488367, 2.3333333333333335, 1.0044485144939674, 1.083666821777571, 1.1862820022927016, 1.1309083835829605, 1.0155961705831158, 1.309289924221162, 2.0989583333333335, 1.5147058823529411, 1.123365302412054, 1.2681129271916791, 1.0079233439338198, 1.0942219723492883, 2.0, 2.3748975409836066, 1.4624277456647399, 1.0102326567064772, 1.284518828451883, 1.0773338607594938, 1.0782442748091603, 2.375, 1.2863895205698284, 1.2953020134228188, 1.0278497743724249, 2.6666666666666665, 1.0218080082865353, 1.0233345339212718, 1.2571853320118929, 1.0638067772170152, 1.1136363636363635, 1.1, 1.2898867360432358, 1.0999056135916427, 4.0, 1.0072865527671884, 1.5714285714285714, 1.150755033557047, 1.1253280839895012, 1.0152439024390243, 1.1940035273368608, 1.3768545994065282, 1.732943469785575, 1.387847446670976, 1.0380545758307036, 1.1886792452830188, 1.0191954777436942, 1.0025735919686916, 1.3571428571428572, 1.9314024390243902, 1.4028500959166894, 1.1078527855969549, 1.504739336492891, 1.337826453243471, 1.1928057553956835, 1.0962616822429907, 1.003787878787879, 1.0018390286005727, 2.0, 1.0520304568527918, 1.0610977492192268, 1.2717110920034393, 1.8960244648318043, 1.2369797859690845, 1.2205632846963013, 1.1743625086147484, 1.4423076923076923, 1.0252332304333738, 1.0039421470342522, 1.067632850241546, 1.121212121212121, 1.286410395235517, 1.0272459499263622, 2.0707070707070705, 1.75, 1.0013653034453833, 1.0658483569875974, 1.1365079365079365, 1.146067415730337, 1.9382456140350877, 1.0450703380425328, 1.1411613731151748, 1.0975056689342404, 1.04, 1.132177681473456, 2.293724916544766, 1.46045197740113, 1.6538461538461537, 1.2122574361279688, 1.4271570014144273, 1.3482142857142858, 1.3414634146341464, 1.7127882599580713, 1.0606060606060606, 1.0103092783505154, 1.1076923076923078, 1.1620734908136483, 1.2248520710059172, 1.3706240487062404, 1.3333333333333333, 1.0095942477828193, 2.474443654100193, 1.5191210648637228, 1.2363636363636363, 2.75, 1.0766246362754608, 1.1655897579965486, 1.305956490994551, 1.2304250559284116, 1.2941176470588236, 1.3846153846153846, 2.0, 1.1891891891891893, 1.4428571428571428, 1.25390625, 1.0005197019596852, 1.0180082843879044, 1.5217391304347827, 1.0231007523233515, 1.016115084272335, 1.6666666666666667, 1.0181930753678143, 1.0390968508615568, 3.0, 6.0, 1.019319938176198, 1.0162959291158065, 1.269668697926905, 1.2919254658385093, 2.0, 1.1015037593984962, 1.2635658914728682, 2.0, 1.1059177048605018, 1.033177723528488, 1.0010010211759648, 1.0587495713795863, 5.0, 1.006228951383092, 1.0846715328467154, 1.1890243902439024, 2.6984126984126986, 1.0988184747583243, 1.0, 1.6, 1.3602126716880816, 1.3079908675799086, 1.0316301703163018, 1.80625, 1.183909789644013, 1.2550091074681238, 1.4008264462809918, 1.1311475409836065, 1.3097095096901723, 1.171987131898045, 1.2713504832210982, 6.620689655172414, 1.3246753246753247, 2.2753153767473577, 1.6, 1.0087822014051522, 1.2611940298507462, 1.0003888343156515, 1.2314410480349345, 3.0, 1.2461176470588236, 1.034463350218643, 1.1954441913439635, 1.0436459602111245, 1.0071369808861395, 1.113872644574399, 1.0197788455209635, 1.251953125, 1.1041666666666667, 1.0424521904245219, 1.0261672699422861, 1.137033398821218, 1.0275650842266462, 2.5, 1.2592592592592593, 1.1641843310684492, 1.1604197901049476, 1.2813824258415287, 1.0164802458539828, 1.0310796074154853, 4.0, 1.5535390199637023, 1.3056731461483082, 1.0080740448995669, 1.0348432055749128, 1.0229865547428736, 1.353448275862069, 1.1908602150537635, 1.0548372715113687, 1.008782436381423, 1.0360494591613614, 1.2304015296367112, 1.0584343991179714, 1.0, 1.2547169811320755, 1.4950883151095806, 1.0536901574450095, 1.007068974478923, 1.020276953511375, 1.3476044852191642, 3.3333333333333335, 1.6020408163265305, 1.0, 2.5, 1.1333333333333333, 1.0960591133004927, 1.0954887218045113, 1.0346328979293382, 1.0791866900296663, 1.1922751621088243, 1.148101793909053, 2.5205479452054793, 1.0440180586907448, 1.0225960331408486, 2.0, 1.6, 1.2000650618087183, 2.625, 1.4526112185686655, 1.045137614678899, 1.262660748833504, 1.028350533545676, 2.3333333333333335, 1.8988830099941212, 1.6682121124311793, 1.1520965947434658, 1.01224306992303, 1.0702702702702702, 1.2936046511627908, 1.0153156757621828, 1.2101836176585492, 1.7232876712328766, 1.4021739130434783, 1.1566548881036514, 1.3333333333333333, 1.0, 1.0074395105219245, 5.0, 2.3333333333333335, 1.7027027027027026, 1.1103965702036442, 1.3055555555555556, 1.0435217608804401, 1.0115479115479116, 3.0, 1.0748697156564102, 1.2721804511278196, 1.39375, 1.0554323725055432, 1.6666666666666667]
origin-bjaq_15.71 	max: 6.6207	99th: 3.8586	95th: 2.4802	median: 1.1772	mean: 1.3689

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 7/15 | Workload-time: 11.940485 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 8/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=valueskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
ValueSample - START
ValueSample - END
load_npy_dataset_from_path - df.shape = (462168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (442168, 5), new data size: (20000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 20.0099
detection mean = 24.7981
detection threshold = 0.4318
test statistic = 4.7882
Offline time = 3.662628412246704
Online time = 0.0853731632232666
Test result: True
DDUp Drift detection: True
Detection latency: 4.2443s

DRIFT-DETECTED after 8-th workload
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/incremental_train.py', '--dataset=bjaq', '--end2end', '--model=transformer', '--model_update=update', '--update_size=20000', '--epochs=40']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
update_size: 20000
UpdateTask - START
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
load_npy_dataset_from_path - df.shape = (462168, 5)
Parsing... done, took 0.0s
done, took 0.0s
dataset size: 462168
train data shape: torch.Size([20000, 5]), transfer data shape:torch.Size([4000, 5])
Epoch 0 Iter 0, train entropy gap 0.3229 bits (loss 18.773, data 18.450) 0.00300 lr
epoch 9 train loss 12.1593 nats / 17.5422 bits
time since start: 4.4 secs
Epoch 10 Iter 0, train entropy gap -0.9945 bits (loss 17.456, data 18.450) 0.00245 lr
epoch 19 train loss 11.8737 nats / 17.1301 bits
time since start: 8.6 secs
Epoch 20 Iter 0, train entropy gap -1.2217 bits (loss 17.229, data 18.450) 0.00200 lr
epoch 29 train loss 11.6649 nats / 16.8289 bits
time since start: 12.9 secs
Epoch 30 Iter 0, train entropy gap -1.6817 bits (loss 16.769, data 18.450) 0.00164 lr
epoch 39 train loss 11.5196 nats / 16.6192 bits
time since start: 17.1 secs
Training done; evaluating likelihood on full data:
Epoch None Iter 0, test loss 20.0871 nats / 28.9795 bits
Saved to: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
UpdateTask - END

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 8/15 | Workload-time: 6.546097 | Model-update-time: 19.596176


WORKLOAD-START | Type: QueryWorkload | Progress: 9/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=valueskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 462168, total size: 462168, split index: [385140 462168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 13.4000	99th: 4.5007	95th: 2.8003	median: 1.1690	mean: 1.4262
ReportEsts: [1.276190476190476, 1.0213327468660656, 1.0755078338749484, 1.0, 1.5, 1.0, 1.0582854711763454, 1.0265895338178859, 1.25, 1.0815273477812177, 1.0302214813050727, 1.0005933466538466, 1.060027758501041, 1.057494866529774, 1.38865210442195, 3.4444444444444446, 1.1506849315068493, 4.0, 1.7142857142857142, 1.0192, 1.3515585930988498, 1.2555571698387331, 1.2314814814814814, 1.0460921843687374, 1.0213723284589427, 1.006079631137336, 2.0, 1.026030770860366, 3.0, 1.4, 1.0819672131147542, 1.0, 1.0030981151670806, 1.0249922166092538, 1.2300341296928328, 1.1619453924914676, 1.0200579643605268, 1.1108490566037736, 5.0, 1.0632411067193677, 1.7022280966767371, 1.0023672641190395, 1.119311193111931, 1.129012372858967, 1.3994778067885119, 1.3079069303970903, 1.2272727272727273, 1.1863949655379082, 2.0483271375464684, 1.6529284164859002, 4.0, 1.5628415300546448, 1.1011673151750974, 2.0714285714285716, 1.0090553956061021, 1.049122949818892, 1.1120827867657777, 2.1264367816091956, 1.0116279069767442, 1.005911637921809, 1.123076923076923, 1.0008502027733615, 1.2559139784946236, 1.6923076923076923, 1.05, 1.261802575107296, 1.088459614903726, 1.0915907873594002, 1.2077922077922079, 1.375, 1.179921037789058, 3.0583941605839415, 1.1074626865671642, 1.2243346007604563, 1.0600647724616874, 1.1596548004314995, 1.0163200538046848, 1.803921568627451, 1.0984848484848484, 1.020895977883295, 1.23418095801301, 1.7142857142857142, 1.0, 1.0113636363636365, 1.8103448275862069, 1.2745098039215685, 1.196808510638298, 4.0, 2.7374301675977653, 1.0075904649756533, 1.1465944970681101, 1.1987548393847443, 1.1299184505606523, 1.4362642661951455, 1.1441717791411044, 1.2987249544626593, 1.1474754812931347, 1.0801576872536136, 1.1481481481481481, 1.1315057608263805, 3.34375, 1.7484472049689441, 1.3523726443179773, 1.1450151057401812, 1.0420289855072464, 1.0148616178695382, 1.4, 1.0013929336989353, 1.0781101614434947, 1.4608742579600649, 1.0842072794571251, 1.0189473684210526, 1.0, 2.0541310541310542, 1.104775930990953, 1.0448174325332533, 1.2072636192861617, 1.25, 1.0060114527267812, 2.0, 1.3810991268618387, 1.4926070038910506, 1.0, 5.2, 1.1428571428571428, 1.316831683168317, 1.0090481995690777, 1.091862593270449, 1.108910891089109, 1.8, 1.1771844660194175, 1.0, 2.525252525252525, 1.1052110000825832, 1.0833333333333333, 1.1249036237471086, 1.083622545358696, 1.2047556142668427, 1.526813880126183, 1.1815602836879433, 1.0105772772720096, 2.107806691449814, 1.6388888888888888, 1.2, 1.238532110091743, 1.218850306390429, 3.0, 1.0561755952380953, 1.9751693002257336, 1.0688946015424166, 1.367519305019305, 3.0, 1.144765702891326, 2.860169491525424, 1.0166112956810631, 1.964124579584917, 1.0, 1.0316674913409203, 1.0553635658368008, 1.2544117647058823, 1.193645990922844, 1.367123287671233, 1.5185185185185186, 1.4057971014492754, 1.4267990074441688, 4.857142857142857, 1.0122921321357345, 2.280167491435097, 1.0463980463980465, 1.0039846965553438, 1.005992509363296, 1.028732925105982, 2.8106508875739644, 3.6615384615384614, 1.077213452299245, 1.071151358344114, 1.1594101123595506, 1.1164658634538152, 1.080558276199804, 1.0927215189873418, 1.0084430574555403, 1.01875, 1.303030303030303, 1.0898633137465512, 1.2254307498349042, 1.378698224852071, 1.2094743773482588, 1.893048128342246, 1.5263157894736843, 2.2777777777777777, 1.0352759650637713, 1.7179487179487178, 1.0560846560846562, 1.0755462575546257, 1.20323291965083, 1.0584060122471701, 1.086021505376344, 1.1814902964454261, 1.0642141059046946, 1.3418896777717095, 1.0947647448641484, 1.2637426900584796, 1.0039583997390717, 1.234156820622986, 1.400915534554046, 1.0056497175141244, 1.3703703703703705, 1.7142857142857142, 1.0, 2.25, 1.0454016298020954, 1.6597938144329898, 1.2428571428571429, 1.5934891485809684, 1.7898172323759791, 1.0004514441081414, 1.7523809523809524, 1.088326997821723, 1.4181818181818182, 1.0072551390568318, 1.1360313315926893, 1.0360417062511875, 1.2054215369311116, 1.0588235294117647, 1.177914110429448, 1.013288252869948, 1.0419730591527299, 1.4145569620253164, 1.27020202020202, 1.1680929095354524, 1.0714564369310793, 1.393939393939394, 1.0018615808155298, 1.2094925946918358, 1.8430232558139534, 1.1082164328657316, 1.2437395659432386, 1.1538461538461537, 1.7373461012311902, 2.0, 1.125531914893617, 1.0481808396124865, 1.2325917364923433, 2.7628865979381443, 1.0909090909090908, 2.3333333333333335, 1.205192878338279, 1.0746268656716418, 1.0095972901768913, 2.0, 1.0790870488322717, 1.00575263662512, 4.0, 1.0085700081280924, 1.1899791231732777, 1.0369198312236287, 1.9154515344337095, 1.2134639965913934, 1.3018092934180021, 1.3255813953488371, 2.0, 1.3081299172886827, 1.0405581947743467, 1.1208406304728546, 1.2569829466326825, 1.2799973993043139, 1.0094035793393035, 1.0096092248558617, 1.0950936446244057, 1.0801728276524243, 1.0278757939308398, 1.3472865651886168, 11.0, 1.2659367396593675, 1.3813333333333333, 1.1041666666666667, 1.24, 1.128787878787879, 1.9810587262200166, 1.0403407357318974, 1.0555779742470377, 1.22979797979798, 1.1315280464216635, 1.0016157652523912, 1.1706128133704736, 1.0625077775756937, 1.0039260290455885, 1.25, 1.022459499263623, 1.4267352185089974, 1.148997995991984, 1.0236164790542734, 1.0303736964078796, 1.4490445859872612, 1.216931216931217, 1.1151577125776764, 1.3154250751395449, 1.0838707446532616, 1.030816246853081, 1.8857142857142857, 1.2857142857142858, 1.8333333333333333, 1.0217992017193736, 2.185745140388769, 1.287280701754386, 1.233914711258953, 1.3444444444444446, 1.75, 2.8055555555555554, 1.049665711556829, 1.4760589318600368, 1.096629646026216, 1.15625, 1.118056347667389, 1.0043532033898859, 1.1714285714285715, 2.0, 4.571428571428571, 1.144812834224599, 2.2857142857142856, 1.0373974009246827, 1.1137724550898203, 1.173913043478261, 1.2873271686481726, 1.2352941176470589, 1.8333333333333333, 1.0866646811481422, 2.0, 2.1251451126073833, 1.2932330827067668, 1.047486033519553, 1.0845864661654134, 1.2598684210526316, 2.0681818181818183, 1.0269717411540273, 1.0230308424331633, 1.9166666666666667, 1.0156573828622577, 1.1007360446999408, 4.0, 1.1111111111111112, 1.3336889105621677, 2.0, 1.0026455026455026, 1.0, 2.4813084112149535, 1.45, 1.2901554404145077, 1.1662938105891125, 1.4368932038834952, 1.2683002481389578, 1.4871794871794872, 1.6, 1.1023477705149622, 1.3920099875156056, 2.5454545454545454, 1.3271677020567674, 1.008695652173913, 1.1906052393857272, 1.0027372262773722, 1.0, 1.25, 1.1414084507042253, 2.0307692307692307, 1.2451219512195122, 1.0306672814420057, 1.031095942358741, 1.0208333333333333, 1.5, 1.0119340696764958, 1.9565832426550598, 1.2692307692307692, 1.8717948717948718, 1.5188679245283019, 3.6666666666666665, 1.2356020942408377, 1.8656716417910448, 1.0615474138895729, 1.0327765310823462, 1.1523560209424084, 1.1042030995597902, 1.0144790257104195, 1.8652802138144158, 1.219155844155844, 1.057285779562781, 1.1170046801872076, 3.75, 1.0078716219376445, 1.031963736819579, 1.21285140562249, 1.0416666666666667, 1.0606060606060606, 1.346704871060172, 2.0, 1.2325581395348837, 10.384615384615385, 1.0068807339449541, 4.326086956521739, 1.9820882690103172, 1.2255451713395638, 1.005540166204986, 1.1490024663622378, 1.1520896165445929, 1.0459931442144188, 1.1666666666666667, 1.1808510638297873, 1.634703196347032, 1.0, 1.0067505615458225, 13.4, 1.0372774203202155, 1.1049630900682845, 1.441289966923925, 1.165879574970484, 1.0909090909090908, 1.1201942533387292, 1.2, 1.291005291005291, 1.2222222222222223, 1.0508240476323796, 1.1815068493150684, 1.213232104121475, 1.6326530612244898, 1.6065057712486883, 3.0, 1.2067868504772004, 1.0121349672381272, 1.0885327554085396, 2.0, 1.0588235294117647, 1.6566125290023201, 1.1120689655172413, 1.0355357600615227, 1.1315462208097278, 1.12, 1.0792151162790697, 1.23873078370632, 1.2373738540054962, 1.1052557400574006, 1.2438416631069344, 1.153952205882353, 1.736842105263158, 1.207340324118208, 1.301962072850169, 1.894736842105263, 1.1112162801703738, 1.0, 2.0, 1.2556862745098039, 1.170940170940171, 1.0060626473560121, 1.0197774493610363, 1.2126751980499695, 1.0, 1.7866666666666666, 1.375, 1.0410672427264789, 1.375, 1.0, 1.0577670657751517, 1.5, 1.0, 1.101865671641791, 3.0, 1.0242115323351386, 1.1478260869565218, 2.4596774193548385, 1.1111111111111112, 1.008769909932433, 1.1795023696682465, 1.2424242424242424, 1.0688355021688356, 1.0232558139534884, 1.35140771637122, 1.3140223831468072, 1.0516618497109826, 1.3008512544802868, 1.0, 1.4509803921568627, 1.2932452066414157, 1.1341669482933423, 1.0127340823970037, 1.2, 1.1158247829518548, 1.0171619032197123, 1.0663008687700046, 1.0, 1.1082307193778353, 1.2790389594749203, 1.1670503349939874, 1.0182755041518388, 1.056565945868538, 1.0913586438225524, 1.018543956043956, 1.0231733735967965, 2.0, 1.0546423410404624, 1.0917361637604246, 1.0152977171099082, 1.6513661202185792, 1.4, 1.0445640090124266, 1.6805825242718446, 1.1657944944126466, 1.0316114109483423, 1.0141684958219894, 1.1413301662707838, 1.3756783423778984, 1.3674811153595077, 3.7241379310344827, 1.2191780821917808, 1.0945137486553305, 1.5311827956989248, 1.0259860337234483, 1.0251898649743194, 1.0, 1.7095015576323989, 1.302405498281787, 1.2894736842105263, 2.4444444444444446, 1.1698036074130356, 1.1818181818181819, 1.0318509615384615, 1.0, 1.9, 1.102611085661933, 1.014650100308512, 1.1205864133801362, 1.0506657882400638, 1.0406474820143885, 1.0311890838206628, 1.175529411764706, 1.0082398751622452, 1.108695652173913, 1.18977722141599, 3.4444444444444446, 2.0, 1.1843575418994414, 1.1157894736842104, 1.0058962737154546, 1.0387192166250534, 1.2456987624509508, 1.0465472027972027, 1.030006123698714, 1.0596327065151105, 2.0, 1.0568990042674253, 1.2015096374174417, 1.1130634071810543, 1.0, 1.509933774834437, 1.0984351709935163, 1.1985688729874777, 1.0629290111155396, 1.286203941730934, 1.0857438016528926, 1.5555555555555556, 1.8233041575492341, 1.75, 1.2990492653414, 1.0236559139784946, 3.0, 1.002513607499244, 1.7, 1.48305606900801, 1.056445224830354, 1.3530377668308702, 1.206896551724138, 1.0496066433566433, 1.2197092084006462, 1.0573302909298345, 1.0405156537753222, 1.0277894295302012, 1.0146846222398258, 3.0, 1.2554257095158599, 1.1587301587301588, 2.345890410958904, 1.0, 1.7954545454545454, 1.3333333333333333, 1.5569620253164558, 1.0507042253521126, 1.0015043633840874, 1.0763732129420618, 2.893805309734513, 1.3766233766233766, 1.3326975476839238, 1.1330803225886994, 1.5786082474226804, 2.5, 1.6818181818181819, 1.2343675795472535, 1.6228070175438596, 1.0304093567251462, 1.1471801925722145, 1.0, 1.26409666283084, 1.20997920997921, 1.0349471394526815, 1.358792184724689, 1.0991538475812288, 1.1583096260866608, 2.028328611898017, 1.0, 1.5654478007419184, 1.1746268656716419, 2.5, 1.0314814006604693, 3.0, 1.6454209996645421, 1.2427286155498858, 1.2857142857142858, 1.0641795856167395, 1.4285714285714286, 1.9411764705882353, 1.0139281388776746, 1.0657815328907665, 1.046709519799808, 1.0000173101723229, 1.2835365853658536, 1.5555555555555556, 1.1176470588235294, 1.1031746031746033, 1.1576271186440679, 1.0786827055807533, 1.0670742396353756, 1.0418880401322541, 1.0, 1.0916113697137764, 1.1666899930020993, 2.0, 1.1688201940900664, 1.0275999369799051, 1.2449941107184923, 1.0277982048647498, 1.2441755931067058, 1.5108695652173914, 1.1428571428571428, 1.152488972904852, 1.2462311557788945, 1.032685500006996, 1.1413978494623656, 1.168987744707942, 1.0143703137132196, 1.1145510835913313, 1.0897184020956123, 1.1270903010033444, 1.0504566307936372, 1.3324175824175823, 1.021472392638037, 1.3448894202032278, 3.433333333333333, 1.8505890348889895, 1.314028314028314, 1.0, 1.4, 1.187793427230047, 1.164427383237364, 1.0374251497005988, 1.1448216587881392, 1.3333333333333333, 1.1754518072289157, 1.0112005600280014, 1.4141414141414141, 1.3141821722198184, 1.4285714285714286, 1.1730882747518112, 3.5, 1.0096339113680155, 2.5, 1.0457276561326478, 1.375, 1.1450381679389312, 1.0133928571428572, 1.0, 1.4400047427080864, 1.1144538914323088, 1.5, 4.0, 2.509433962264151, 1.380952380952381, 1.0095729013254786, 1.0258980785296574, 1.1484375, 1.0012247397428047, 1.7700534759358288, 1.3636363636363635, 1.4101694915254237, 1.144859813084112, 1.8571428571428572, 1.0, 1.8205128205128205, 1.0071513706793802, 1.265359477124183, 1.4311981020166074, 1.0159581258776968, 1.0877467685978324, 1.0222329054492783, 1.3590763940063866, 1.0020120724346075, 1.1032786885245902, 3.6666666666666665, 2.0, 1.4193548387096775, 1.2432539532777296, 1.1149825783972125, 1.5565217391304347, 1.415686274509804, 1.012000510660028, 1.2447752743501357, 1.004519486666885, 1.3, 1.4666666666666666, 1.0288808664259927, 1.1877509249783516, 1.0065911326273838, 1.0332008889487507, 1.2459016393442623, 1.1248802518133296, 1.2366918929035127, 1.0831983412168729, 1.017176997759522, 1.3107723752416367, 1.0532915360501567, 1.1192193466270683, 2.28871473354232, 1.0082276119951004, 2.38, 1.1136277840694602, 1.0, 1.294811320754717, 1.0143016243820286, 1.6363636363636365, 1.0334807155975785, 1.1359807460890494, 1.9545454545454546, 1.0043022637787469, 1.088465390758236, 1.3527102916607958, 1.1063022019741837, 1.3071216617210681, 1.0303112131236076, 1.0625, 2.8, 1.0, 1.1666666666666667, 1.0625777706418336, 1.6666666666666667, 1.0035751273284435, 1.0054081723493278, 1.0792118226600986, 1.114883464855937, 1.008906664397453, 1.215160197968221, 1.6888361045130642, 1.07451564828614, 1.1151792578097701, 1.342984830364449, 1.0084345279620368, 1.039760224599742, 2.5, 1.9204213439950792, 1.1145374449339207, 1.0718075952271684, 1.497560975609756, 1.1123833010392814, 1.2124463519313304, 2.1024590163934427, 1.2107958465266844, 1.9201030927835052, 1.0083763841283326, 4.0, 1.0269993347286226, 1.0344794336994072, 1.0063066614111156, 1.2457831325301205, 2.8541666666666665, 1.4285714285714286, 1.3224236836713787, 1.011714801996876, 2.5, 1.0015184181197896, 1.32, 1.0486836606769745, 1.114826498422713, 2.4569288389513106, 1.1408866995073892, 1.1153846153846154, 2.5994152046783627, 1.2296819787985867, 1.0829784436474137, 1.500709219858156, 1.1134158160375578, 1.030810000348687, 1.6153846153846154, 1.2397260273972603, 1.0053024351924587, 1.1141775457800063, 1.0317460317460319, 1.5848303393213572, 1.483005366726297, 1.0952768729641693, 1.160671462829736, 1.0071299172445267, 1.5, 1.0385722510074842, 1.0264794917002096, 1.0266949152542373, 1.762857142857143, 1.1946493449300892, 1.30181440911065, 1.3107307439104674, 1.267605633802817, 1.0588935934147516, 1.0020750518762969, 1.0077639751552796, 1.434108527131783, 1.3224181360201512, 1.0001305535470395, 1.0192307692307692, 3.5, 1.0202667531381466, 1.0460924733250023, 1.4360934182590233, 1.1690140845070423, 1.6030179918746372, 1.0160216145519627, 1.2415357766143107, 1.1422300263388938, 1.1818181818181819, 1.0035714285714286, 2.0084043093237067, 1.037940379403794, 1.3870967741935485, 1.216245664651177, 1.2581047381546135, 1.8902439024390243, 1.8636363636363635, 1.4595660749506902, 1.126034958601656, 1.619047619047619, 1.0606060606060606, 1.0682432432432432, 2.0495049504950495, 1.7152380952380952, 2.0833333333333335, 1.0030361351543282, 1.951381468478095, 1.3113259164690863, 1.3130434782608695, 2.3333333333333335, 1.1345163136805954, 1.2533120441893584, 1.2845044492175515, 1.4905149051490514, 1.4782608695652173, 1.2857142857142858, 1.206896551724138, 1.2542372881355932, 1.4583333333333333, 1.2130069419071976, 1.0005894216963054, 1.016066905058361, 2.234375, 1.0132473428128734, 1.0101953874660843, 2.5, 1.0052560263637733, 1.131587095176172, 3.0, 4.2, 1.1391549295774648, 1.0658576665402604, 1.2844489995716821, 2.7758620689655173, 2.0, 1.4212962962962963, 1.298804780876494, 1.5, 1.105774615184998, 1.006971022416621, 1.0294626122656758, 1.1245228515423502, 3.3333333333333335, 1.0141202810371113, 1.2081060015588465, 1.0749724366041897, 3.1705426356589146, 1.2156166814551908, 1.0, 1.5227272727272727, 1.1262610822378478, 1.2892183827574135, 1.2021857923497268, 1.7241379310344827, 1.1486357175373239, 1.0247349823321554, 1.537190082644628, 2.76, 1.2932322053675613, 1.0633795251906757, 1.2707596986552137, 5.351351351351352, 1.3421052631578947, 1.9800615463520965, 1.6, 1.0297001961333707, 1.7422680412371134, 1.0121019155044015, 3.169550173010381, 3.0, 1.085052479189287, 1.0632490297266175, 1.1817004747518343, 1.3705678485737136, 1.0242421367237535, 1.144686299615877, 1.01956940874036, 1.0822429906542057, 1.0666666666666667, 1.1212219483720327, 1.0210506627217928, 1.108372093023256, 1.3255360623781676, 1.6666666666666667, 1.1097560975609757, 1.1061196673369356, 1.0449775112443778, 1.2770429100760987, 1.0291218517823137, 1.25882946518668, 2.0, 1.4102141680395388, 1.249176895207395, 1.0159060783942435, 1.2679738562091503, 1.0240128148942922, 1.4470046082949308, 1.1527426160337553, 1.224287484510533, 1.0133999934019728, 1.0288763920233823, 1.16289592760181, 1.030623020063358, 1.1282051282051282, 1.3177212339563162, 1.4156975126592843, 1.0302369077306732, 1.1344594216678785, 1.0854922279792747, 1.0550678371907423, 5.5, 1.2764227642276422, 2.5, 4.5, 1.0625, 1.0367170626349893, 1.0325288562434418, 1.0863552550706823, 1.0649553287263873, 1.2030526028890707, 1.0545254268404627, 1.1428571428571428, 1.0721205597416577, 1.0288111130158766, 2.0, 1.5, 1.4367137355584083, 1.75, 1.3580470162748643, 1.1442720369758996, 1.3658746768435308, 1.0151428705673877, 1.75, 1.4260485651214128, 1.2826200417536535, 1.0943518866956314, 1.0092808480147402, 1.2073170731707317, 1.0160044150110374, 1.0356160657620357, 1.2651283098495678, 1.252988047808765, 1.7543859649122806, 1.0626398210290828, 1.3333333333333333, 1.25, 1.0056644976776667, 2.5, 1.1666666666666667, 1.1, 1.1486325802615933, 1.0011338224806294, 1.0390492359932089, 1.306930693069307, 1.0130118761762605, 1.5, 1.45, 6.0]
origin-bjaq_15.71 	max: 13.4000	99th: 4.5007	95th: 2.8003	median: 1.1690	mean: 1.4262

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 9/15 | Workload-time: 12.044492 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 10/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=valueskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
ValueSample - START
ValueSample - END
load_npy_dataset_from_path - df.shape = (482168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (462168, 5), new data size: (20000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 19.5403
detection mean = 24.7225
detection threshold = 0.4573
test statistic = 5.1821
Offline time = 3.654214859008789
Online time = 0.09091687202453613
Test result: True
DDUp Drift detection: True
Detection latency: 4.2563s

DRIFT-DETECTED after 10-th workload
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/incremental_train.py', '--dataset=bjaq', '--end2end', '--model=transformer', '--model_update=update', '--update_size=20000', '--epochs=40']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
update_size: 20000
UpdateTask - START
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
load_npy_dataset_from_path - df.shape = (482168, 5)
Parsing... done, took 0.0s
done, took 0.0s
dataset size: 482168
train data shape: torch.Size([20000, 5]), transfer data shape:torch.Size([4000, 5])
Epoch 0 Iter 0, train entropy gap 0.4214 bits (loss 18.789, data 18.367) 0.00300 lr
epoch 9 train loss 12.1535 nats / 17.5338 bits
time since start: 4.3 secs
Epoch 10 Iter 0, train entropy gap -0.8684 bits (loss 17.499, data 18.367) 0.00245 lr
epoch 19 train loss 11.8729 nats / 17.1290 bits
time since start: 8.5 secs
Epoch 20 Iter 0, train entropy gap -1.3139 bits (loss 17.054, data 18.367) 0.00200 lr
epoch 29 train loss 11.6613 nats / 16.8237 bits
time since start: 12.7 secs
Epoch 30 Iter 0, train entropy gap -1.5144 bits (loss 16.853, data 18.367) 0.00164 lr
epoch 39 train loss 11.5112 nats / 16.6071 bits
time since start: 16.9 secs
Training done; evaluating likelihood on full data:
Epoch None Iter 0, test loss 19.8008 nats / 28.5666 bits
Saved to: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
UpdateTask - END

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 10/15 | Workload-time: 6.526923 | Model-update-time: 19.378065


WORKLOAD-START | Type: QueryWorkload | Progress: 11/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=valueskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 482168, total size: 482168, split index: [401806 482168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 12.5000	99th: 5.0000	95th: 2.5597	median: 1.1637	mean: 1.3945
ReportEsts: [1.7897727272727273, 1.119058606368251, 1.070345840199434, 1.0346153846153847, 1.4285714285714286, 1.0, 1.0169280557630072, 1.0068757288916554, 1.0, 1.2738916256157635, 1.0159451191248725, 1.000764696401812, 1.01797603195739, 1.0708955223880596, 1.0987221247807566, 3.5, 1.429530201342282, 5.0, 1.5, 1.1019011406844106, 1.1214384508990318, 1.1142020249906877, 1.0378787878787878, 1.3615279672578444, 1.0153901984395362, 1.0003145299509812, 2.0, 1.0230832034439248, 2.0, 1.0, 1.0499505440158259, 1.0, 1.003151974272893, 1.0131257726514398, 1.3776758409785932, 1.2391264786169245, 1.1103683942327869, 1.4770642201834863, 1.5, 1.2805781391147244, 1.4530947775628626, 1.0042084817092911, 1.2005044136191678, 1.116760516727393, 1.0948616600790513, 1.3809774317428587, 1.0869565217391304, 1.0988538681948423, 1.1161971830985915, 1.2564909520062943, 1.5, 1.689265536723164, 1.2522935779816513, 1.3181818181818181, 1.0196929702695192, 1.0352964118564743, 1.0741185897435896, 1.8226600985221675, 1.1363636363636365, 1.0052574545844097, 1.1666666666666667, 1.045798045602606, 1.4072289156626505, 1.1518324607329844, 1.311926605504587, 1.4784853700516352, 1.0449913644214162, 1.2351515151515151, 1.1136363636363635, 5.5, 1.1775938892425206, 1.5961904761904762, 1.0378820490744727, 1.064102564102564, 1.008014698894415, 1.1955555555555555, 1.012701243374449, 1.688073394495413, 1.221476510067114, 1.0121579503206917, 1.1378043178686266, 1.2272727272727273, 1.0, 1.0883720930232559, 1.3148479427549196, 3.0, 1.313458262350937, 5.0, 1.7161572052401746, 1.0272764717548168, 1.0986159169550174, 1.2185845213849287, 1.0026224204695848, 1.314743967039435, 1.1260997067448681, 1.0469897209985315, 1.3277661795407099, 1.3453070683661645, 1.5294117647058822, 1.069359756097561, 1.9393939393939394, 1.5151515151515151, 1.2010354283746725, 1.2840531561461794, 1.6182902584493042, 1.0040632180687104, 1.3142857142857143, 1.0361263149578694, 1.0854133272269293, 1.2006209343583678, 1.1694263749260791, 1.1984107275887759, 1.8333333333333333, 1.7477064220183487, 1.0960802187784868, 1.0019641422298695, 1.2515527950310559, 1.0543478260869565, 1.004639487823107, 1.0, 1.1809032891507119, 1.3358098068350668, 2.0, 1.5964912280701755, 1.1428571428571428, 1.3859649122807018, 1.0025244671581113, 1.1121691813010142, 1.3660714285714286, 1.8, 1.1058514135437212, 1.0, 2.089430894308943, 1.1036187113857017, 1.4444444444444444, 1.1727343144848954, 1.0705521472392638, 1.0157669460378647, 1.1453488372093024, 1.180952380952381, 1.0044373135450877, 1.3186046511627907, 1.4390243902439024, 1.0, 1.7317073170731707, 1.0830304724629578, 3.0, 1.200085324232082, 2.457865168539326, 1.3321867321867322, 1.3916994106090372, 3.0, 1.0908996359854395, 1.400414937759336, 1.038269550748752, 1.7730829077998642, 1.0, 1.264356905552919, 1.0400179471840014, 1.4205739174993595, 1.3135838150289016, 1.5471204188481675, 1.625, 2.875, 1.1957142857142857, 6.0, 1.0026125087202267, 2.1034167175106773, 1.181456953642384, 1.0028834089773002, 1.1531468531468532, 1.0106994570424785, 1.6101694915254237, 2.5591397849462365, 1.0566440497064877, 1.3342458253490281, 1.1369863013698631, 1.328486646884273, 1.0154430981230695, 1.011967090501122, 1.101570375680459, 1.135135135135135, 1.0030290874260126, 1.4061433447098977, 1.0286352991271024, 1.4705882352941178, 1.1215767634854772, 1.2063492063492063, 1.0448422443967593, 1.1074342701722575, 1.094164393497422, 1.0416666666666667, 1.0131438721136767, 1.1026611410457212, 1.0, 1.2222222222222223, 1.0526013707417536, 1.7475942410321157, 1.1859410430839001, 1.3035714285714286, 1.2273938160375946, 1.1428632688066651, 1.0159756286839416, 1.068304872969596, 1.0173160173160174, 1.1889168765743072, 1.006726056312833, 1.0228790845999562, 1.1224489795918366, 1.389937106918239, 1.0720350404312669, 2.2313253012048193, 1.0116279069767442, 1.1117363344051447, 1.8703898840885143, 1.0038555675448062, 1.5269709543568464, 1.0024404895997596, 1.698183545055206, 1.2325581395348837, 1.1782149148561363, 1.0171599048063675, 1.2554284480897906, 1.2857142857142858, 1.4256505576208178, 1.051507349639254, 1.0036183128494962, 2.778481012658228, 1.6936026936026936, 1.176938369781312, 1.0040145454545455, 4.9, 1.0028822466015632, 1.0373524199673194, 1.5817307692307692, 1.1616871704745166, 1.3520871143375681, 1.2857142857142858, 1.1694290976058932, 1.0, 1.2871046228710463, 1.0357745528180897, 1.0252343186733959, 1.1417910447761195, 1.0909090909090908, 1.6666666666666667, 1.226192529974985, 1.1290322580645162, 1.083649453135816, 2.0, 1.0192850423330198, 1.0185185185185186, 2.0, 1.0255917171142204, 1.3625730994152048, 1.094688221709007, 1.7316334398061461, 1.0892725936811167, 1.1497340484721696, 1.7272727272727273, 2.0, 1.2099416586846459, 1.0373041108335226, 1.9895470383275262, 1.1791515689319432, 1.3544081730934607, 1.0076007193772398, 1.1608562691131499, 1.0187884760600514, 1.1411657559198543, 1.0260907695680772, 1.6631944444444444, 1.7560975609756098, 1.2854665279223032, 1.1094890510948905, 1.1020408163265305, 1.72, 1.049079754601227, 1.0130030959752323, 1.1010739102969047, 2.235294117647059, 1.0181399492204648, 1.190934065934066, 1.069767441860465, 1.018085894198439, 1.0565912117177096, 1.044490019879285, 1.0138966566906744, 3.3333333333333335, 1.018374558303887, 1.1809798270893372, 1.0682580427573027, 1.0283014017890804, 1.015770521151494, 1.033776105762489, 1.023317435082141, 1.0287899860917942, 1.262699639361154, 1.0707090657712819, 1.0369321503267124, 1.1601731601731602, 1.6666666666666667, 1.3636363636363635, 1.0643526340039933, 1.9649223691776883, 1.091710758377425, 1.2229150108257736, 1.406205318844724, 1.6578947368421053, 2.2954545454545454, 1.1102661596958174, 1.4706422018348624, 1.0874505196565747, 1.2727272727272727, 1.1139489194499017, 1.0058985499528554, 1.5171755725190839, 2.5, 2.3333333333333335, 1.0174358974358975, 2.142857142857143, 1.0420150586223036, 1.0628726287262873, 1.1875, 1.0170714380855126, 3.6041666666666665, 1.2, 1.0885246495672813, 2.0, 2.040729031058211, 1.5828488372093024, 1.134468085106383, 1.0243362831858407, 1.3298611111111112, 1.5274725274725274, 1.0011165387299372, 1.051266273099629, 1.489795918367347, 1.0332131136887936, 1.0014774058790565, 3.0, 1.2222222222222223, 1.1904133625321345, 1.5, 1.0448291167332446, 1.4166666666666667, 1.4022140221402215, 2.5833333333333335, 1.0120481927710843, 1.132197891321979, 1.1185185185185185, 1.1381142098273573, 1.4938271604938271, 8.0, 1.1349705365772544, 1.0636942675159236, 2.9473684210526314, 1.2421219826738263, 1.3372093023255813, 1.0522813688212929, 1.0488029465930018, 1.3333333333333333, 2.0, 1.0021321961620469, 1.736842105263158, 1.1643090315560392, 1.0184042845093038, 1.0130905628942044, 1.4057377049180328, 4.0, 1.0143563959389459, 1.7045633016316202, 4.714285714285714, 1.7234042553191489, 1.155844155844156, 2.4, 1.3266129032258065, 1.2571428571428571, 1.174739044629907, 1.033189500675508, 1.0587301587301587, 1.1286179343000888, 1.2243589743589745, 1.6491946308724832, 1.0063694267515924, 1.2073103751304444, 1.3512544802867383, 5.0, 1.003809967772155, 1.0431489515545915, 1.1807692307692308, 1.3888888888888888, 1.25, 1.339031339031339, 2.0, 1.375, 1.3013910355486862, 1.5458715596330275, 1.1853658536585365, 1.7433994030764521, 1.0609692548202188, 1.0817941952506596, 1.1201548618022772, 1.320434167059934, 1.0071773762846983, 1.1121495327102804, 1.2421147491739262, 1.1623376623376624, 1.0, 1.0016612310676942, 3.1904761904761907, 1.004049671188202, 1.111722692447495, 1.2444074250356973, 1.049267306720566, 1.0, 1.2765048543689321, 2.0, 1.1502242152466369, 2.2, 1.0102929532858274, 1.2020905923344947, 1.1240235316809721, 1.5135135135135136, 1.1593304401735895, 3.0, 1.1164159581425768, 1.0072584852630388, 1.0390067045620173, 2.0, 1.2162162162162162, 1.3951434878587197, 1.3275862068965518, 1.0933402570427107, 1.0312170706006323, 1.3076923076923077, 1.309872029250457, 1.2446041072779104, 1.2804263149090735, 1.0722923396539095, 1.2663356648425326, 1.2197802197802199, 2.3333333333333335, 1.1278101582014988, 1.1833191126279863, 1.5277777777777777, 1.6744803184431667, 6.0, 1.5, 1.5160523186682522, 1.0308370044052864, 1.144534115920763, 1.0207266586774157, 1.2822878228782288, 1.0, 1.4631578947368422, 1.0588235294117647, 1.0020376076089486, 1.4666666666666666, 1.0, 1.0331927026141903, 1.5, 1.0, 1.1810714285714285, 1.4680851063829787, 1.1887941534713764, 1.1910034602076125, 1.19140625, 1.0, 1.6411827643225367, 2.75, 1.0973451327433628, 1.5, 2.9107142857142856, 1.047244094488189, 1.016798418972332, 1.2250157133878063, 1.1076194681581788, 1.503968253968254, 1.0, 1.7209302325581395, 1.2590390979286676, 1.0230757996202717, 1.1498344370860927, 1.2, 1.0973222530009235, 1.0247337684644453, 1.037292817679558, 2.0, 1.1331685886875342, 1.2468851352342936, 1.3491602067183464, 1.0678127984718242, 1.0499380465411206, 1.093436574741509, 1.3521311475409836, 1.091344509066028, 1.5, 1.0523289246693501, 1.114179104477612, 1.1481729055258467, 1.1578544061302682, 1.202290076335878, 1.0572075348650547, 1.260755048287972, 1.1460020596798597, 1.4559666492965087, 1.0169799878714372, 1.0543735224586288, 1.2103302347451803, 1.4271561771561772, 1.7846153846153847, 1.82, 1.0053035445861418, 1.3664596273291925, 1.075287356321839, 1.0131991748258693, 1.5, 1.4152159896840748, 1.1456692913385826, 1.3902439024390243, 1.0909090909090908, 1.147271363284928, 1.0973684210526315, 1.070874861572536, 1.0, 2.1, 1.1868160500260552, 1.8431734317343174, 1.2985074626865671, 1.0, 1.3076923076923077, 2.2027027027027026, 1.3452380952380953, 1.2547368421052632, 1.0612244897959184, 1.0828313253012047, 1.1439688715953307, 1.3608748481166464, 1.1097560975609757, 1.0118804557636676, 1.1493212669683257, 1.1131874463251041, 2.0, 1.1013557133634604, 1.123015873015873, 1.0334594378760296, 1.4390243902439024, 3.0165016501650164, 1.1130136986301369, 1.723501149400242, 1.0095892222810068, 1.0, 1.0217391304347827, 1.1666666666666667, 1.5, 3.142857142857143, 2.28, 1.3144016227180528, 1.0301003344481605, 1.0500809767036252, 1.0391849529780564, 1.005354821269968, 1.0981515230408747, 1.0162650080739235, 1.061710508443881, 1.0506369931046395, 1.2888034598750602, 1.0792942354217068, 1.0036487863217576, 1.4930801416157065, 1.643162393162393, 1.1845386533665836, 2.1481481481481484, 1.033861929176106, 1.0097560975609756, 1.0248634981127926, 1.564516129032258, 1.180890853451207, 1.2425623157330474, 1.6456876456876457, 1.1041666666666667, 1.0, 1.33203125, 1.011613433244542, 1.1019304678614847, 1.1867535287730728, 1.037650849530856, 1.1428571428571428, 1.0949644225506294, 1.1168118341491506, 1.4625, 1.873015873015873, 1.0181732472430147, 1.0936195587358377, 1.0145818495333059, 1.1452991452991452, 1.1011181332036948, 1.0692325210658165, 1.0484280651588667, 1.032258064516129, 1.0335607260324036, 1.0724637681159421, 1.0761736128412287, 1.1624138810921154, 2.5698924731182795, 1.0, 1.313472654513117, 1.0933333333333333, 2.5, 1.0531579922207817, 1.5, 1.4451974071891573, 1.2223102728689543, 1.4285714285714286, 1.0019600156801254, 1.6666666666666667, 1.15625, 1.0436433510913714, 1.0246162757022879, 1.027277898875202, 1.0000228141929168, 1.4222972972972974, 1.4333333333333333, 1.25, 1.122689075630252, 1.0753701211305517, 1.0061706629055007, 1.1577392553082368, 1.0426470266366084, 1.0, 1.026353617632966, 1.1129430092171881, 2.0, 1.3096012583802936, 1.0060080798314974, 1.4599447513812154, 1.0273918386393008, 1.2710772104607722, 1.3767123287671232, 1.1666666666666667, 1.0317757009345794, 1.5736040609137056, 1.019192365941592, 1.4616822429906542, 1.1337651833823905, 1.0006107378824052, 1.276762402088773, 1.1365265558813946, 1.0346020761245676, 1.057993113824666, 1.0128205128205128, 1.6905339805825244, 1.1519041506204535, 2.9, 1.5821643286573146, 1.5436951920169337, 1.0, 1.0, 1.5172031076581576, 1.5455040871934604, 1.0165430690245294, 1.2116067903671535, 4.25, 1.1626074498567336, 1.087655222790358, 1.3333333333333333, 1.2548989225985725, 2.75, 1.1724934200725035, 1.6397379912663756, 1.3496376811594204, 1.8333333333333333, 1.0651704073150456, 1.0512820512820513, 1.3174603174603174, 1.2898305084745763, 1.0, 1.3095207990896447, 1.1368029739776953, 1.0, 2.0, 1.5465116279069768, 1.6111111111111112, 1.1943150046598323, 1.070458404074703, 1.225, 1.2587896253602306, 1.1949458483754514, 1.0588235294117647, 1.4234527687296417, 2.355769230769231, 2.1666666666666665, 1.0, 1.3183023872679045, 1.0627137970353477, 1.1700620017714791, 1.214817119742016, 1.0314453685116145, 1.0317396197016475, 1.0109089207480069, 1.2556281771968048, 1.0998062015503876, 1.5587044534412955, 1.764319248826291, 2.5, 1.7538288224053846, 1.2545580912665544, 1.1490972626674432, 1.5625, 1.1858736059479553, 1.0017536433452259, 1.2352513467957829, 1.002839839791536, 1.278688524590164, 2.2, 1.0285204991087344, 1.2479735318444996, 1.0321053094343888, 1.0041080788751144, 1.1515151515151516, 1.1691667803081958, 1.1645307778083034, 1.0390714481601575, 1.2265512265512266, 1.1995425249019696, 1.236842105263158, 1.1764705882352942, 1.84091480271425, 1.0104524405489224, 3.0396825396825395, 1.7075127644055434, 1.04850319824321, 1.0538125303545411, 1.1954733616472233, 1.125, 1.482905982905983, 1.0909090909090908, 1.2521957340025094, 1.1910108318089327, 1.0312747875354107, 1.1198533059315428, 1.030543511791965, 1.0468074281353346, 1.7535180160282704, 1.008579702627939, 1.5217391304347827, 1.75, 1.0, 1.25, 1.0483386123832388, 1.1666666666666667, 1.006072860642389, 1.0026081751325466, 1.0677744585511575, 1.0840694006309148, 1.0107558614677732, 1.1042726949934905, 1.978021978021978, 1.1937086092715232, 1.0928335446072603, 1.1821808510638299, 1.0031815402730917, 1.0435246624286576, 3.3333333333333335, 1.6870346440219064, 1.1183006535947713, 1.019358818004682, 1.6594594594594594, 1.0379479971890373, 1.1554192229038855, 3.2884615384615383, 1.2863653448599888, 1.0704022988505748, 1.044902441564343, 2.6666666666666665, 1.0100707726721618, 1.0126962595792424, 1.070915998311524, 1.140125288493241, 1.0769230769230769, 3.5454545454545454, 1.1720728213658627, 1.0428142520143378, 5.0, 1.004995109682828, 2.2, 1.0290077353961056, 1.268693009118541, 1.607843137254902, 1.1630267609966165, 1.3890086206896552, 1.9118279569892473, 1.0672344240251008, 1.0820090167706398, 1.2756632064590543, 1.0625673940949936, 1.0336711847591469, 1.3529411764705883, 1.366774541531823, 1.3169539490609725, 1.0917238043756579, 1.6195652173913044, 1.079345088161209, 1.8381374722838137, 1.1233411397345823, 1.173913043478261, 1.0174792926695164, 1.7333333333333334, 1.1012734990903579, 1.0458035133376709, 1.0439014288672603, 1.4866310160427807, 1.0462269840706708, 1.1770703214342264, 1.2008887526815815, 1.0562681009515928, 1.0152727272727273, 1.1013313609467457, 1.0598802395209581, 1.3028169014084507, 1.0143129770992367, 1.0271518853608406, 1.1272727272727272, 2.3333333333333335, 1.026034980416527, 1.0473135155096012, 1.1372, 1.053811659192825, 1.6420927467300832, 1.0347518782942284, 1.5194361384023922, 1.4341580207501996, 1.0833333333333333, 1.0684022460439, 1.6934107126727487, 1.4151436031331592, 1.5925925925925926, 1.1400846884674234, 1.278833967046895, 1.407079646017699, 1.3902439024390243, 1.797773654916512, 1.0231038281759741, 1.553479381443299, 1.2915451895043732, 1.0262514705748238, 1.0472061657032756, 1.8928571428571428, 4.0, 1.0336134453781514, 1.358974358974359, 4.0, 1.0, 1.0356652949245542, 1.0267716535433071, 1.2376102612178805, 1.2189975151421029, 1.0597302504816957, 1.1147540983606556, 1.0588235294117647, 1.7142857142857142, 1.1486486486486487, 2.0588235294117645, 1.4173841738417383, 1.1034852273307139, 1.0126359707942185, 1.124031007751938, 1.0436134040402403, 1.0085624923195238, 2.5, 1.0039178847269825, 1.1329203632736626, 3.0, 12.5, 1.028754752851711, 1.0815294585534914, 1.2558629973078073, 1.406832298136646, 1.0, 1.5631067961165048, 1.6717948717948719, 1.0, 1.1164452018810624, 1.0003408360971644, 1.0079015248988838, 1.0271820448877806, 3.3333333333333335, 1.0053365657074491, 1.062623599208965, 1.1732851985559567, 1.2692307692307692, 1.2637987012987013, 1.0, 1.1798561151079137, 1.1563814426517671, 1.1777295568752855, 1.0509259259259258, 1.7142857142857142, 1.1848822523691287, 1.260498687664042, 1.6689655172413793, 1.4375, 1.061944004802707, 1.2328439740525776, 1.5, 1.0637269833306457, 2.2247191011235956, 1.0566816816816818, 1.1143131604226706, 1.625, 1.1259060402684564, 1.5089285714285714, 1.0133681121617215, 1.7855750487329434, 3.0, 1.1970074812967582, 1.0409530303638042, 1.2228889841405914, 1.0311223497374051, 1.0475917704902382, 1.092386195783537, 1.1248894633018163, 1.2886836027713626, 1.1875, 1.0087840381478228, 1.0030315130672882, 1.7219827586206897, 1.0893682588597844, 2.5, 1.4067796610169492, 1.106772441475327, 1.0164609053497942, 1.231154813804759, 1.0412926391382407, 1.4405824330671677, 4.0, 1.1002570694087404, 1.2376851156759707, 1.1263608781010173, 1.0382165605095541, 1.0378325132439719, 1.6354166666666667, 1.0733652312599682, 1.2497114274721046, 1.0049868932373704, 1.008506075768406, 1.3121783876500857, 1.0952380952380953, 1.205128205128205, 1.362673186634067, 1.3493407613741875, 1.0757795895822577, 1.0158692108543486, 1.0503231763619576, 1.0076219512195121, 6.0, 1.2764227642276422, 2.5, 3.0, 1.1176470588235294, 1.114766355140187, 2.6666666666666665, 1.2195892575039495, 1.4516129032258065, 1.0, 1.2942675159235668, 1.3461538461538463, 1.5112359550561798, 1.043010752688172, 1.0662857502967156, 1.0, 1.3529411764705883, 1.1137350705754614, 2.625, 1.4116541353383458, 1.224159402241594, 1.4480553380318455, 1.0241849871643922, 2.3333333333333335, 1.25, 1.379482308240323, 1.0353767128802152, 1.0122852533356588, 1.005050505050505, 1.1633089133089134, 1.0223980993817265, 1.281881509069591, 1.4730679156908666, 1.5285714285714285, 1.164179104477612, 2.0, 1.52, 1.0094598902071896, 5.0, 1.4, 5.3076923076923075, 1.9880952380952381, 1.007752458845472, 1.4632]
origin-bjaq_15.71 	max: 12.5000	99th: 5.0000	95th: 2.5597	median: 1.1637	mean: 1.3945

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 11/15 | Workload-time: 12.095406 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 12/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=valueskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
ValueSample - START
ValueSample - END
load_npy_dataset_from_path - df.shape = (502168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (482168, 5), new data size: (20000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 19.6026
detection mean = 24.5677
detection threshold = 0.4781
test statistic = 4.9651
Offline time = 3.6135666370391846
Online time = 0.09073710441589355
Test result: True
DDUp Drift detection: True
Detection latency: 4.2141s

DRIFT-DETECTED after 12-th workload
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/incremental_train.py', '--dataset=bjaq', '--end2end', '--model=transformer', '--model_update=update', '--update_size=20000', '--epochs=40']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
update_size: 20000
UpdateTask - START
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
load_npy_dataset_from_path - df.shape = (502168, 5)
Parsing... done, took 0.0s
done, took 0.0s
dataset size: 502168
train data shape: torch.Size([20000, 5]), transfer data shape:torch.Size([4000, 5])
Epoch 0 Iter 0, train entropy gap 0.1373 bits (loss 18.418, data 18.280) 0.00300 lr
epoch 9 train loss 12.0137 nats / 17.3321 bits
time since start: 4.3 secs
Epoch 10 Iter 0, train entropy gap -0.9151 bits (loss 17.365, data 18.280) 0.00245 lr
epoch 19 train loss 11.7226 nats / 16.9121 bits
time since start: 8.5 secs
Epoch 20 Iter 0, train entropy gap -1.4370 bits (loss 16.843, data 18.280) 0.00200 lr
epoch 29 train loss 11.5225 nats / 16.6234 bits
time since start: 12.6 secs
Epoch 30 Iter 0, train entropy gap -1.6635 bits (loss 16.617, data 18.280) 0.00164 lr
epoch 39 train loss 11.3706 nats / 16.4043 bits
time since start: 16.7 secs
Training done; evaluating likelihood on full data:
Epoch None Iter 0, test loss 19.6273 nats / 28.3163 bits
Saved to: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
UpdateTask - END

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 12/15 | Workload-time: 6.509715 | Model-update-time: 19.230404


WORKLOAD-START | Type: QueryWorkload | Progress: 13/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=valueskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 502168, total size: 502168, split index: [418473 502168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 13.0000	99th: 6.3350	95th: 2.6576	median: 1.1687	mean: 1.4416
ReportEsts: [2.0063694267515926, 1.2442113595883633, 1.0686171838593783, 9.454545454545455, 1.0, 1.0, 1.0763352795955954, 1.0030305512326971, 1.4, 1.1076487252124645, 1.054895265611662, 1.000388294564205, 1.1183410797282802, 1.1333333333333333, 1.1140443505807813, 4.333333333333333, 1.7828947368421053, 3.6666666666666665, 2.4, 1.0021754894851342, 1.2989426465876321, 1.1608218656858393, 1.128, 1.0571142284569137, 1.0130339170773206, 1.000217548206123, 2.0, 1.0817380579181335, 2.0, 1.4, 1.3438808748255002, 1.0, 1.0159448901313013, 1.0256541143846531, 1.2085848423876593, 1.275332459262034, 1.0108282425736084, 1.1113861386138615, 7.0, 1.2406315058986814, 1.0640934844192635, 1.1784825870646767, 1.123370110330993, 1.1001484839012192, 1.3579952267303104, 1.2395995655664165, 1.4583333333333333, 1.089687328579265, 1.192, 1.1770334928229664, 1.25, 1.5072463768115942, 1.1747967479674797, 1.0689655172413792, 1.0113606282537722, 1.0312693020382953, 1.0754660252555623, 1.4015151515151516, 1.0714285714285714, 1.0042107497965393, 1.2238805970149254, 1.0016604400166045, 1.3773584905660377, 1.1111111111111112, 1.4955752212389382, 1.7985714285714285, 1.0097808658471406, 1.0609057782404998, 1.4507042253521127, 3.6666666666666665, 1.1476005188067444, 1.3581847649918963, 1.047104580812446, 1.0502793296089385, 1.1091730682331677, 1.1850594227504245, 1.0319196954235026, 1.2777777777777777, 1.0068926479179976, 1.0890162945081472, 1.0571188576228476, 1.0350556965140603, 3.5714285714285716, 1.4314344442813096, 1.173913043478261, 2.0, 1.3470225872689938, 1.0434782608695652, 1.0069818914410607, 1.041919519498174, 1.062992125984252, 2.3333333333333335, 1.0644320297951584, 1.0026332909941449, 1.2389937106918238, 1.8188775510204083, 1.000668449197861, 1.3502762430939226, 1.3877551020408163, 1.2218155197657394, 2.735294117647059, 1.7404255319148936, 1.2648544343141317, 1.171806167400881, 1.0154440154440154, 1.0416771770509263, 1.1666666666666667, 1.0125163349178994, 1.099666295884316, 1.3529738435053036, 1.2420454545454545, 1.057099545224861, 1.3333333333333333, 1.2326923076923078, 1.1772699197035208, 1.0007277510546553, 1.1990498812351544, 1.1839080459770115, 1.0033915252405146, 1.0, 1.1317027281279397, 1.2455642299503193, 1.0, 3.3703703703703702, 1.7142857142857142, 1.2255639097744362, 1.005476865988527, 1.1914938787063902, 1.75, 1.8, 1.1721666751905078, 1.1666666666666667, 1.1266846361185985, 1.2178283645451196, 1.0013999569244023, 1.3333333333333333, 1.0550802139037434, 1.1295438596491227, 1.4732142857142858, 1.0303030303030303, 1.1555555555555554, 1.1625248508946322, 1.1997822536744693, 1.2929004037685061, 1.2777777777777777, 1.1101021566401816, 1.0020787126829314, 1.0, 1.0447443181818181, 1.6079706335371646, 1.0475070555032926, 1.4742455775234131, 1.5, 1.0598780407842108, 1.7096296296296296, 1.0185758513931888, 1.6356437454279444, 8.0, 1.5373746581586143, 1.0485700144182144, 1.3568675435913122, 1.016597510373444, 1.3266666666666667, 1.0545454545454545, 4.6, 1.5345132743362833, 1.0914429530201342, 1.1428571428571428, 1.1417910447761195, 1.1123583436274773, 1.0598006644518272, 1.168141592920354, 1.0045867434121774, 1.2300469483568075, 1.071606758135843, 4.7926829268292686, 1.3288425443169969, 1.1118677042801557, 1.2558425584255843, 1.4782608695652173, 1.3122521606507371, 1.0809182371048878, 1.0575386919620569, 1.0641055992207897, 1.0127298444130128, 1.148502156428488, 1.6512455516014235, 1.0162782093969662, 1.0133333333333334, 1.0265195419351847, 1.127172653534183, 1.0618430299496104, 1.253968253968254, 1.023719491234101, 1.0024236723339104, 1.8991877687529861, 7.0, 1.1736531534983523, 2.0, 1.2281227915955668, 1.0335461381795394, 1.1898165481093224, 1.2438889656124845, 1.084417065936573, 1.0059461672295569, 1.0224398204814362, 1.040983606557377, 1.244593945218645, 1.0268360099366711, 1.011519624362517, 1.4545454545454546, 1.07698199923401, 1.1183579771791237, 1.506787330316742, 2.2298850574712645, 1.215754753589445, 1.3409893992932862, 1.0101269806303401, 4.972972972972973, 1.055325582232461, 1.5814225179200825, 1.460093896713615, 1.049336338592537, 1.0136730072959166, 1.1815227106524742, 1.4615384615384615, 1.1050656660412759, 1.0670683820484628, 1.0126498766565315, 1.483568075117371, 2.5927835051546393, 1.014117207054288, 1.0141411640932017, 1.0344827586206897, 1.0025572120203894, 1.0648363981697315, 1.310850439882698, 2.0, 1.1391437308868502, 1.2666666666666666, 1.252465483234714, 1.0, 1.2074179743223965, 1.0627560089651442, 1.2010135135135136, 1.4067164179104477, 1.7142857142857142, 2.3333333333333335, 1.4608961512769127, 1.1587301587301588, 1.012629904032619, 2.0, 1.0520833333333333, 1.7462235649546827, 2.0, 1.0285016638575566, 1.1097560975609757, 1.2248062015503876, 1.6434840951076717, 1.1952720207253886, 1.1559339479101405, 2.4782608695652173, 2.0, 1.1785960958231851, 1.0001577701814357, 1.6455331412103746, 1.2358107933555504, 1.4304813805631245, 1.0124752871693485, 1.1971913399648917, 1.0287086562602337, 1.2624297449200172, 1.055783228332008, 1.474646867077146, 1.9181818181818182, 1.3604992657856094, 1.203370786516854, 1.34, 2.12, 1.062111801242236, 1.1326666666666667, 1.0047766312501913, 1.830601092896175, 1.0283299197941072, 1.2721936903888482, 1.2178423236514522, 1.0279376964645215, 1.0216836734693877, 1.0582974860216696, 1.0088531366149391, 2.5, 1.051970108695652, 1.0083056478405317, 1.066949212155318, 1.0560004394842821, 1.0093217635839318, 1.0047553149002963, 1.190004948045522, 1.072929714683368, 1.1988358442574838, 1.1328023126109565, 1.0114675587216018, 1.6405842673834763, 1.5714285714285714, 1.1818181818181819, 1.015418808167801, 1.0397597254004576, 1.0828729281767955, 1.1530988000565379, 2.276995305164319, 1.9809014514896868, 1.0329290701947813, 1.6842105263157894, 1.309375, 1.2660550458715596, 1.4524886877828054, 1.012022174950042, 1.075091575091575, 1.5385996409335727, 3.0, 6.333333333333333, 1.0661486770264594, 2.0, 1.0480443172395935, 1.1012060828526482, 1.1111111111111112, 1.037194191056226, 1.1965317919075145, 2.3636363636363638, 1.018778763246522, 1.190536862222737, 1.1263202365863962, 1.729264475743349, 1.3113026819923372, 1.030278232405892, 1.0214840223867123, 1.563265306122449, 1.1758241758241759, 1.003553425336749, 1.0335502361739815, 1.7906976744186047, 1.0012183997100834, 1.129941593860115, 3.0, 1.2222222222222223, 1.206146637265711, 1.3333333333333333, 1.0401537804357113, 1.5294117647058822, 1.673780487804878, 3.3, 1.2575757575757576, 1.000687757909216, 2.2318840579710146, 1.3886138613861385, 1.05, 2.6666666666666665, 1.1428848137369316, 1.350947731188972, 4.0, 1.2102797103507028, 1.2434782608695651, 2.3014553014553014, 1.1420289855072463, 1.0, 2.0, 1.1563245823389021, 1.1, 1.1491769547325104, 1.0038398244651674, 1.047538582854568, 1.2703703703703704, 3.0, 1.0079103782813734, 1.626575362424419, 6.6, 2.9454545454545453, 1.1085271317829457, 6.5, 1.2903846153846155, 2.1384615384615384, 1.0127451743462017, 1.0466173172716267, 1.0778414517669532, 1.160782247204169, 1.0072803553800593, 1.7401513028859625, 1.0962241169305724, 1.2943618430737525, 1.927007299270073, 5.0, 1.0040794371409514, 1.0290911690075408, 1.2018433179723502, 1.4, 1.75, 1.266846361185984, 2.0, 1.14, 1.1924398625429553, 1.201834862385321, 2.6375, 1.6254827487153298, 1.0589914367269266, 1.2389937106918238, 1.1324440863072531, 1.139344262295082, 1.0579535576803676, 1.5089285714285714, 1.1577936333699232, 1.5169491525423728, 1.0, 1.0044960933781477, 1.2407407407407407, 1.002983736051465, 1.1238413628462574, 1.3123352992847284, 1.0002296738631145, 1.2727272727272727, 1.0676129996264476, 2.0, 1.1481481481481481, 2.75, 1.041237113402062, 1.2346938775510203, 1.0160414426477848, 1.941860465116279, 1.25, 1.1231884057971016, 1.4, 1.0, 1.1100751614538562, 1.000075234252103, 1.0022853883448997, 2.0, 1.1576663452266152, 1.0975609756097562, 1.7592592592592593, 1.2857142857142858, 1.0089755276628567, 1.096286107290234, 1.0964737916950307, 1.0555555555555556, 1.0078530547051776, 1.01888268611711, 1.2142038946162657, 1.4713467048710602, 1.233160621761658, 1.1805555555555556, 1.0063451776649746, 1.096774193548387, 1.1517857142857142, 1.0507544581618655, 1.047008547008547, 1.2060904337127039, 1.0100390996512734, 1.095959595959596, 1.0, 1.8, 1.4583333333333333, 1.0239156196508639, 2.2, 1.0, 1.0977772205405598, 1.5, 1.0, 1.0537712017322267, 2.054054054054054, 1.073285311619167, 1.0941644562334218, 1.501639344262295, 1.125, 1.5983708375137355, 1.0308166409861326, 1.0132141469102216, 1.0, 1.8974358974358974, 1.1376811594202898, 1.8352638352638353, 1.2872628726287263, 1.0038385310831215, 2.5090909090909093, 1.0408163265306123, 1.3194444444444444, 1.145312463111174, 1.0207247499647838, 1.210924369747899, 1.6666666666666667, 1.1394415917843388, 1.1310208778563209, 1.0867729831144466, 1.9284452296819787, 1.0183794977996377, 1.2888956310679611, 1.19498709915223, 1.0172884440400365, 1.0651648666200881, 1.0915182908276422, 1.3122257053291535, 1.0833579488391327, 1.0, 1.0795740149094781, 1.105638829407566, 1.2701525054466232, 1.6863839285714286, 1.0063492063492063, 1.0388446096121216, 1.2208, 1.1075452027047155, 1.1357783847054232, 1.014027354194965, 1.3962900505902192, 1.2551858659364568, 1.2505451537709602, 1.4588235294117646, 2.657142857142857, 1.0328204024534595, 1.4930139720558881, 1.020061862856147, 1.0130506770228334, 1.5, 1.25, 1.006872852233677, 1.0681818181818181, 3.3846153846153846, 1.130074544352106, 2.124087591240876, 1.2357473035439137, 1.0, 1.3529411764705883, 1.0136927685066324, 1.6673442544541432, 1.1794871794871795, 1.0, 1.0555555555555556, 1.2164179104477613, 1.2472406181015452, 2.1441558441558444, 1.4085872576177285, 1.052870090634441, 1.2172284644194757, 1.0141342756183747, 1.1895424836601307, 1.0266947646873026, 1.280323450134771, 1.103716250898265, 2.0, 1.504251700680272, 1.7027027027027026, 1.0367783533489836, 1.2929782082324455, 1.2268456375838925, 1.079744816586922, 1.633939206575801, 1.0233901831828485, 1.0, 1.1063829787234043, 1.2380952380952381, 1.5, 1.6598318476178413, 1.4285714285714286, 1.2806324110671936, 1.1770186335403727, 1.0926988265971316, 1.186656671664168, 1.0400461032909902, 1.060687820634619, 1.0109688502172844, 1.06816730383966, 1.0577086829978835, 1.0717504332755632, 1.0618528610354223, 1.008507159621318, 1.1266195524146054, 1.0390117035110533, 1.401418439716312, 1.584070796460177, 1.0316504782656868, 1.1123188405797102, 1.0075245076393182, 1.2356687898089171, 2.7563492063492063, 1.0292367399741267, 1.4, 1.1224489795918366, 1.0, 1.0662447257383967, 1.0170329736282995, 1.1113159171228606, 1.0998389694041868, 1.018471104608632, 3.35, 1.2899540380827315, 1.082846854479983, 1.1875, 5.7272727272727275, 1.01532713861481, 1.3225300575013068, 1.1416894714100534, 1.0344827586206897, 1.0017123287671232, 1.0671613271834999, 1.009796552046025, 1.28, 1.0197694936058965, 1.1692307692307693, 4.6, 1.5961538461538463, 1.140370972509607, 1.1500110791048084, 1.4232804232804233, 1.0649350649350648, 1.14820406365981, 1.0, 1.0766509433962264, 1.6377171215880892, 1.1192281185389386, 1.078826764436297, 2.0476190476190474, 1.1834988816214898, 1.0279329608938548, 1.5523809523809524, 1.1123026511766458, 1.2190476190476192, 1.1882732651963421, 1.2749353262431733, 1.2561284868977176, 1.1745736434108527, 5.8, 1.434937376400791, 1.1012912021814099, 1.3846153846153846, 1.372615039281706, 1.5786482334869432, 1.6144366197183098, 1.3161769951912787, 5.333333333333333, 1.0857142857142856, 1.3340788786997688, 1.4875, 3.3333333333333335, 1.0335381295280879, 1.3017241379310345, 2.0, 1.1218242399000415, 1.5196078431372548, 1.007098126454666, 1.0557992202729045, 1.1295175222495184, 1.0421199412428417, 1.0278481012658227, 1.1575603557814484, 1.2832618025751072, 1.0141766210783465, 1.0286686103012634, 1.0597938144329897, 1.1468041237113402, 2.3666666666666667, 1.7213301879613423, 1.215186860271364, 1.3333333333333333, 1.2, 1.04, 1.4033412887828163, 1.0231455660903515, 1.1765350877192982, 6.0, 1.3422131147540983, 1.0454692034827475, 2.7450980392156863, 1.2283045003690485, 6.0, 1.1527373527373528, 1.1431535269709543, 1.5829103214890017, 1.1938566552901024, 1.0028371890004364, 1.106987887661387, 1.826086956521739, 1.3666666666666667, 1.278705636743215, 1.0, 1.3911609123485582, 1.035206499661476, 1.75, 4.0, 1.9850746268656716, 1.4793103448275862, 1.1023343812330195, 1.876923076923077, 1.0588235294117647, 1.2404779686333085, 1.9414893617021276, 1.219626168224299, 1.0265914585012088, 1.01875, 1.0425531914893618, 2.1666666666666665, 1.0, 1.1193693693693694, 1.1520100502512562, 1.3270758122743682, 1.2445902082769813, 1.0174020540129327, 1.1208716469884108, 1.018273245633727, 1.2815713888631521, 1.314039408866995, 1.3762597984322509, 1.6536050156739812, 2.0, 1.6274785175311228, 1.2088547209276723, 1.0005455537370431, 1.4732824427480915, 1.2645502645502646, 1.0761636988441112, 1.2516325642141923, 1.006003613285774, 1.0128205128205128, 1.6923076923076923, 1.1926910299003322, 1.2712107169938496, 1.0378384065086268, 1.0369044175585234, 1.3217391304347825, 1.0553129548762736, 1.1595889692775505, 1.0157668062530736, 1.3551136363636365, 1.1790433155020987, 1.4837758112094395, 1.049226441631505, 1.6066400504307627, 1.0095066721016048, 1.506578947368421, 1.6427063599458729, 1.0000876861275065, 1.0104258556105294, 1.1436389195702379, 3.2222222222222223, 1.1330275229357798, 1.2964285714285715, 1.0019907069970846, 1.3394947982648087, 1.0065002173178152, 1.0887114788004137, 1.0054722212517826, 1.0599561296612234, 1.7527452319655334, 1.0148622127729168, 2.0216606498194944, 2.3333333333333335, 1.0, 1.7777777777777777, 1.0938662461588227, 1.5, 1.0911048047754184, 1.0274651581129937, 1.2012336160370085, 1.5803571428571428, 1.3438735177865613, 1.0263293558486628, 1.0435788499558323, 1.2105263157894737, 1.1567567567567567, 1.2178649237472767, 1.8522114347357066, 1.2058562062451383, 1.125, 1.1314292593372859, 1.3, 1.0694896851248643, 1.1608858057630735, 1.0126326796114145, 1.6176470588235294, 1.9285714285714286, 1.010286081645773, 1.2964889466840053, 1.0745646226729832, 1.1093182734973779, 1.0290310048094742, 1.0061490485777864, 1.0370516357903035, 1.0208794685226195, 2.3035714285714284, 1.1304347826086956, 1.254006309148265, 1.0506250529107994, 5.0, 1.000214692575886, 1.5714285714285714, 1.0962401795735128, 1.4414519906323184, 1.127147766323024, 1.1971627099015634, 1.1077586206896552, 1.338855421686747, 1.1495628163828808, 1.0551236749116608, 1.3516998827667057, 1.0528588026661774, 1.0125728265530025, 1.25, 1.199810606060606, 1.2050376647834276, 1.1151284490960989, 1.612970711297071, 1.2900081234768481, 1.579047619047619, 1.4745575221238938, 1.175054704595186, 1.056968881441423, 1.4736842105263157, 1.1278240190249702, 1.0463037694676112, 1.014936954413191, 1.9511278195488722, 1.0057317408017572, 1.1339425032882107, 1.0435102160811407, 1.2341463414634146, 1.0019073508098733, 1.0011291623458924, 2.0882778581765558, 1.6371681415929205, 1.0815839694656488, 1.0060263269953529, 1.0, 2.3333333333333335, 1.0073300333686523, 1.0272721341423632, 1.149394856278366, 1.0343347639484979, 1.8303512259774686, 1.0091904782003123, 1.3856641994546164, 1.128937728937729, 1.7333333333333334, 1.2134173795587573, 1.6237101754914514, 1.1242937853107344, 7.166666666666667, 1.131717415681877, 1.3364238410596025, 1.8170731707317074, 1.5365853658536586, 1.2774049217002237, 1.0313996806812133, 1.713406292749658, 1.9776785714285714, 1.0107599737499253, 1.2192567082795236, 1.037037037037037, 1.0, 1.2481060606060606, 1.5, 2.0, 3.0, 1.055944055944056, 8.2, 1.137214137214137, 1.239268789777061, 1.0014629272818099, 1.2083333333333333, 1.3846153846153846, 1.608695652173913, 1.9473684210526316, 1.2727272727272727, 1.0717264386989158, 1.2518939393939394, 1.038294467306813, 1.6896551724137931, 1.0397677748723695, 1.0037336012696527, 5.0, 1.0064512753272576, 1.0823167658030044, 1.5, 9.666666666666666, 1.041857273559012, 1.0198531865198532, 1.3158909261871181, 1.1298245614035087, 1.0, 1.5203619909502262, 1.5368098159509203, 1.6, 1.1164457529667995, 1.0324882995319813, 1.0121880805717687, 1.0529931305201177, 2.5, 1.0046963615795295, 1.069976076555024, 1.4705882352941178, 1.4516129032258065, 1.1047120418848169, 1.0, 1.4545454545454546, 1.1643489254108723, 1.255564213704768, 1.3490364025695931, 1.4043478260869566, 1.0758419105071675, 1.2437694704049844, 2.220183486238532, 1.2321428571428572, 1.075745567688153, 1.0848867221106968, 2.0, 1.0568911072629112, 1.3376623376623376, 1.0157706093189964, 1.143611404435058, 13.0, 1.2348387096774194, 3.1296296296296298, 1.0096506183377514, 1.3692077727952168, 3.0, 1.0497994652406417, 1.025758094585854, 1.2346089850249584, 1.3391508205261786, 1.0270921923633334, 1.046640529944572, 1.031854004974379, 1.4746192893401016, 1.2, 1.0002989715379096, 1.011532372961849, 2.170157068062827, 1.1568894952251023, 2.5, 1.3095238095238095, 1.1025971110935067, 1.0262123197903015, 1.155811985059444, 1.0037030792760029, 1.113896218117854, 4.0, 1.1742112482853224, 1.2837504954980463, 1.197431506849315, 1.0186335403726707, 1.0081792189931598, 1.2170542635658914, 1.1376936316695352, 1.2553114872164206, 1.0030383477569764, 1.0074468265977523, 1.3601626016260162, 1.12, 1.1363636363636365, 1.288419198590929, 1.2749258193338242, 1.0388699401505888, 1.0162781073251483, 1.1806656101426307, 1.739885130823229, 1.25, 1.1600985221674878, 2.5, 3.5, 1.1176470588235294, 1.2528694404591105, 1.6, 1.1042654028436019, 1.0222222222222221, 1.6875, 1.2628308042881558, 1.0384615384615385, 2.8617021276595747, 1.1144114411441144, 1.0770480819232768, 1.0, 1.2, 1.4544534412955465, 1.5, 1.7789613848202397, 1.0668630338733431, 1.3458272683163512, 1.003334283624825, 1.75, 1.000619578686493, 1.0092450142450142, 1.300528084493519, 1.2442244224422443, 1.1438442211055277, 1.3075615972812233, 1.3333333333333333, 1.6782608695652175, 1.284829721362229, 1.6097560975609757, 1.0795454545454546, 1.1606425702811245, 1.0464938986412082, 1.5622357914513856, 1.167066346922462]
origin-bjaq_15.71 	max: 13.0000	99th: 6.3350	95th: 2.6576	median: 1.1687	mean: 1.4416

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 13/15 | Workload-time: 12.054612 | Model-update-time: 0.000000


WORKLOAD-START | Type: DataUpdateWorkload | Progress: 14/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--model=transformer', '--data_update=valueskew', '--dataset=bjaq', '--drift_test=ddup', '--end2end', '--update_size=20000', '--query_seed=0', '--eval_type=drift']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
ValueSample - START
ValueSample - END
load_npy_dataset_from_path - df.shape = (522168, 5)
Parsing... done, took 0.0s
Data updated!
Previous data size: (502168, 5), new data size: (20000, 5)
done, took 0.0s
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
sample size: 500
done, took 0.0s
new data average log likelihood = 19.2871
detection mean = 24.4399
detection threshold = 0.4709
test statistic = 5.1528
Offline time = 3.6214468479156494
Online time = 0.09970903396606445
Test result: True
DDUp Drift detection: True
Detection latency: 4.2571s

DRIFT-DETECTED after 14-th workload
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/incremental_train.py', '--dataset=bjaq', '--end2end', '--model=transformer', '--model_update=update', '--update_size=20000', '--epochs=40']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
update_size: 20000
UpdateTask - START
GET-DATASET-PATH=./data/bjaq/end2end/bjaq.npy
load_npy_dataset_from_path - df.shape = (522168, 5)
Parsing... done, took 0.0s
done, took 0.0s
dataset size: 522168
train data shape: torch.Size([20000, 5]), transfer data shape:torch.Size([4000, 5])
Epoch 0 Iter 0, train entropy gap 0.3483 bits (loss 18.539, data 18.191) 0.00300 lr
epoch 9 train loss 11.9961 nats / 17.3067 bits
time since start: 4.6 secs
Epoch 10 Iter 0, train entropy gap -0.9540 bits (loss 17.237, data 18.191) 0.00245 lr
epoch 19 train loss 11.7064 nats / 16.8887 bits
time since start: 9.2 secs
Epoch 20 Iter 0, train entropy gap -1.4643 bits (loss 16.727, data 18.191) 0.00200 lr
epoch 29 train loss 11.5083 nats / 16.6030 bits
time since start: 13.8 secs
Epoch 30 Iter 0, train entropy gap -1.7220 bits (loss 16.469, data 18.191) 0.00164 lr
epoch 39 train loss 11.3451 nats / 16.3676 bits
time since start: 18.3 secs
Training done; evaluating likelihood on full data:
Epoch None Iter 0, test loss 19.4686 nats / 28.0872 bits
Saved to: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
UpdateTask - END

WORKLOAD-FINISHED | Type: DataUpdateWorkload | Progress: 14/15 | Workload-time: 6.555607 | Model-update-time: 20.875054


WORKLOAD-START | Type: QueryWorkload | Progress: 15/15
Going to run: ['python', '/home/kangping/code_copy/SAUCE/Naru/eval_model.py', '--dataset=bjaq', '--model=transformer', '--end2end', '--query_seed=0', '--eval_type=estimate', '--num_workload=15', '--data_update=valueskew', '--model_update=update', '--random_seed=42']
Torch device: cuda:1
GET-MODEL-PATH=./models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
ckpts [PosixPath('/home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt')]
Validate Argument: DATASET="bjaq" is valid.
data size: 522168, total size: 522168, split index: [435140 522168]
Parsing... done, took 0.0s
Loading ckpt: /home/kangping/code_copy/SAUCE/models/end2end/transformer/origin-bjaq-0.4MB-model34.249-data18.543-300epochs-seed0.pt
query_seed:0
origin-bjaq_15.71 	max: 8.2000	99th: 5.0000	95th: 2.5000	median: 1.1499	mean: 1.3893
ReportEsts: [1.8103448275862069, 1.0709935287400076, 1.0411353940751686, 1.2621359223300972, 1.1, 1.0, 1.0135379742061996, 1.0211138361125065, 1.0, 1.1214868540344516, 1.047074166000589, 1.0058637396779717, 1.111520737327189, 1.1884057971014492, 1.1468008255933952, 4.777777777777778, 1.5209003215434083, 4.0, 2.4, 1.4044616876818623, 1.2374847374847375, 1.1395751024972047, 1.0275862068965518, 2.526582278481013, 1.0551329269665632, 1.0013580158673432, 2.0, 1.0204892756801207, 6.0, 1.0, 1.4462483545414655, 1.0, 1.0073877663545323, 1.011201966905163, 1.6792168674698795, 1.2120457107860194, 1.2380952380952381, 1.2359550561797752, 1.5714285714285714, 1.5, 1.1174422095466827, 1.5849056603773586, 1.0579961464354528, 1.41991341991342, 1.54, 1.043618162316768, 1.0345638372913237, 3.375, 1.311926605504587, 1.1011673151750974, 1.0539488183486139, 1.1203703703703705, 1.1492694920937117, 1.1549100968188104, 1.0143670565566987, 2.0, 1.0218120805369129, 1.0384805362813125, 1.157387580299786, 1.028061224489796, 1.087837837837838, 1.0, 1.036, 1.0412262156448202, 1.0244070127191476, 1.0149683658248032, 1.6428571428571428, 1.5, 1.0188536190861301, 1.0257762486251727, 2.0, 2.0, 1.0845714285714285, 1.2230013184705741, 1.0266233766233765, 1.0171821305841924, 1.0968668332328193, 1.0316815597075548, 1.0221306080661086, 1.2105263157894737, 1.0093120860384288, 1.1256150506512301, 1.2201520912547528, 1.023837882223038, 6.5, 1.0139907159938106, 1.2, 1.0243299430321404, 1.1055825242718447, 1.2258064516129032, 1.5, 1.8765060240963856, 1.0031283908515705, 1.1268785742784946, 1.1893279545246171, 1.0004522738065624, 1.5522932592077832, 2.8055555555555554, 1.0113475177304965, 1.083574413371906, 1.0854430379746836, 2.1666666666666665, 1.1950017599436817, 1.25, 1.510166358595194, 1.3555447605829285, 1.2735703245749614, 1.152121212121212, 1.0144380045539225, 1.1714285714285715, 1.0242515889168078, 1.2900407687827606, 1.4053414859252422, 1.2799160251924422, 1.0575609756097561, 1.3333333333333333, 1.6105610561056105, 1.158745617452279, 1.018772881786939, 1.2281390134529149, 1.1224489795918366, 1.0099583110077235, 2.0, 1.0713801671560876, 1.2229775662814413, 1.0, 1.6868131868131868, 1.2857142857142858, 1.5708661417322836, 1.005100272600777, 1.0149159903989027, 1.2173913043478262, 1.2857142857142858, 1.1541589693145557, 1.9090909090909092, 1.1569620253164556, 1.3060819517223605, 1.045422630299757, 1.3333333333333333, 1.0038948393378773, 1.101388796154103, 1.3924050632911393, 3.473684210526316, 1.4857142857142858, 1.0363288718929253, 1.1459163346613546, 1.262889774454624, 2.417910447761194, 1.0079681274900398, 1.0175249080455666, 1.0, 1.0965665236051503, 1.5511402301033408, 1.4150943396226414, 1.1117165458870388, 1.5827505827505828, 1.0711167053455533, 1.6456692913385826, 1.046441815292248, 1.0546968210621206, 1.0505761843790014, 1.0197896659214711, 1.0089288277683672, 1.0534855769230769, 1.0864968386809035, 1.0724233983286908, 1.0008528380555293, 1.0867370353373107, 1.0298507462686568, 1.0796139927623642, 1.112202173262885, 1.7142857142857142, 1.168458781362007, 1.1913067345360182, 1.4443061605476042, 1.0253164556962024, 1.002973212168189, 1.1814159292035398, 1.0863965070268795, 1.5676691729323309, 1.2002335744424353, 1.1760889712696942, 1.2094691535150646, 1.088235294117647, 1.3281193722665294, 1.0118230152293413, 1.015853244253199, 1.03107982553488, 1.0105925190334326, 1.0163659666765257, 1.206896551724138, 1.4606863009997297, 1.7763157894736843, 1.0455035773252614, 1.0847953216374269, 1.0634313502445683, 1.0602409638554218, 1.1584030907920155, 1.002532917339513, 1.7392405063291139, 2.75, 1.3116649537512848, 2.0, 1.2084598293787419, 1.0377844488918537, 1.113030957523398, 1.3268715725035072, 1.2403381642512077, 1.0124196162840136, 1.046689628779181, 1.1507936507936507, 1.045538178472861, 1.0233410809572134, 1.0178495745443876, 1.4615384615384615, 1.3012692050768202, 1.060348543629534, 1.2814498933901919, 2.0689655172413794, 1.2454102660172348, 1.2045454545454546, 1.0046095641646489, 1.1757188498402555, 1.0011074197120708, 1.5815189701436771, 1.1557632398753894, 1.0787726127776505, 1.0350705222458203, 1.3075458973398277, 1.8181818181818181, 1.0125391849529781, 1.0611272642887368, 1.0179294389820706, 1.022653721682848, 1.6710963455149501, 1.0098699315633108, 1.051297879564184, 1.103448275862069, 1.001896667430517, 1.0072046994289456, 1.3409090909090908, 7.2592592592592595, 1.036241610738255, 1.1428571428571428, 1.5875, 2.0, 1.427318718381113, 1.0207322452580503, 1.2272727272727273, 2.4363636363636365, 1.4761904761904763, 1.0, 1.2041209605692262, 1.0263157894736843, 1.032559897925429, 2.0, 1.038513210927004, 1.270440251572327, 4.0, 1.0031555388742928, 1.3875432525951557, 1.5265700483091786, 1.0152299725860494, 1.5835543766578248, 1.3466009800854968, 2.1923076923076925, 1.0, 1.2455149629288156, 1.168503129919098, 3.120218579234973, 1.2258039718129403, 1.3135174806511876, 1.0473937642951727, 1.138375350140056, 1.0886685878962536, 1.2041992589543022, 1.063085350768687, 1.3667338032896945, 1.774468085106383, 1.2254233876764715, 1.232533889468196, 1.8431372549019607, 1.6, 1.0595238095238095, 1.149914821124361, 1.0295759267123703, 1.3037383177570094, 1.0132060817171908, 1.4732370433305013, 1.3269230769230769, 1.0242300003819758, 1.0708196721311476, 1.0491075371558418, 1.0263835614306722, 2.5, 1.0919786096256685, 1.0195333695062399, 1.1057864386557963, 1.0065251033622569, 1.0504726389732026, 1.00365374183512, 1.011837121212121, 1.0162189559047137, 1.2041367790114965, 1.004688274805031, 1.0090074302537502, 1.5655651386846068, 1.7142857142857142, 1.8333333333333333, 1.043251205141939, 1.0452538631346577, 1.1823204419889504, 1.1806131650135256, 1.6285714285714286, 1.4429439567859554, 1.1153435386258455, 2.0, 1.2028639618138426, 1.0579964850615113, 1.2943548387096775, 1.0186403166983573, 1.1368937998772253, 1.1617357001972386, 1.4, 8.2, 1.0055280213495996, 2.7142857142857144, 1.0364566197546397, 1.051321138211382, 1.1666666666666667, 1.0363791996576075, 1.4797687861271676, 1.4, 1.0574592248989974, 1.243204015602794, 1.3347826086956522, 1.2933683027351068, 1.0888888888888888, 1.134288272157565, 1.141789777551367, 2.2797619047619047, 1.2747252747252746, 1.0280066735844067, 1.014018327509844, 1.2487046632124352, 1.0101542229443004, 1.0426910528008824, 2.0, 1.1111111111111112, 1.2967166478990102, 2.0, 1.3292811839323466, 1.1333333333333333, 1.7202072538860103, 4.375, 1.9644970414201184, 1.2205169628432957, 1.2170542635658914, 1.358461138549519, 1.0114942528735633, 4.0, 1.1416441510870945, 1.120375483158476, 3.2941176470588234, 1.2777407193662262, 1.1434782608695653, 1.062330623306233, 1.0190871369294605, 1.0, 1.3333333333333333, 1.2285539215686274, 1.7142857142857142, 1.1608391608391608, 1.0105220973363902, 1.038844405972733, 2.7661290322580645, 2.5, 1.002112148259181, 1.5945556946182728, 2.2, 1.859375, 1.6130500758725341, 7.0, 1.3837638376383763, 1.651685393258427, 1.0602268438511808, 1.0100587502225387, 1.0087678818643286, 1.0554900251294939, 1.0777293604993523, 1.4316529442919737, 1.0082352941176471, 1.2964994544221298, 1.2699175824175823, 3.3333333333333335, 1.0229765682862948, 1.0299974184665692, 1.0842105263157895, 1.9886363636363635, 1.3461538461538463, 1.6095890410958904, 2.0, 1.2040816326530612, 1.3261163734776726, 1.0894495412844036, 2.110599078341014, 1.5592222374366698, 1.0304287690179805, 1.2493887530562346, 1.0994648518750378, 1.1262495372084413, 1.041509152407481, 1.4102564102564104, 1.2390096008084892, 1.3822393822393821, 1.0, 1.0054200254185386, 6.7, 1.0370986268022149, 1.0958152000403274, 1.154686982444518, 1.0373831775700935, 1.375, 1.2879279279279279, 3.0, 1.1205533596837944, 1.0, 1.0148109092652065, 1.27, 1.0099837053513696, 3.4791666666666665, 1.1, 1.4321608040201006, 2.380952380952381, 1.0, 1.0228515707805146, 1.0010396446784011, 1.001901822091858, 2.0, 1.103464097270016, 1.137546468401487, 1.5, 2.1666666666666665, 1.1111111111111112, 1.0109966316623737, 1.019090800620451, 1.4452554744525548, 1.0892445582586427, 1.0173696875049798, 1.1363636363636365, 1.5130674002751032, 4.195652173913044, 1.0135142101443815, 1.1188340807174888, 1.01350857977364, 1.5, 1.1656053360181222, 1.2268113405670285, 1.0095491936875611, 3.367816091954023, 1.0198237885462555, 1.0, 1.1550387596899225, 1.4583333333333333, 1.0070266753415744, 2.2, 1.0, 1.007484717977216, 1.5, 1.0, 1.1532043989381873, 2.2777777777777777, 1.02262313860252, 1.2417091836734695, 6.224489795918367, 1.8888888888888888, 1.5299707153242816, 1.0140625, 1.1678785286569717, 3.0, 2.1311475409836067, 1.034965034965035, 1.12106135986733, 1.8328664799253034, 1.0026682884490297, 2.6538461538461537, 1.0823529411764705, 1.4477611940298507, 1.0815065536902841, 1.014478812505183, 1.3581818181818182, 1.6666666666666667, 1.0631708065010732, 1.0412923561859733, 1.0681614349775785, 1.6413533834586467, 1.1413176585843743, 1.225907916949226, 1.1656822209096278, 1.1288014311270125, 1.0492754984341843, 1.0519699551413568, 1.0054249547920433, 1.0412014511910455, 1.5, 1.0565514622104064, 1.0466998754669987, 1.046842756912918, 1.2461945731303772, 1.0641891891891893, 1.056490905771469, 1.4396170839469808, 1.1662574967770865, 1.2514474772539288, 1.0389863547758285, 7.0, 1.003916397655723, 1.1906721536351166, 2.2, 4.318181818181818, 1.042062496664354, 1.1811175337186899, 1.028276304622327, 1.0022302507591905, 1.5, 1.1267967145790554, 1.5738831615120275, 4.6, 1.0038174080961235, 1.029459559069892, 1.031920090502391, 1.0324644549763033, 1.0402255431277525, 1.0144329896907216, 1.0078150845003788, 1.0256304257957833, 1.1455584872471416, 1.0465776767963646, 1.1365269461077845, 1.1280092592592592, 1.156366490092211, 1.3936348408710217, 1.3611111111111112, 1.1900337837837838, 1.2557218309859155, 1.0894568690095847, 1.1774193548387097, 1.0004985976939857, 1.2696629213483146, 1.0499397027931223, 1.0, 1.004909983633388, 1.105263157894737, 1.0067554597861288, 1.570342205323194, 1.1739606126914661, 1.118457300275482, 1.507942576265897, 1.0786023149159205, 1.0, 1.2657544497300763, 3.5161290322580645, 3.0, 1.5432954252095816, 1.1923076923076923, 2.1456953642384105, 1.127536231884058, 1.319001386962552, 1.0573197700132684, 1.0666666666666667, 1.010568031704095, 1.592361347520299, 1.1726147123088129, 1.032258301336877, 1.1081081081081081, 1.455791962174941, 1.083473246222352, 1.0054861784675073, 1.0891357355730154, 1.035110533159948, 1.2463592233009708, 1.1032608695652173, 1.0534882894409496, 1.4057724957555178, 1.0244546035160846, 2.3373493975903616, 1.3880895283772983, 1.1183520599250936, 1.5180722891566265, 1.0416666666666667, 1.5, 1.1048922056384742, 1.033313022896112, 1.089920279567544, 1.1474669248144562, 1.026868808165716, 2.075, 1.0892315470171892, 1.0724304677117191, 1.046070460704607, 1.3333333333333333, 1.0215596607400363, 1.1406328478151682, 1.017499480213459, 1.1048387096774193, 1.3629169022046355, 1.047266756253728, 1.0021886135974634, 1.1515151515151516, 1.0302560784580808, 1.082051282051282, 1.5333333333333334, 1.0705882352941176, 1.168055818109952, 1.0462695199537304, 1.063197026022305, 1.2647058823529411, 1.2057735500066058, 1.0, 1.0118279569892472, 1.7055084745762712, 1.0568039950062422, 1.0461538461538462, 1.40625, 1.1565212662883357, 1.238709677419355, 1.2687385740402193, 1.1928191489361701, 1.2749003984063745, 1.057941024314537, 1.2410464465584778, 1.3656633221850614, 1.183398261911897, 1.35, 1.1633835457705677, 1.1008906882591094, 1.1100576856586537, 1.0267317364673074, 1.0, 1.0412799612622063, 1.0710227272727273, 2.0, 1.220749640554045, 1.0044880446130733, 1.2719614921780986, 1.0249150091305115, 1.236282703488372, 1.2580645161290323, 1.1666666666666667, 1.232986389111289, 1.410693970420933, 1.0960861129305337, 1.0153664302600474, 1.1383737563895984, 1.0314655808949178, 1.447635135135135, 1.0382618201694451, 1.4238095238095239, 1.0619973214873795, 1.0978704123244223, 1.3107307439104674, 1.006366892160764, 4.133333333333334, 1.630174612517167, 1.5611620795107033, 1.2222222222222223, 1.8, 1.3209549071618036, 1.224768797748291, 1.054485415520088, 1.3077970718420158, 3.1666666666666665, 1.2765818656229615, 1.0689226948152748, 3.7837837837837838, 1.221131036146516, 4.333333333333333, 1.1252564961012592, 1.396039603960396, 1.574265289912629, 1.3357664233576643, 1.0071488645920943, 1.0503943460002048, 1.1944444444444444, 1.7325581395348837, 1.0134175217048145, 1.0, 1.3625224045222666, 1.0425114453891433, 1.0, 2.0, 1.7067669172932332, 1.0448275862068965, 1.0676200482527822, 1.3804347826086956, 1.0666666666666667, 1.1176088369070825, 2.0672645739910314, 1.0357142857142858, 1.0570975416336241, 1.1343283582089552, 1.2436548223350254, 1.2692307692307692, 2.0, 1.2487437185929648, 1.1194379391100702, 1.1582584657912924, 1.3135973408919432, 1.0037076996848884, 1.0351838982832728, 1.0066989568613067, 1.324079835351553, 1.2067089755213056, 1.5603600209877706, 1.2083333333333333, 2.0, 1.5601846178981333, 1.249300782175871, 1.3217034376603387, 1.1540342298288508, 1.2775919732441472, 1.080520786767993, 1.2494776431257835, 1.008444888860185, 1.2179487179487178, 4.4, 1.1965648854961832, 1.2690722516611994, 1.1480855855855856, 1.040418157079796, 1.375, 1.1675311530077825, 1.0064944054975897, 1.0000979788914277, 1.242320819112628, 1.1734128674904134, 3.0, 1.1113213497319459, 1.3391760028912179, 1.0023933872361277, 1.8133704735376044, 1.5700516750856413, 1.013792049413166, 1.0078844666873672, 1.1642725945462251, 2.2222222222222223, 1.793103448275862, 1.3057553956834533, 1.0016545210775891, 1.3126610612644132, 1.03205610771767, 1.1403396459208734, 1.0041984767610361, 1.0583548160299976, 1.6703722039695756, 1.0008990345151076, 1.0767857142857142, 1.4285714285714286, 1.0, 1.2142857142857142, 1.0014580110595472, 2.3333333333333335, 1.0918069795879974, 1.0084108132257923, 1.1354996934396075, 1.9666666666666666, 1.0791476407914764, 1.024947086214195, 1.0713454165913971, 1.4004683840749415, 1.5827814569536425, 1.3724279835390947, 1.806870937790158, 1.2488778915870642, 1.2307692307692308, 1.0688391497998535, 1.0, 1.082995951417004, 1.1291804952769977, 1.019015319845632, 1.0318181818181817, 2.5, 1.0100914362176627, 1.1398628048780488, 1.0511049000826973, 3.0625, 1.5951471278235807, 1.3431372549019607, 1.0226063173625257, 1.3421052631578947, 1.2702702702702702, 1.2562225475841875, 1.1171113741917857, 1.1510370912640313, 1.0469225302061123, 5.0, 1.003306972163809, 1.303030303030303, 1.012614608331795, 1.2485843714609286, 1.5656324582338903, 1.2946648426812586, 1.310734463276836, 1.0520710059171599, 1.2738049713193116, 1.0415877596887335, 1.157487922705314, 1.0030204045104707, 1.004536839255092, 1.1153846153846154, 1.173148148148148, 1.1830367460134041, 1.0770312407906886, 1.0486257928118394, 1.3537936913895994, 1.5155393053016453, 1.0282317979197622, 1.006335797254488, 1.0385329713238298, 1.55, 1.2943100065402224, 1.0052357535435348, 1.2451183092120377, 1.5394581861012957, 1.0280086492330562, 1.165824068566897, 1.039811958278243, 1.0973584905660376, 1.019012638288789, 1.0048345772529799, 1.0223776223776224, 1.3405797101449275, 1.3205821205821207, 1.013565069944892, 1.5163934426229508, 1.75, 1.0097367308737395, 1.025303368909125, 1.0193409742120343, 1.0945945945945945, 1.5268103924820342, 1.0308813535253127, 1.1984501347708896, 1.0433898305084746, 1.5294117647058822, 1.0085215168299957, 1.5608586103304585, 1.0242718446601942, 1.1944444444444444, 1.1432602075694487, 1.0402061855670104, 1.04093567251462, 1.9523809523809523, 1.2884615384615385, 1.0069472147895888, 1.881055676066522, 1.1876675603217157, 1.020745665023824, 1.1250842431594554, 1.12, 1.3333333333333333, 1.0532859680284192, 1.40625, 2.0, 3.75, 1.916243654822335, 6.428571428571429, 1.075268817204301, 1.228668476576543, 1.0086945486723236, 1.5254237288135593, 1.6363636363636365, 1.2258064516129032, 1.6818181818181819, 1.3142857142857143, 1.0673323823109844, 1.0664228571428571, 1.0387599110147738, 1.3303571428571428, 1.013595021057368, 1.0118581414925154, 5.0, 1.0090087157252994, 1.1321070234113713, 1.6, 1.3588235294117648, 1.032871381758602, 1.1025425950196592, 1.2100211836928796, 1.0382830626450117, 1.3333333333333333, 1.1390532544378698, 1.0739811487082118, 1.7178362573099415, 1.0285540007609568, 1.035175879396985, 1.0236806448250704, 1.1669887461634647, 1.0511528990373853, 2.5, 1.0068794223126878, 1.0104046242774567, 1.272845953002611, 1.2173913043478262, 1.1149584487534625, 1.0, 1.1627906976744187, 1.1419006881160498, 1.2164055864867416, 1.0366379310344827, 1.3413654618473896, 1.1894604767879549, 1.580332184438353, 1.5461157024793388, 1.0, 1.0303851059074116, 1.0066137566137565, 1.076286092302903, 1.2222914493911772, 1.0972222222222223, 1.5223880597014925, 1.49566112663627, 1.375, 1.3303527074018877, 1.0595611285266457, 1.0094644670985236, 1.3712574850299402, 3.0, 1.2703809913969684, 1.0113924050632912, 1.1498881431767338, 1.09103287298191, 1.0154632641852213, 1.0417314670813893, 1.09717868338558, 1.4446280991735536, 1.1458333333333333, 1.020922715251249, 1.0229342612765893, 1.2438672438672438, 1.0118421052631579, 2.5, 1.1411764705882352, 1.1004132205650463, 1.041405269761606, 1.159298531217977, 1.0033170087874683, 1.1583298883836295, 2.0, 1.2569750367107195, 1.2630090812858654, 1.2081510934393638, 1.2515151515151515, 1.003088057481363, 1.129496402877698, 1.0474397590361446, 1.0441696113074206, 1.0094474564846438, 1.0194287999466791, 1.2813953488372094, 1.206583427922815, 1.1132075471698113, 1.1803146430012101, 1.3059463629534889, 1.0330279729974725, 1.0554541503694046, 1.0099783080260303, 1.5377373980625033, 2.0, 2.4278350515463916, 2.5, 3.5, 1.8823529411764706, 1.0423058485139023, 4.625, 1.0079617834394905, 1.0681818181818181, 2.4166666666666665, 1.2723857232310583, 1.3571428571428572, 3.788732394366197, 1.0255439924314096, 1.0315318324537377, 1.6, 1.1176470588235294, 1.3214601769911505, 1.375, 1.0252996005326231, 1.0147920736812728, 1.156451949134876, 1.0150820334311477, 2.3333333333333335, 1.0415994840374072, 1.0070188300139833, 1.0901853385134705, 1.7771260997067448, 1.2954545454545454, 1.7879448075526507, 2.0, 1.8455882352941178]
origin-bjaq_15.71 	max: 8.2000	99th: 5.0000	95th: 2.5000	median: 1.1499	mean: 1.3893

...Done, result: results.csv

WORKLOAD-FINISHED | Type: QueryWorkload | Progress: 15/15 | Workload-time: 12.128978 | Model-update-time: 0.000000


Experiment Summary: #data-update-times=7, #drift=7 | total-time=281.341140